from 'jquery' import *;
/*! jQuery v1.12.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||(e=n.uniqueSort(e)),D.test(a)&&(e=e.reverse())),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",K),a.removeEventListener("load",K)):(d.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",K),a.addEventListener("load",K);else{d.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&!function f(){if(!n.isReady){try{c.doScroll("left")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst="0"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName("body")[0],c&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b},N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0;
}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),"object"!=typeof b&&"function"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return c=d.getElementsByTagName("body")[0],c&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function X(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&U.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var Y=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)Y(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,_=/^$|\/(?:java|ecma)script/i,aa=/^\s+/,ba="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ca(a){var b=ba.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var ga=/<|&#?\w+;/,ha=/<tbody/i;function ia(a){Z.test(a.type)&&(a.defaultChecked=a.checked)}function ja(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ca(b),q=[],r=0;o>r;r++)if(g=a[r],g||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement("div")),j=($.exec(g)||["",""])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&aa.test(g)&&q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g="table"!==j||ha.test(g)?"<table>"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(ea(q,"input"),ia),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),"script"),h&&fa(i),c){f=0;while(g=i[f++])_.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return"undefined"==typeof n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(G)||[""],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!na.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||l.trigger.apply(e,c)!==!1)){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,na.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),g=h&&i[h],g&&g.apply&&M(i)&&(b.result=g.apply(i,c),b.result===!1&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),c)===!1)&&M(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ma.test(f)?this.mouseHooks:la.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ra()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ra()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?pa:qa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:qa,isPropagationStopped:qa,isImmediatePropagationStopped:qa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){return ka.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ka.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!ka.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return sa(this,a,b,c,d)},one:function(a,b,c,d){return sa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=qa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ta=/ jQuery\d+="(?:null|\d+)"/g,ua=new RegExp("<(?:"+ba+")[\\s/>]","i"),va=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wa=/<script|<style|<link/i,xa=/checked\s*(?:[^=]|=\s*.checked.)/i,ya=/^true\/(.*)/,za=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement("div"));function Ca(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Da(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Da(b).text=a.text,Ea(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&xa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o&&(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(ea(k,"script"),Da),h=i.length;o>m;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,ea(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;h>m;m++)g=i[m],_.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(za,"")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&fa(ea(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]&&Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,"script"),d.length>0&&fa(d,!i&&ea(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||"undefined"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,""):void 0;if("string"==typeof a&&!wa.test(a)&&(l.htmlSerialize||!ua.test(a))&&(l.leadingWhitespace||!aa.test(a))&&!da[($.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(ea(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:"block",BODY:"block"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),"none"!==c&&c||(Ja=(Ja||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");if(j.style){j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",j.childNodes[0].style.borderCollapse="separate",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===k[0].offsetHeight,f&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Oa.test(g)&&Na.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):Qa.currentStyle&&(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Oa.test(g)&&!Ta.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\([^)]*\)/i,Wa=/opacity\s*=\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp("^("+T+")(.*)$","i"),Za={position:"absolute",visibility:"hidden",display:"block"},$a={letterSpacing:"0",fontWeight:"400"},_a=["Webkit","O","Moz","ms"],ab=d.createElement("div").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&W(d)&&(f[g]=n._data(d,"olddisplay",Ma(d.nodeName)))):(e=W(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function eb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+V[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+V[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+V[f]+"Width",!0,e))):(g+=n.css(a,"padding"+V[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+V[f]+"Width",!0,e)));return g}function fb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g=l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Sa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Oa.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+eb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=U.exec(c))&&e[1]&&(c=X(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Sa(a,b,d)),"normal"===f&&b in $a&&(f=$a[b]),""===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,"display"))&&0===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+" "+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:"inline-block"},Sa,[a,"marginRight"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Sa(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{
marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px":void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=gb.propHooks[this.prop];return a&&a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=V[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&W(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k="none"===j?n._data(a,"olddisplay")||Ma(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Ma(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?Ma(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);g>f;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&kb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb("show"),slideUp:mb("hide"),slideToggle:mb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),hb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ib||(ib=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(ib),ib=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var rb=/\r/g,sb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(sb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var tb,ub,vb=n.expr.attrHandle,wb=/^(?:checked|selected)$/i,xb=l.getSetAttribute,yb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ub:tb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?yb&&xb||!wb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(xb?c:d)}}),ub={set:function(a,b,c){return b===!1?n.removeAttr(a,c):yb&&xb||!wb.test(c)?a.setAttribute(!xb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=vb[b]||n.find.attr;yb&&xb||!wb.test(b)?vb[b]=function(a,b,d){var e,f;return d||(f=vb[b],vb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,vb[b]=f),e}:vb[b]=function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),yb&&xb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):tb&&tb.set(a,b,c)}}),xb||(tb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},vb.id=vb.name=vb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:tb.set},n.attrHooks.contenteditable={set:function(a,b,c){tb.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var zb=/^(?:input|select|textarea|button|object)$/i,Ab=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):zb.test(a.nodeName)||Ab.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Bb=/[\t\r\n\f]/g;function Cb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Cb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Cb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Cb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=Cb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||a===!1?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Cb(c)+" ").replace(Bb," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Db=a.location,Eb=n.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Hb=/#.*$/,Ib=/([?&])_=[^&]*/,Jb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,Nb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ob={},Pb={},Qb="*/".concat("*"),Rb=Db.href,Sb=Nb.exec(Rb.toLowerCase())||[];function Tb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Ub(a,b,c,d){var e={},f=a===Pb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Vb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Wb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Xb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb,type:"GET",isLocal:Kb.test(Sb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Vb(Vb(a,n.ajaxSettings),b):Vb(n.ajaxSettings,a)},ajaxPrefilter:Tb(Ob),ajaxTransport:Tb(Pb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Jb.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Rb)+"").replace(Hb,"").replace(Mb,Sb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(G)||[""],null==l.crossDomain&&(d=Nb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Sb[1]&&d[2]===Sb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Sb[3]||("http:"===Sb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Ub(Ob,l,c,w),2===u)return w;i=n.event&&l.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Lb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ib.test(f)?f.replace(Ib,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Qb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Ub(Pb,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2>u))throw x;y(-1,x)}}else y(-1,"No Transport");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&300>b||304===b,d&&(v=Wb(l,w,d)),v=Xb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),x=w.getResponseHeader("etag"),x&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Yb(a){return a.style&&a.style.display||n.css(a,"display")}function Zb(a){if(!n.contains(a.ownerDocument||d,a))return!0;while(a&&1===a.nodeType){if("none"===Yb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Zb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var $b=/%20/g,_b=/\[\]$/,ac=/\r?\n/g,bc=/^(?:submit|button|image|reset|file)$/i,cc=/^(?:input|select|textarea|keygen)/i;function dc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||_b.test(a)?d(a,e):dc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)dc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)dc(c,a[c],b,e);return d.join("&").replace($b,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&cc.test(this.nodeName)&&!bc.test(a)&&(this.checked||!Z.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(ac,"\r\n")}}):{name:b.name,value:c.replace(ac,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?ic():d.documentMode>8?hc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&hc()||ic()}:hc;var ec=0,fc={},gc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in fc)fc[a](void 0,!0)}),l.cors=!!gc&&"withCredentials"in gc,gc=l.ajax=!!gc,gc&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++ec;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete fc[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=fc[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function hc(){try{return new a.XMLHttpRequest}catch(b){}}function ic(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jc.pop()||n.expando+"_"+Eb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(kc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&kc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var lc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function mc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?("undefined"!=typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=mc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=mc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({
padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var nc=a.jQuery,oc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=oc),b&&a.jQuery===n&&(a.jQuery=nc),n},b||(a.jQuery=a.$=n),n});

$.browser={ msie: ( navigator.appName == 'Microsoft Internet Explorer') ? true : false };

/* jQuery UI - v1.12.1 - 2021-06-21
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/accordion.js, widgets/datepicker.js, widgets/mouse.js, widgets/tabs.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};var version=$.ui.version="1.12.1";
/*
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var widgetUuid=0;var widgetSlice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var existingConstructor,constructor,basePrototype;var proxiedPrototype={};var namespace=name.split(".")[0];name=name.split(".")[1];var fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}if($.isArray(prototype)){prototype=$.extend.apply(null,[{}].concat(prototype));}$.expr[":"][fullName.toLowerCase()]=function(elem){return !!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];
constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}proxiedPrototype[prop]=(function(){function _super(){return base.prototype[prop].apply(this,arguments);}function _superApply(args){return base.prototype[prop].apply(this,args);}return function(){var __super=this._super;var __superApply=this._superApply;var returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widgetSlice.call(arguments,1);
var inputIndex=0;var inputLength=input.length;var key;var value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string";var args=widgetSlice.call(arguments,1);var returnValue=this;if(isMethodCall){if(!this.length&&options==="instance"){returnValue=undefined;}else{this.each(function(){var methodValue;var instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});
}return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widgetUuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.classesElementLookup={};if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled);}this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:function(){return{};},_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){var that=this;this._destroy();$.each(this.classesElementLookup,function(key,value){that._removeClass(value,key);});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace);},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key;var parts;var curOption;var i;if(arguments.length===0){return $.widget.extend({},this.options);
}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}options[key]=value;}}this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}return this;},_setOption:function(key,value){if(key==="classes"){this._setOptionClasses(value);}this.options[key]=value;if(key==="disabled"){this._setOptionDisabled(value);}return this;},_setOptionClasses:function(value){var classKey,elements,currentElements;for(classKey in value){currentElements=this.classesElementLookup[classKey];if(value[classKey]===this.options.classes[classKey]||!currentElements||!currentElements.length){continue;}elements=$(currentElements.get());this._removeClass(currentElements,classKey);elements.addClass(this._classes({element:elements,keys:classKey,classes:value,add:true}));}},_setOptionDisabled:function(value){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!value);if(value){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus");}},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_classes:function(options){var full=[];
var that=this;options=$.extend({element:this.element,classes:this.options.classes||{}},options);function processClassString(classes,checkOption){var current,i;for(i=0;i<classes.length;i++){current=that.classesElementLookup[classes[i]]||$();if(options.add){current=$($.unique(current.get().concat(options.element.get())));}else{current=$(current.not(options.element).get());}that.classesElementLookup[classes[i]]=current;full.push(classes[i]);if(checkOption&&options.classes[classes[i]]){full.push(options.classes[classes[i]]);}}}this._on(options.element,{"remove":"_untrackClassesElement"});if(options.keys){processClassString(options.keys.match(/\S+/g)||[],true);}if(options.extra){processClassString(options.extra.match(/\S+/g)||[]);}return full.join(" ");},_untrackClassesElement:function(event){var that=this;$.each(that.classesElementLookup,function(key,value){if($.inArray(event.target,value)!==-1){that.classesElementLookup[key]=$(value.not(event.target).get());}});},_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,false);},_addClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,true);},_toggleClass:function(element,keys,extra,add){add=(typeof add==="boolean")?add:extra;var shift=(typeof element==="string"||element===null),options={extra:shift?keys:extra,keys:shift?element:keys,element:shift?this.element:element,add:add};options.element.toggleClass(this._classes(options),add);return this;},_on:function(suppressDisabledCheck,element,handlers){var delegateElement;var instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;
element=suppressDisabledCheck;suppressDisabledCheck=false;}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}var match=event.match(/^([\w:-]*)\s*(.*)$/);var eventName=match[1]+instance.eventNamespace;var selector=match[2];if(selector){delegateElement.on(eventName,selector,handlerProxy);}else{element.on(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.off(eventName).off(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover");},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover");
}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){this._addClass($(event.currentTarget),null,"ui-state-focus");},focusout:function(event){this._removeClass($(event.currentTarget),null,"ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig;var callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}this.element.trigger(event,data);return !($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}var hasOptions;var effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else{if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}next();});}}};});var widget=$.widget;
/*
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(){var cachedScrollbarWidth,max=Math.max,abs=Math.abs,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}function parseCss(element,property){return parseInt($.css(element,property),10)||0;}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}var w1,w2,div=$("<div "+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);
return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9,hasOffset=!isWindow&&!isDocument;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];
options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}if(options.at[0]==="right"){basePosition.left+=targetWidth;}else{if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}}if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else{if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else{if(options.my[0]==="center"){position.left-=elemWidth/2;}}if(options.my[1]==="bottom"){position.top-=elemHeight;}else{if(options.my[1]==="center"){position.top-=elemHeight/2;}}position.left+=myOffset[0];position.top+=myOffset[1];collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});
}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}options.using.call(this,props,feedback);};}elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else{if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}}else{if(overLeft>0){position.left+=overLeft;
}else{if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}}}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else{if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}}else{if(overTop>0){position.top+=overTop;}else{if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;
if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else{if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else{if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};})();var position=$.ui.position;
/*
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var data=$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return !!$.data(elem,dataName);
};}):function(elem,i,match){return !!$.data(elem,match[3]);}});
/*
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var disableSelection=$.fn.extend({disableSelection:(function(){var eventType="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.off(".ui-disableSelection");}});
/*
 * jQuery UI Focusable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.ui.focusable=function(element,hasTabindex){var map,mapName,img,focusableIfVisible,fieldset,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}img=$("img[usemap='#"+mapName+"']");return img.length>0&&img.is(":visible");}if(/^(input|select|textarea|button|object)$/.test(nodeName)){focusableIfVisible=!element.disabled;if(focusableIfVisible){fieldset=$(element).closest("fieldset")[0];if(fieldset){focusableIfVisible=!fieldset.disabled;}}}else{if("a"===nodeName){focusableIfVisible=element.href||hasTabindex;}else{focusableIfVisible=hasTabindex;}}return focusableIfVisible&&$(element).is(":visible")&&visible($(element));};function visible(element){var visibility=element.css("visibility");while(visibility==="inherit"){element=element.parent();
visibility=element.css("visibility");}return visibility!=="hidden";}$.extend($.expr[":"],{focusable:function(element){return $.ui.focusable(element,$.attr(element,"tabindex")!=null);}});var focusable=$.ui.focusable;var form=$.fn.form=function(){return typeof this[0].form==="string"?this.closest("form"):$(this[0].form);};
/*
 * jQuery UI Form Reset Mixin 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var formResetMixin=$.ui.formResetMixin={_formResetHandler:function(){var form=$(this);setTimeout(function(){var instances=form.data("ui-form-reset-instances");$.each(instances,function(){this.refresh();});});},_bindFormResetHandler:function(){this.form=this.element.form();if(!this.form.length){return;}var instances=this.form.data("ui-form-reset-instances")||[];if(!instances.length){this.form.on("reset.ui-form-reset",this._formResetHandler);}instances.push(this);this.form.data("ui-form-reset-instances",instances);},_unbindFormResetHandler:function(){if(!this.form.length){return;}var instances=this.form.data("ui-form-reset-instances");instances.splice($.inArray(this,instances),1);if(instances.length){this.form.data("ui-form-reset-instances",instances);}else{this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset");}}};
/*
 * jQuery UI Support for jQuery core 1.7.x 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */
if($.fn.jquery.substring(0,3)==="1.7"){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};
function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
/*
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var keycode=$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var escapeSelector=$.ui.escapeSelector=(function(){var selectorEscape=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(selector){return selector.replace(selectorEscape,"\\$1");};})();
/*
 * jQuery UI Labels 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var labels=$.fn.labels=function(){var ancestor,selector,id,labels,ancestors;if(this[0].labels&&this[0].labels.length){return this.pushStack(this[0].labels);
}labels=this.eq(0).parents("label");id=this.attr("id");if(id){ancestor=this.eq(0).parents().last();ancestors=ancestor.add(ancestor.length?ancestor.siblings():this.siblings());selector="label[for='"+$.ui.escapeSelector(id)+"']";labels=labels.add(ancestors.find(selector).addBack(selector));}return this.pushStack(labels);};
/*
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var scrollParent=$.fn.scrollParent=function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;};
/*
 * jQuery UI Tabbable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var tabbable=$.extend($.expr[":"],{tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),hasTabindex=tabIndex!=null;return(!hasTabindex||tabIndex>=0)&&$.ui.focusable(element,hasTabindex);}});
/*
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var uniqueId=$.fn.extend({uniqueId:(function(){var uuid=0;
return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});var ie=$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
/*
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var mouseHandled=false;$(document).on("mouseup",function(){mouseHandled=false;});var widgetsMouse=$.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.on("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).on("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;
}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else{if(!event.which){if(event.originalEvent.altKey||event.originalEvent.ctrlKey||event.originalEvent.metaKey||event.originalEvent.shiftKey){this.ignoreMissingWhich=true;}else{if(!this.ignoreMissingWhich){return this._mouseUp(event);}}}}}if(event.which||event.button){this._mouseMoved=true;}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}return !this._mouseStarted;},_mouseUp:function(event){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);
if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}this._mouseStop(event);}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer;}this.ignoreMissingWhich=false;mouseHandled=false;event.preventDefault();},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});var plugin=$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var safeActiveElement=$.ui.safeActiveElement=function(document){var activeElement;try{activeElement=document.activeElement;}catch(error){activeElement=document.body;}if(!activeElement){activeElement=document.body;}if(!activeElement.nodeName){activeElement=document.body;}return activeElement;};var safeBlur=$.ui.safeBlur=function(element){if(element&&element.nodeName.toLowerCase()!=="body"){$(element).trigger("blur");
}};
/*
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.widget("ui.draggable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}if(this.options.addClasses){this._addClass("ui-draggable");}this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}this.handle=this._getHandle(event);if(!this.handle){return false;}this._blurActiveElement(event);this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);
return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var activeElement=$.ui.safeActiveElement(this.document[0]),target=$(event.target);if(target.closest(activeElement).length){return;}$.ui.safeBlur(activeElement);},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};
this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp(new $.Event("mouseup",event));return false;}this.position=ui.position;}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}if(this.dropped){dropped=this.dropped;this.dropped=false;}if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}if(this.handleElement.is(event.target)){this.element.trigger("focus");}return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new $.Event("mouseup",{target:this.element[0]}));
}else{this._clear();}return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle");},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left" in obj){this.offset.click.left=obj.left+this.margins.left;}if("right" in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top" in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom" in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;
}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
return;}if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}if(o.containment.constructor===Array){this.containment=o.containment;return;}if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}c=$(o.containment);ce=c[0];if(!ce){return;}isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};
},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;
}if(o.axis==="y"){pageX=this.originalPageX;}if(o.axis==="x"){pageY=this.originalPageY;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});
draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}return innermostIntersecting;});}if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);
sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;
if(t.css("opacity")){o._opacity=t.css("opacity");}t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else{if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}}if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else{if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else{if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);
}}}if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else{if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=false;continue;}if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;
if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;
if(t.css("zIndex")){o._zIndex=t.css("zIndex");}t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var widgetsDraggable=$.ui.draggable;
/*
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);o.addClasses&&this._addClass("ui-droppable");},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}else{if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];
this._splice(drop);this._addToManager(value);}}this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;this._addActiveClass();if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this._removeActiveClass();if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._addHoverClass();this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeHoverClass();this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;
return false;}});if(childrenIntersection){return false;}if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",event,this.ui(draggable));return this.element;}return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};},_addHoverClass:function(){this._addClass("ui-droppable-hover");},_removeHoverClass:function(){this._removeClass("ui-droppable-hover");},_addActiveClass:function(){this._addClass("ui-droppable-active");},_removeActiveClass:function(){this._removeClass("ui-droppable-active");}});var intersect=$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);
case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}if(type==="mousedown"){m[i]._activate.call(m[i],event);}m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}if(!this.options.disabled&&this.visible&&intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").on("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);
}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}var parentInstance,scope,parent,intersects=intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").off("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};if($.uiBackCompat!==false){$.widget("ui.droppable",$.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass);}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass);
}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}}});}var widgetsDroppable=$.ui.droppable;
/*
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.widget("ui.resizable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseFloat(value)||0;},_isNumber:function(value){return !isNaN(parseFloat(value));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},_create:function(){var margins,o=this.options,that=this;this._addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));
this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;margins={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(margins);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(margins);this._proportionallyResize();}this._setupHandles();if(o.autoHide){$(this.element).on("mouseenter",function(){if(o.disabled){return;}that._removeClass("ui-resizable-autohide");that._handles.show();}).on("mouseleave",function(){if(o.disabled){return;}if(!that.resizing){that._addClass("ui-resizable-autohide");that._handles.hide();}});}this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_setOption:function(key,value){this._super(key,value);
switch(key){case"handles":this._removeHandles();this._setupHandles();break;default:break;}},_setupHandles:function(){var o=this.options,handle,i,n,hname,axis,that=this;this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div>");this._addClass(axis,"ui-resizable-handle "+hname);axis.css({zIndex:o.zIndex});this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else{if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}this._handles=this._handles.add(this.handles[i]);
}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide");}},_removeHandles:function(){this._handles.remove();},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}return !this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);
cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);this._addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseFloat(that.element.css("left"))+(that.position.left-that.originalPosition.left))||null;top=(parseFloat(that.element.css("top"))+(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}that.helper.height(that.size.height);
that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}$("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();
if(this._isNumber(data.left)){this.position.left=data.left;}if(this._isNumber(data.top)){this.position.top=data.top;}if(this._isNumber(data.height)){this.size.height=data.height;}if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else{if(this._isNumber(data.width)){data.height=(data.width/this.aspectRatio);}}if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.originalPosition.top+this.originalSize.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}if(isminh){data.height=o.minHeight;}if(ismaxw){data.width=o.maxWidth;}if(ismaxh){data.height=o.maxHeight;}if(isminw&&cw){data.left=dw-o.minWidth;}if(ismaxw&&cw){data.left=dw-o.maxWidth;}if(isminh&&ch){data.top=dh-o.minHeight;}if(ismaxh&&ch){data.top=dh-o.maxHeight;}if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else{if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;
}}return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseFloat(borders[i])||0);widths[i]+=(parseFloat(paddings[i])||0);}return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};
},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseFloat(that.element.css("left"))+(that.position.left-that.originalPosition.left))||null,top=(parseFloat(that.element.css("top"))+(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseFloat(that.element.css("width")),height:parseFloat(that.element.css("height")),top:parseFloat(that.element.css("top")),left:parseFloat(that.element.css("left"))};
if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?(that.position.left-co.left):(that.position.left-cop.left));
if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}that.position.left=o.helper?co.left:0;}if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}that.position.top=that._helper?co.top:0;}isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}woset=Math.abs(that.sizeDiff.width+(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;
if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseFloat(el.width()),height:parseFloat(el.height()),left:parseFloat(el.css("left")),top:parseFloat(el.css("top"))});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("ui-resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0});that._addClass(that.ghost,"ui-resizable-ghost");if($.uiBackCompat!==false&&typeof that.options.ghost==="string"){that.ghost.addClass(this.options.ghost);
}that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}if(isMinHeight){newHeight+=gridY;}if(isMaxWidth){newWidth-=gridX;}if(isMaxHeight){newHeight-=gridY;}if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else{if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else{if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;
that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}}}});var widgetsResizable=$.ui.resizable;
/*
 * jQuery UI Selectable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var widgetsSelectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var that=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){that.elementPos=$(that.element[0]).offset();that.selectees=$(that.options.filter,that.element[0]);that._addClass(that.selectees,"ui-selectee");that.selectees.each(function(){var $this=$(this),selecteeOffset=$this.offset(),pos={left:selecteeOffset.left-that.elementPos.left,top:selecteeOffset.top-that.elementPos.top};$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this._mouseInit();this.helper=$("<div>");this._addClass(this.helper,"ui-selectable-helper");},_destroy:function(){this.selectees.removeData("selectable-item");
this._mouseDestroy();},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];this.elementPos=$(this.element[0]).offset();if(this.options.disabled){return;}this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");that._removeClass(selectee.$element,doSelect?"ui-unselecting":"ui-selected")._addClass(selectee.$element,doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}return false;}});},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled){return;}var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;
if(x1>x2){tmp=x2;x2=x1;x1=tmp;}if(y1>y2){tmp=y2;y2=y1;y1=tmp;}this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false,offset={};if(!selectee||selectee.element===that.element[0]){return;}offset.left=selectee.left+that.elementPos.left;offset.right=selectee.right+that.elementPos.left;offset.top=selectee.top+that.elementPos.top;offset.bottom=selectee.bottom+that.elementPos.top;if(options.tolerance==="touch"){hit=(!(offset.left>x2||offset.right<x1||offset.top>y2||offset.bottom<y1));}else{if(options.tolerance==="fit"){hit=(offset.left>x1&&offset.right<x2&&offset.top>y1&&offset.bottom<y2);}}if(hit){if(selectee.selected){that._removeClass(selectee.$element,"ui-selected");selectee.selected=false;}if(selectee.unselecting){that._removeClass(selectee.$element,"ui-unselecting");selectee.unselecting=false;}if(!selectee.selecting){that._addClass(selectee.$element,"ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){that._removeClass(selectee.$element,"ui-selecting");selectee.selecting=false;that._addClass(selectee.$element,"ui-selected");selectee.selected=true;}else{that._removeClass(selectee.$element,"ui-selecting");selectee.selecting=false;if(selectee.startselected){that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;}that._trigger("unselecting",event,{unselecting:selectee.element});}}if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){that._removeClass(selectee.$element,"ui-selected");
selectee.selected=false;that._addClass(selectee.$element,"ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");that._removeClass(selectee.$element,"ui-selecting")._addClass(selectee.$element,"ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});
/*
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var widgetsSortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return(x>=reference)&&(x<(reference+size));
},_isFloating:function(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true;},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._setHandleClassName();}},_setHandleClassName:function(){var that=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");$.each(this.items,function(){that._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle");});},_destroy:function(){this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}return this;},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}if(this.options.disabled||this.options.type==="static"){return false;}this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}if(!currentItem){return false;}if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;
this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}this._createPlaceholder();if(o.containment){this._setContainment();}if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}this.helper.css("opacity",o.opacity);}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}this.helper.css("zIndex",o.zIndex);}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}this._trigger("start",event,this._uiHash());
if(!this._preserveHelperProportions){this._cacheHelperProportions();}if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}if($.ui.ddmanager){$.ui.ddmanager.current=this;}if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else{if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else{if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);
}else{if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);}}if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);}else{if(this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed);}}}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}if(item.instance!==this.currentContainer){continue;}if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}this._trigger("change",event,this._uiHash());break;}}this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}this._trigger("sort",event,this._uiHash());
this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);}if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);}this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}return false;},cancel:function(){if(this.dragging){this._mouseUp(new $.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper");}else{this.currentItem.show();}for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});
if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var verticalDirection,horizontalDirection,isOverElementHeight=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth;
if(!isOverElement){return false;}verticalDirection=this._getDragVerticalDirection();horizontalDirection=this._getDragHorizontalDirection();return this.floating?((horizontalDirection==="right"||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;
i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);
this.containers.push(inst);}}}}for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}p=t.offset();item.left=p.left;item.top=p.top;}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}return this;},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]);
that._addClass(element,"ui-sortable-placeholder",className||that.currentItem[0].className)._removeClass(element,"ui-sortable-helper");if(nodeName==="tbody"){that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element));}else{if(nodeName==="tr"){that._createTrPlaceholder(that.currentItem,element);}else{if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}}}if(!className){element.css("visibility","hidden");}return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);});},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;
}innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}if(!innermostContainer){return;}if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";axis=floating?"pageX":"pageY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}if(this.items[j].item[0]===this.currentItem[0]){continue;}cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/2){nearBottom=true;}if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1;}return;}itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());
this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}if("left" in obj){this.offset.click.left=obj.left+this.margins.left;}if("right" in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}if("top" in obj){this.offset.click.top=obj.top+this.margins.top;}if("bottom" in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();
var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?(this.document.height()||document.body.parentNode.scrollHeight):this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];
}if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);
if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}return{top:(pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};
},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper");}else{this.currentItem.show();}if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));
};}).call(this,this.currentContainer));}}function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}this.dragging=false;if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}this.helper=null;}if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}this._trigger("stop",event,this._uiHash());}this.fromOutside=false;return !this.cancelHelperRemoval;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});
/*
 * jQuery UI Accordion 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
var widgetsAccordion=$.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var options=this.options;
this.prevShow=this.prevHide=$();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null)){options.active=0;}this._processPanels();if(options.active<0){options.active+=this.headers.length;}this._refresh();},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next()};},_createIcons:function(){var icon,children,icons=this.options.icons;if(icons){icon=$("<span>");this._addClass(icon,"ui-accordion-header-icon","ui-icon "+icons.header);icon.prependTo(this.headers);children=this.active.children(".ui-accordion-header-icon");this._removeClass(children,icons.header)._addClass(children,null,icons.activeHeader)._addClass(this.headers,"ui-accordion-icons");}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}this._setupEvents(value);}this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);
}if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}},_setOptionDisabled:function(value){this._super(value);this.element.attr("aria-disabled",value);this._toggleClass(null,"ui-state-disabled",!!value);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!value);},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);$(toFocus).trigger("focus");event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().trigger("focus");}},refresh:function(){var options=this.options;this._processPanels();if((options.active===false&&options.collapsible===true)||!this.headers.length){options.active=false;this.active=$();}else{if(options.active===false){this._activate(0);}else{if(this.active.length&&!$.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$();}else{this._activate(Math.max(0,options.active-1));}}else{options.active=this.headers.index(this.active);
}}}this._destroyIcons();this._refresh();},_processPanels:function(){var prevHeaders=this.headers,prevPanels=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(prevPanels){this._off(prevHeaders.not(this.headers));this._off(prevPanels.not(this.panels));}},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent();this.active=this._findActive(options.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var header=$(this),headerId=header.uniqueId().attr("id"),panel=header.next(),panelId=panel.uniqueId().attr("id");header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"});}this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();
this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}maxHeight-=elem.outerHeight(true);});this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else{if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){var isVisible=$(this).is(":visible");if(!isVisible){$(this).show();}maxHeight=Math.max(maxHeight,$(this).css("height","").height());if(!isVisible){$(this).hide();}}).height(maxHeight);}}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={keydown:"_keydown"};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers);},_eventHandler:function(event){var activeChildren,clickedChildren,options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};
event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);this._removeClass(active,"ui-accordion-header-active","ui-state-active");if(options.icons){activeChildren=active.children(".ui-accordion-header-icon");this._removeClass(activeChildren,null,options.icons.activeHeader)._addClass(activeChildren,null,options.icons.header);}if(!clickedIsActive){this._removeClass(clicked,"ui-accordion-header-collapsed")._addClass(clicked,"ui-accordion-header-active","ui-state-active");if(options.icons){clickedChildren=clicked.children(".ui-accordion-header-icon");this._removeClass(clickedChildren,null,options.icons.header)._addClass(clickedChildren,null,options.icons.activeHeader);}this._addClass(clicked.next(),"ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}toHide.attr({"aria-hidden":"true"});toHide.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){toHide.prev().attr({"tabIndex":-1,"aria-expanded":"false"});}else{if(toShow.length){this.headers.filter(function(){return parseInt($(this).attr("tabIndex"),10)===0;}).attr("tabIndex",-1);}}toShow.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});
},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,boxSizing=toShow.css("box-sizing"),down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}if(typeof options==="string"){easing=options;}easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(this.showProps,duration,easing,complete);}if(!toShow.length){return toHide.animate(this.hideProps,duration,easing,complete);}total=toShow.show().outerHeight();toHide.animate(this.hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(this.showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){if(boxSizing==="content-box"){adjust+=fx.now;}}else{if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}}});},_toggleComplete:function(data){var toHide=data.oldPanel,prev=toHide.prev();this._removeClass(toHide,"ui-accordion-content-active");this._removeClass(prev,"ui-accordion-header-active")._addClass(prev,"ui-accordion-header-collapsed");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}this._trigger("activate",null,data);}});
/*
 * jQuery UI Datepicker 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
$.extend($.ui,{datepicker:{version:"1.12.1"}});
var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}elem=elem.parent();}return 0;}function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};
$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else{if(inline){this._inlineDatepicker(target,inst);}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}this._attachments(input,inst);input.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);
this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}input.off("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.on("focus",this._showDatepicker);}if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.on("click",function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else{if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}}return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");
if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;
browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp);}else{if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}}if(datepicker_instActive===inst){datepicker_instActive=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else{if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);
inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else{if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}return false;},_getInst:function(target){try{return $.data(target,"datepicker");}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));
}settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}if(inst){if(this._curInst===inst){this._hideDatepicker();}date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}if("disabled" in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();
handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");
}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else{if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}}if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}catch(err){}}return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);
}}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return !isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}if($.datepicker._shouldFocusInput(inst)){inst.input.trigger("focus");}$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);
var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.trigger("focus");}if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;
offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}if(!showAnim){postProcess();}this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}this._inDialog=false;
}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);
this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{if(inst.input){inst.input.trigger("change");}}if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.trigger("focus");}this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).val(dateStr);}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));
time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return -(a[1].length-b[1].length);
});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}break;default:checkLiteral();}}}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}if(year===-1){year=new Date().getFullYear();}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100);}}if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}month++;day-=dim;}while(true);}date=this._daylightSavingAdjust(new Date(year,month-1,day));
if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);
break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getFullYear()%100<10?"0":"")+date.getFullYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}break;default:output+=format.charAt(iFormat);}}}}return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}break;default:chars+=format.charAt(iFormat);}}}return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}inst.selectedDay=date.getDate();
inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}matches=pattern.exec(offset);}return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);
if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");
return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).on(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);
while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);
currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";
cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}calender+="'>";}calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);
otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}calender+=tbody+"</tr>";}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");
group+=calender;}html+=group;}html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}monthHtml+="</select>";}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));
year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.selectedYear+(period==="Y"?offset:0),month=inst.selectedMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));
},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};
},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.on("mouseout",selector,function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).on("mouseover",selector,datepicker_handleMouseover);}function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}return target;}$.fn.datepicker=function(options){if(!this.length){return this;
}if(!$.datepicker.initialized){$(document).on("mousedown",$.datepicker._checkExternalClick);$.datepicker.initialized=true;}if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.12.1";var widgetsDatepicker=$.datepicker;(function(d,p){function u(){return ++v;}function w(){return ++x;}var v=0,x=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true);},_setOption:function(b,e){if(b=="selected"){this.options.collapsible&&e==this.options.selected||this.select(e);}else{this.options[b]=e;this._tabify();}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+u();
},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:");},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+w());return d.cookie.apply(null,[b].concat(d.makeArray(arguments)));},_ui:function(b,e){return{tab:b,panel:e,index:this.anchors.index(b)};},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=d(this);b.html(b.data("label.tabs")).removeData("label.tabs");});},_tabify:function(b){function e(g,f){g.css("display","");!d.support.opacity&&f.opacity&&g[0].style.removeAttribute("filter");}var a=this,c=this.options,h=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0];});this.panels=d([]);this.anchors.each(function(g,f){var i=d(f).attr("href"),l=i.split("#")[0],q;if(l&&(l===location.toString().split("#")[0]||(q=d("base")[0])&&l===q.href)){i=f.hash;f.href=i;}if(h.test(i)){a.panels=a.panels.add(a.element.find(a._sanitizeSelector(i)));}else{if(i&&i!=="#"){d.data(f,"href.tabs",i);d.data(f,"load.tabs",i.replace(/#.*$/,""));i=a._tabId(f);f.href="#"+i;f=a.element.find("#"+i);if(!f.length){f=d(c.panelTemplate).attr("id",i).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[g-1]||a.list);f.data("destroy.tabs",true);}a.panels=a.panels.add(f);}else{c.disabled.push(g);}}});if(b){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");
this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(c.selected===p){location.hash&&this.anchors.each(function(g,f){if(f.hash==location.hash){c.selected=g;return false;}});if(typeof c.selected!=="number"&&c.cookie){c.selected=parseInt(a._cookie(),10);}if(typeof c.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));}c.selected=c.selected||(this.lis.length?0:-1);}else{if(c.selected===null){c.selected=-1;}}c.selected=c.selected>=0&&this.anchors[c.selected]||c.selected<0?c.selected:0;c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(g){return a.lis.index(g);}))).sort();d.inArray(c.selected,c.disabled)!=-1&&c.disabled.splice(d.inArray(c.selected,c.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(c.selected>=0&&this.anchors.length){a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active");a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[c.selected],a.element.find(a._sanitizeSelector(a.anchors[c.selected].hash))[0]));});this.load(c.selected);}d(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs");a.lis=a.anchors=a.panels=null;});}else{c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));}this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);
b=0;for(var j;j=this.lis[b];b++){d(j)[d.inArray(b,c.disabled)!=-1&&!d(j).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");}c.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(c.event!=="mouseover"){var k=function(g,f){f.is(":not(.ui-state-disabled)")&&f.addClass("ui-state-"+g);},n=function(g,f){f.removeClass("ui-state-"+g);};this.lis.bind("mouseover.tabs",function(){k("hover",d(this));});this.lis.bind("mouseout.tabs",function(){n("hover",d(this));});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"));});this.anchors.bind("blur.tabs",function(){n("focus",d(this).closest("li"));});}var m,o;if(c.fx){if(d.isArray(c.fx)){m=c.fx[0];o=c.fx[1];}else{m=o=c.fx;}}var r=o?function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.hide().removeClass("ui-tabs-hide").animate(o,o.duration||"normal",function(){e(f,o);a._trigger("show",null,a._ui(g,f[0]));});}:function(g,f){d(g).closest("li").addClass("ui-tabs-selected ui-state-active");f.removeClass("ui-tabs-hide");a._trigger("show",null,a._ui(g,f[0]));},s=m?function(g,f){f.animate(m,m.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");e(f,m);a.element.dequeue("tabs");});}:function(g,f){a.lis.removeClass("ui-tabs-selected ui-state-active");f.addClass("ui-tabs-hide");a.element.dequeue("tabs");};this.anchors.bind(c.event+".tabs",function(){var g=this,f=d(g).closest("li"),i=a.panels.filter(":not(.ui-tabs-hide)"),l=a.element.find(a._sanitizeSelector(g.hash));if(f.hasClass("ui-tabs-selected")&&!c.collapsible||f.hasClass("ui-state-disabled")||f.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,l[0]))===false){this.blur();
return false;}c.selected=a.anchors.index(this);a.abort();if(c.collapsible){if(f.hasClass("ui-tabs-selected")){c.selected=-1;c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){s(g,i);}).dequeue("tabs");this.blur();return false;}else{if(!i.length){c.cookie&&a._cookie(c.selected,c.cookie);a.element.queue("tabs",function(){r(g,l);});a.load(a.anchors.index(this));this.blur();return false;}}}c.cookie&&a._cookie(c.selected,c.cookie);if(l.length){i.length&&a.element.queue("tabs",function(){s(g,i);});a.element.queue("tabs",function(){r(g,l);});a.load(a.anchors.index(this));}else{throw"jQuery UI Tabs: Mismatching fragment identifier.";}d.browser.msie&&this.blur();});this.anchors.bind("click.tabs",function(){return false;});},_getIndex:function(b){if(typeof b=="string"){b=this.anchors.index(this.anchors.filter("[href$="+b+"]"));}return b;},destroy:function(){var b=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var e=d.data(this,"href.tabs");if(e){this.href=e;}var a=d(this).unbind(".tabs");d.each(["href","load","cache"],function(c,h){a.removeData(h+".tabs");});});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");
});b.cookie&&this._cookie(null,b.cookie);return this;},add:function(b,e,a){if(a===p){a=this.anchors.length;}var c=this,h=this.options;e=d(h.tabTemplate.replace(/#\{href\}/g,b).replace(/#\{label\}/g,e));b=!b.indexOf("#")?b.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=c.element.find("#"+b);j.length||(j=d(h.panelTemplate).attr("id",b).data("destroy.tabs",true));j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(a>=this.lis.length){e.appendTo(this.list);j.appendTo(this.list[0].parentNode);}else{e.insertBefore(this.lis[a]);j.insertBefore(this.panels[a]);}h.disabled=d.map(h.disabled,function(k){return k>=a?++k:k;});this._tabify();if(this.anchors.length==1){h.selected=0;e.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]));});this.load(0);}this._trigger("add",null,this._ui(this.anchors[a],this.panels[a]));return this;},remove:function(b){b=this._getIndex(b);var e=this.options,a=this.lis.eq(b).remove(),c=this.panels.eq(b).remove();if(a.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(b+(b+1<this.anchors.length?1:-1));}e.disabled=d.map(d.grep(e.disabled,function(h){return h!=b;}),function(h){return h>=b?--h:h;});this._tabify();this._trigger("remove",null,this._ui(a.find("a")[0],c[0]));return this;},enable:function(b){b=this._getIndex(b);var e=this.options;if(d.inArray(b,e.disabled)!=-1){this.lis.eq(b).removeClass("ui-state-disabled");e.disabled=d.grep(e.disabled,function(a){return a!=b;
});this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]));return this;}},disable:function(b){b=this._getIndex(b);var e=this.options;if(b!=e.selected){this.lis.eq(b).addClass("ui-state-disabled");e.disabled.push(b);e.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]));}return this;},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected;}else{return this;}}this.anchors.eq(b).trigger(this.options.event+".tabs");return this;},load:function(b){b=this._getIndex(b);var e=this,a=this.options,c=this.anchors.eq(b)[0],h=d.data(c,"load.tabs");this.abort();if(!h||this.element.queue("tabs").length!==0&&d.data(c,"cache.tabs")){this.element.dequeue("tabs");}else{this.lis.eq(b).addClass("ui-state-processing");if(a.spinner){var j=d("span",c);j.data("label.tabs",j.html()).html(a.spinner);}this.xhr=d.ajax(d.extend({},a.ajaxOptions,{url:h,success:function(k,n){e.element.find(e._sanitizeSelector(c.hash)).html(k);e._cleanup();a.cache&&d.data(c,"cache.tabs",true);e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.success(k,n);}catch(m){}},error:function(k,n){e._cleanup();e._trigger("load",null,e._ui(e.anchors[b],e.panels[b]));try{a.ajaxOptions.error(k,n,b,c);}catch(m){}}}));e.element.dequeue("tabs");return this;}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr;}this._cleanup();return this;},url:function(b,e){this.anchors.eq(b).removeData("cache.tabs").data("load.tabs",e);
return this;},length:function(){return this.anchors.length;}});d.extend(d.ui.tabs,{version:"1.8.15"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(b,e){var a=this,c=this.options,h=a._rotate||(a._rotate=function(j){clearTimeout(a.rotation);a.rotation=setTimeout(function(){var k=c.selected;a.select(++k<a.anchors.length?k:0);},b);j&&j.stopPropagation();});e=a._unrotate||(a._unrotate=!e?function(j){j.clientX&&a.rotate(null);}:function(){t=c.selected;h();});if(b){this.element.bind("tabsshow",h);this.anchors.bind(c.event+".tabs",e);h();}else{clearTimeout(a.rotation);this.element.unbind("tabsshow",h);this.anchors.unbind(c.event+".tabs",e);delete this._rotate;delete this._unrotate;}return this;}});})(jQuery);}));(function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image(),imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingTimer,loadingFrame=1,titleHeight=0,titleStr="",start_pos,final_pos,busy=false,fx=$.extend($("<div/>")[0],{prop:0}),isIE6=$.browser.msie&&$.browser.version<7&&!window.XMLHttpRequest,_abort=function(){loading.hide();imgPreloader.onerror=imgPreloader.onload=null;if(ajaxLoader){ajaxLoader.abort();}tmp.empty();},_error=function(){if(false===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)){loading.hide();busy=false;return;}selectedOpts.titleShow=false;selectedOpts.width="auto";selectedOpts.height="auto";tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline();},_start=function(){var obj=selectedArray[selectedIndex],href,type,title,str,emb,ret;_abort();selectedOpts=$.extend({},$.fn.fancybox.defaults,(typeof $(obj).data("fancybox")=="undefined"?selectedOpts:$(obj).data("fancybox")));ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts);if(ret===false){busy=false;return;}else{if(typeof ret=="object"){selectedOpts=$.extend(selectedOpts,ret);}}title=selectedOpts.title||(obj.nodeName?$(obj).attr("title"):obj.title)||"";if(obj.nodeName&&!selectedOpts.orig){selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj);}if(title===""&&selectedOpts.orig&&selectedOpts.titleFromAlt){title=selectedOpts.orig.attr("alt");
}href=selectedOpts.href||(obj.nodeName?$(obj).attr("href"):obj.href)||null;if((/^(?:javascript)/i).test(href)||href=="#"){href=null;}if(selectedOpts.type){type=selectedOpts.type;if(!href){href=selectedOpts.content;}}else{if(selectedOpts.content){type="html";}else{if(href){if(href.match(imgRegExp)){type="image";}else{if(href.match(swfRegExp)){type="swf";}else{if($(obj).hasClass("iframe")){type="iframe";}else{if(href.indexOf("#")===0){type="inline";}else{type="ajax";}}}}}}}if(!type){_error();return;}if(type=="inline"){obj=href.substr(href.indexOf("#"));type=$(obj).length>0?"inline":"ajax";}selectedOpts.type=type;selectedOpts.href=href;selectedOpts.title=title;if(selectedOpts.autoDimensions){if(selectedOpts.type=="html"||selectedOpts.type=="inline"||selectedOpts.type=="ajax"){selectedOpts.width="auto";selectedOpts.height="auto";}else{selectedOpts.autoDimensions=false;}}if(selectedOpts.modal){selectedOpts.overlayShow=true;selectedOpts.hideOnOverlayClick=false;selectedOpts.hideOnContentClick=false;selectedOpts.enableEscapeButton=false;selectedOpts.showCloseButton=false;}selectedOpts.padding=parseInt(selectedOpts.padding,10);selectedOpts.margin=parseInt(selectedOpts.margin,10);tmp.css("padding",(selectedOpts.padding+selectedOpts.margin));$(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){$(this).replaceWith(content.children());});switch(type){case"html":tmp.html(selectedOpts.content);_process_inline();break;case"inline":if($(obj).parent().is("#fancybox-content")===true){busy=false;return;}$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind("fancybox-cleanup",function(){$(this).replaceWith(content.children());
}).bind("fancybox-cancel",function(){$(this).replaceWith(tmp.children());});$(obj).appendTo(tmp);_process_inline();break;case"image":busy=false;$.fancybox.showActivity();imgPreloader=new Image();imgPreloader.onerror=function(){_error();};imgPreloader.onload=function(){busy=true;imgPreloader.onerror=imgPreloader.onload=null;_process_image();};imgPreloader.src=href;break;case"swf":selectedOpts.scrolling="no";str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>';emb="";$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>';emb+=" "+name+'="'+val+'"';});str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+"></embed></object>";tmp.html(str);_process_inline();break;case"ajax":busy=false;$.fancybox.showActivity();selectedOpts.ajax.win=selectedOpts.ajax.success;ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status>0){_error();}},success:function(data,textStatus,XMLHttpRequest){var o=typeof XMLHttpRequest=="object"?XMLHttpRequest:ajaxLoader;if(o.status==200){if(typeof selectedOpts.ajax.win=="function"){ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest);if(ret===false){loading.hide();return;}else{if(typeof ret=="string"||typeof ret=="object"){data=ret;}}}tmp.html(data);_process_inline();}}}));break;case"iframe":_show();
break;}},_process_inline=function(){var w=selectedOpts.width,h=selectedOpts.height;if(w.toString().indexOf("%")>-1){w=parseInt(($(window).width()-(selectedOpts.margin*2))*parseFloat(w)/100,10)+"px";}else{w=w=="auto"?"auto":w+"px";}if(h.toString().indexOf("%")>-1){h=parseInt(($(window).height()-(selectedOpts.margin*2))*parseFloat(h)/100,10)+"px";}else{h=h=="auto"?"auto":h+"px";}tmp.wrapInner('<div style="width:'+w+";height:"+h+";overflow: "+(selectedOpts.scrolling=="auto"?"auto":(selectedOpts.scrolling=="yes"?"scroll":"hidden"))+';position:relative;"></div>');selectedOpts.width=tmp.width();selectedOpts.height=tmp.height();_show();},_process_image=function(){selectedOpts.width=imgPreloader.width;selectedOpts.height=imgPreloader.height;$("<img />").attr({"id":"fancybox-img","src":imgPreloader.src,"alt":selectedOpts.title}).appendTo(tmp);_show();},_show=function(){var pos,equal;loading.hide();if(wrap.is(":visible")&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){$.event.trigger("fancybox-cancel");busy=false;return;}busy=true;$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind("keydown.fb");if(wrap.is(":visible")&&currentOpts.titlePosition!=="outside"){wrap.css("height",wrap.height());}currentArray=selectedArray;currentIndex=selectedIndex;currentOpts=selectedOpts;if(currentOpts.overlayShow){overlay.css({"background-color":currentOpts.overlayColor,"opacity":currentOpts.overlayOpacity,"cursor":currentOpts.hideOnOverlayClick?"pointer":"auto","height":($(document).height()-1)});if(!overlay.is(":visible")){if(isIE6){$("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden";
}).css({"visibility":"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit";});}overlay.show();}}else{overlay.hide();}final_pos=_get_zoom_to();_process_title();if(wrap.is(":visible")){$(close.add(nav_left).add(nav_right)).hide();pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};equal=(start_pos.width==final_pos.width&&start_pos.height==final_pos.height);content.fadeTo(currentOpts.changeFade,0.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish);};$.event.trigger("fancybox-change");content.empty().removeAttr("filter").css({"border-width":currentOpts.padding,"width":final_pos.width-currentOpts.padding*2,"height":selectedOpts.autoDimensions?"auto":final_pos.height-titleHeight-currentOpts.padding*2});if(equal){finish_resizing();}else{fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing});}});return;}wrap.removeAttr("style");content.css("border-width",currentOpts.padding);if(currentOpts.transitionIn=="elastic"){start_pos=_get_zoom_from();if(start_pos.width>100){start_pos.width=100;}content.html(tmp.contents());wrap.show();if(currentOpts.opacity){final_pos.opacity=0;}fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish});return;}if(currentOpts.titlePosition=="inside"&&titleHeight>0){title.show();}content.css({"width":final_pos.width-currentOpts.padding*2,"height":selectedOpts.autoDimensions?"auto":final_pos.height-titleHeight-currentOpts.padding*2}).html(tmp.contents());
wrap.css(final_pos).fadeIn(currentOpts.transitionIn=="none"?0:currentOpts.speedIn,_finish);},_format_title=function(title){if(title&&title.length){if(currentOpts.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>';}return'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+"</div>";}return false;},_process_title=function(){titleStr=currentOpts.title||"";titleHeight=0;title.empty().removeAttr("style").removeClass();if(currentOpts.titleShow===false){title.hide();return;}titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr);if(!titleStr||titleStr===""){title.hide();return;}title.addClass("fancybox-title-"+currentOpts.titlePosition).html(titleStr).appendTo("body").show();switch(currentOpts.titlePosition){case"inside":title.css({"width":final_pos.width-(currentOpts.padding*2),"marginLeft":currentOpts.padding,"marginRight":currentOpts.padding});titleHeight=title.outerHeight(true);title.appendTo(outer);final_pos.height+=titleHeight;break;case"over":title.css({"marginLeft":currentOpts.padding,"width":final_pos.width-(currentOpts.padding*2),"bottom":currentOpts.padding}).appendTo(outer);break;case"float":title.css("left",parseInt((title.width()-final_pos.width-40)/2,10)*-1).appendTo(wrap);break;default:title.css({"width":final_pos.width-(currentOpts.padding*2),"paddingLeft":currentOpts.padding,"paddingRight":currentOpts.padding}).appendTo(wrap);
break;}title.hide();},_set_navigation=function(){if(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav){$(document).bind("keydown.fb",function(e){if(e.keyCode==27&&currentOpts.enableEscapeButton){e.preventDefault();$.fancybox.close();}else{if((e.keyCode==37||e.keyCode==39)&&currentOpts.enableKeyboardNav&&e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"&&e.target.tagName!=="SELECT"){e.preventDefault();$.fancybox[e.keyCode==37?"prev":"next"]();}}});}if(!currentOpts.showNavArrows){nav_left.hide();nav_right.hide();return;}if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!==0){nav_left.show();}if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!=(currentArray.length-1)){nav_right.show();}},_finish=function(){if(!$.support.opacity){content.get(0).style.removeAttribute("filter");wrap.get(0).style.removeAttribute("filter");}if(selectedOpts.autoDimensions){content.css("height","auto");}wrap.css("height","auto");if(titleStr&&titleStr.length){title.show();}if(currentOpts.showCloseButton){close.show();}_set_navigation();if(currentOpts.hideOnContentClick){content.bind("click",$.fancybox.close);}if(currentOpts.hideOnOverlayClick){overlay.bind("click",$.fancybox.close);}$(window).bind("resize.fb",$.fancybox.resize);if(currentOpts.centerOnScroll){$(window).bind("scroll.fb",$.fancybox.center);}if(currentOpts.type=="iframe"){$('<iframe id="fancybox-frame" title="'+selectedOpts.titleName+'" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+($.browser.msie?'allowtransparency="true""':"")+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content);
}wrap.show();busy=false;$.fancybox.center();currentOpts.onComplete(currentArray,currentIndex,currentOpts);_preload_images();},_preload_images=function(){var href,objNext;if((currentArray.length-1)>currentIndex){href=currentArray[currentIndex+1].href;if(typeof href!=="undefined"&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}if(currentIndex>0){href=currentArray[currentIndex-1].href;if(typeof href!=="undefined"&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};if(typeof final_pos.opacity!=="undefined"){dim.opacity=pos<0.5?0.5:pos;}wrap.css(dim);content.css({"width":dim.width-currentOpts.padding*2,"height":dim.height-(titleHeight*pos)-currentOpts.padding*2});},_get_viewport=function(){return[$(window).width()-(currentOpts.margin*2),$(window).height()-(currentOpts.margin*2),$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin];},_get_zoom_to=function(){var view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=currentOpts.padding*2,ratio;if(currentOpts.width.toString().indexOf("%")>-1){to.width=parseInt((view[0]*parseFloat(currentOpts.width))/100,10);}else{to.width=currentOpts.width+double_padding;}if(currentOpts.height.toString().indexOf("%")>-1){to.height=parseInt((view[1]*parseFloat(currentOpts.height))/100,10);
}else{to.height=currentOpts.height+double_padding;}if(resize&&(to.width>view[0]||to.height>view[1])){if(selectedOpts.type=="image"||selectedOpts.type=="swf"){ratio=(currentOpts.width)/(currentOpts.height);if((to.width)>view[0]){to.width=view[0];to.height=parseInt(((to.width-double_padding)/ratio)+double_padding,10);}if((to.height)>view[1]){to.height=view[1];to.width=parseInt(((to.height-double_padding)*ratio)+double_padding,10);}}else{to.width=Math.min(to.width,view[0]);to.height=Math.min(to.height,view[1]);}}to.top=parseInt(Math.max(view[3]-20,view[3]+((view[1]-to.height-40)*0.5)),10);to.left=parseInt(Math.max(view[2]-20,view[2]+((view[0]-to.width-40)*0.5)),10);return to;},_get_obj_pos=function(obj){var pos=obj.offset();pos.top+=parseInt(obj.css("paddingTop"),10)||0;pos.left+=parseInt(obj.css("paddingLeft"),10)||0;pos.top+=parseInt(obj.css("border-top-width"),10)||0;pos.left+=parseInt(obj.css("border-left-width"),10)||0;pos.width=obj.width();pos.height=obj.height();return pos;},_get_zoom_from=function(){var orig=selectedOpts.orig?$(selectedOpts.orig):false,from={},pos,view;if(orig&&orig.length){pos=_get_obj_pos(orig);from={width:pos.width+(currentOpts.padding*2),height:pos.height+(currentOpts.padding*2),top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20};}else{view=_get_viewport();from={width:currentOpts.padding*2,height:currentOpts.padding*2,top:parseInt(view[3]+view[1]*0.5,10),left:parseInt(view[2]+view[0]*0.5,10)};}return from;},_animate_loading=function(){if(!loading.is(":visible")){clearInterval(loadingTimer);return;}$("div",loading).css("top",(loadingFrame*-40)+"px");
loadingFrame=(loadingFrame+1)%12;};$.fn.fancybox=function(options){if(!$(this).length){return this;}$(this).data("fancybox",$.extend({},options,($.metadata?$(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(e){e.preventDefault();if(busy){return;}busy=true;$(this).blur();selectedArray=[];selectedIndex=0;var rel=$(this).attr("rel")||"";if(!rel||rel==""||rel==="nofollow"){selectedArray.push(this);}else{selectedArray=$("a[rel="+rel+"], area[rel="+rel+"]");selectedIndex=selectedArray.index(this);}_start();return;});return this;};$.fancybox=function(obj){var opts;if(busy){return;}busy=true;opts=typeof arguments[1]!=="undefined"?arguments[1]:{};selectedArray=[];selectedIndex=parseInt(opts.index,10)||0;if($.isArray(obj)){for(var i=0,j=obj.length;i<j;i++){if(typeof obj[i]=="object"){$(obj[i]).data("fancybox",$.extend({},opts,obj[i]));}else{obj[i]=$({}).data("fancybox",$.extend({content:obj[i]},opts));}}selectedArray=jQuery.merge(selectedArray,obj);}else{if(typeof obj=="object"){$(obj).data("fancybox",$.extend({},opts,obj));}else{obj=$({}).data("fancybox",$.extend({content:obj},opts));}selectedArray.push(obj);}if(selectedIndex>selectedArray.length||selectedIndex<0){selectedIndex=0;}_start();};$.fancybox.showActivity=function(){clearInterval(loadingTimer);loading.show();loadingTimer=setInterval(_animate_loading,66);};$.fancybox.hideActivity=function(){loading.hide();};$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1);};$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1);};$.fancybox.pos=function(pos){if(busy){return;}pos=parseInt(pos);selectedArray=currentArray;
if(pos>-1&&pos<currentArray.length){selectedIndex=pos;_start();}else{if(currentOpts.cyclic&&currentArray.length>1){selectedIndex=pos>=currentArray.length?0:currentArray.length-1;_start();}}return;};$.fancybox.cancel=function(){if(busy){return;}busy=true;$.event.trigger("fancybox-cancel");_abort();selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts);busy=false;};$.fancybox.close=function(e){if(busy||wrap.is(":hidden")){return;}busy=true;if(currentOpts&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){busy=false;return;}if(e){e.preventDefault();}_abort();$(close.add(nav_left).add(nav_right)).hide();$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind("keydown.fb");content.find("iframe").attr("src",isIE6&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(currentOpts.titlePosition!=="inside"){title.empty();}wrap.stop();function _cleanup(){overlay.fadeOut("fast");title.empty().hide();wrap.hide();$.event.trigger("fancybox-cleanup");content.empty();currentOpts.onClosed(currentArray,currentIndex,currentOpts);currentArray=selectedOpts=[];currentIndex=selectedIndex=0;currentOpts=selectedOpts={};busy=false;}if(currentOpts.transitionOut=="elastic"){start_pos=_get_zoom_from();if(start_pos.width>100){start_pos.width=100;}var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};if(currentOpts.opacity){final_pos.opacity=1;}title.empty().hide();fx.prop=1;$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup});
}else{wrap.fadeOut(currentOpts.transitionOut=="none"?0:currentOpts.speedOut,_cleanup);}};$.fancybox.resize=function(){if(overlay.is(":visible")){overlay.css("height",$(document).height());}$.fancybox.center(true);};$.fancybox.center=function(){var view,align;if(busy){return;}align=arguments[0]===true?1:0;view=_get_viewport();if(!align&&(wrap.width()>view[0]||wrap.height()>view[1])){return;}wrap.stop().animate({"top":parseInt(Math.max(view[3]-20,view[3]+((view[1]-content.height()-40)*0.5)-currentOpts.padding)),"left":parseInt(Math.max(view[2]-20,view[2]+((view[0]-content.width()-40)*0.5)-currentOpts.padding))},typeof arguments[0]=="number"?arguments[0]:200);};$.fancybox.init=function(){if($("#fancybox-wrap").length&&loading){return;}$("body").append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>'));outer=$('<div id="fancybox-outer"></div>').appendTo(wrap);outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close" tabindex="0" href="#"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));close.click($.fancybox.close);loading.click($.fancybox.cancel);nav_left.click(function(e){e.preventDefault();$.fancybox.prev();});nav_right.click(function(e){e.preventDefault();$.fancybox.next();});if($.fn.mousewheel){wrap.bind("mousewheel.fb",function(e,delta){if(busy){e.preventDefault();
}else{if($(e.target).get(0).clientHeight==0||$(e.target).get(0).scrollHeight===$(e.target).get(0).clientHeight){e.preventDefault();$.fancybox[delta>0?"prev":"next"]();}}});}if(!$.support.opacity){wrap.addClass("fancybox-ie");}if(isIE6){loading.addClass("fancybox-ie6");wrap.addClass("fancybox-ie6");$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer);}};$.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.5,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:150,speedOut:150,changeSpeed:200,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};$(document).ready(function(){$.fancybox.init();});})(jQuery);/*
 * Select2 4.0.13
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{if(typeof module==="object"&&module.exports){module.exports=function(root,jQuery){if(jQuery===undefined){if(typeof window!=="undefined"){jQuery=require("jquery");}else{jQuery=require("jquery")(root);}}factory(jQuery);return jQuery;};}else{factory(jQuery);}}}(function(jQuery){var S2=(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var S2=jQuery.fn.select2.amd;}var S2;(function(){if(!S2||!S2.requirejs){if(!S2){S2={};}else{require=S2;}var requirejs,require,define;(function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop);}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,normalizedBaseParts,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=(map&&map["*"])||{};if(name){name=name.split("/");lastIndex=name.length-1;if(config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"");}if(name[0].charAt(0)==="."&&baseParts){normalizedBaseParts=baseParts.slice(0,baseParts.length-1);name=normalizedBaseParts.concat(name);}for(i=0;i<name.length;i++){part=name[i];if(part==="."){name.splice(i,1);i-=1;}else{if(part===".."){if(i===0||(i===1&&name[2]==="..")||name[i-1]===".."){continue;
}else{if(i>0){name.splice(i-1,2);i-=2;}}}}}name=name.join("/");}if((baseParts||starMap)&&map){nameParts=name.split("/");for(i=nameParts.length;i>0;i-=1){nameSegment=nameParts.slice(0,i).join("/");if(baseParts){for(j=baseParts.length;j>0;j-=1){mapValue=map[baseParts.slice(0,j).join("/")];if(mapValue){mapValue=mapValue[nameSegment];if(mapValue){foundMap=mapValue;foundI=i;break;}}}}if(foundMap){break;}if(!foundStarMap&&starMap&&starMap[nameSegment]){foundStarMap=starMap[nameSegment];starI=i;}}if(!foundMap&&foundStarMap){foundMap=foundStarMap;foundI=starI;}if(foundMap){nameParts.splice(0,foundI,foundMap);name=nameParts.join("/");}}return name;}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);if(typeof args[0]!=="string"&&args.length===1){args.push(null);}return req.apply(undef,args.concat([relName,forceSync]));};}function makeNormalize(relName){return function(name){return normalize(name,relName);};}function makeLoad(depName){return function(value){defined[depName]=value;};}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name];defining[name]=true;main.apply(undef,args);}if(!hasProp(defined,name)&&!hasProp(defining,name)){throw new Error("No "+name);}return defined[name];}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;if(index>-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length);}return[prefix,name];}function makeRelParts(relName){return relName?splitPrefix(relName):[];}makeMap=function(name,relParts){var plugin,parts=splitPrefix(name),prefix=parts[0],relResourceName=relParts[1];
name=parts[1];if(prefix){prefix=normalize(prefix,relResourceName);plugin=callDep(prefix);}if(prefix){if(plugin&&plugin.normalize){name=plugin.normalize(name,makeNormalize(relResourceName));}else{name=normalize(name,relResourceName);}}else{name=normalize(name,relResourceName);parts=splitPrefix(name);prefix=parts[0];name=parts[1];if(prefix){plugin=callDep(prefix);}}return{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin};};function makeConfig(name){return function(){return(config&&config.config&&config.config[name])||{};};}handlers={require:function(name){return makeRequire(name);},exports:function(name){var e=defined[name];if(typeof e!=="undefined"){return e;}else{return(defined[name]={});}},module:function(name){return{id:name,uri:"",exports:defined[name],config:makeConfig(name)};}};main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,relParts,args=[],callbackType=typeof callback,usingExports;relName=relName||name;relParts=makeRelParts(relName);if(callbackType==="undefined"||callbackType==="function"){deps=!deps.length&&callback.length?["require","exports","module"]:deps;for(i=0;i<deps.length;i+=1){map=makeMap(deps[i],relParts);depName=map.f;if(depName==="require"){args[i]=handlers.require(name);}else{if(depName==="exports"){args[i]=handlers.exports(name);usingExports=true;}else{if(depName==="module"){cjsModule=args[i]=handlers.module(name);}else{if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName)){args[i]=callDep(depName);}else{if(map.p){map.p.load(map.n,makeRequire(relName,true),makeLoad(depName),{});args[i]=defined[depName];
}else{throw new Error(name+" missing "+depName);}}}}}}ret=callback?callback.apply(defined[name],args):undefined;if(name){if(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]){defined[name]=cjsModule.exports;}else{if(ret!==undef||!usingExports){defined[name]=ret;}}}}else{if(name){defined[name]=callback;}}};requirejs=require=req=function(deps,callback,relName,forceSync,alt){if(typeof deps==="string"){if(handlers[deps]){return handlers[deps](callback);}return callDep(makeMap(deps,makeRelParts(callback)).f);}else{if(!deps.splice){config=deps;if(config.deps){req(config.deps,config.callback);}if(!callback){return;}if(callback.splice){deps=callback;callback=relName;relName=null;}else{deps=undef;}}}callback=callback||function(){};if(typeof relName==="function"){relName=forceSync;forceSync=alt;}if(forceSync){main(undef,deps,callback,relName);}else{setTimeout(function(){main(undef,deps,callback,relName);},4);}return req;};req.config=function(cfg){return req(cfg);};requirejs._defined=defined;define=function(name,deps,callback){if(typeof name!=="string"){throw new Error("See almond README: incorrect module build, no module name");}if(!deps.splice){callback=deps;deps=[];}if(!hasProp(defined,name)&&!hasProp(waiting,name)){waiting[name]=[name,deps,callback];}};define.amd={jQuery:true};}());S2.requirejs=requirejs;S2.require=require;S2.define=define;}}());S2.define("almond",function(){});S2.define("jquery",[],function(){var _$=jQuery||$;if(_$==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.");
}return _$;});S2.define("select2/utils",["jquery"],function($){var Utils={};Utils.Extend=function(ChildClass,SuperClass){var __hasProp={}.hasOwnProperty;function BaseConstructor(){this.constructor=ChildClass;}for(var key in SuperClass){if(__hasProp.call(SuperClass,key)){ChildClass[key]=SuperClass[key];}}BaseConstructor.prototype=SuperClass.prototype;ChildClass.prototype=new BaseConstructor();ChildClass.__super__=SuperClass.prototype;return ChildClass;};function getMethods(theClass){var proto=theClass.prototype;var methods=[];for(var methodName in proto){var m=proto[methodName];if(typeof m!=="function"){continue;}if(methodName==="constructor"){continue;}methods.push(methodName);}return methods;}Utils.Decorate=function(SuperClass,DecoratorClass){var decoratedMethods=getMethods(DecoratorClass);var superMethods=getMethods(SuperClass);function DecoratedClass(){var unshift=Array.prototype.unshift;var argCount=DecoratorClass.prototype.constructor.length;var calledConstructor=SuperClass.prototype.constructor;if(argCount>0){unshift.call(arguments,SuperClass.prototype.constructor);calledConstructor=DecoratorClass.prototype.constructor;}calledConstructor.apply(this,arguments);}DecoratorClass.displayName=SuperClass.displayName;function ctr(){this.constructor=DecoratedClass;}DecoratedClass.prototype=new ctr();for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod];}var calledMethod=function(methodName){var originalMethod=function(){};if(methodName in DecoratedClass.prototype){originalMethod=DecoratedClass.prototype[methodName];
}var decoratedMethod=DecoratorClass.prototype[methodName];return function(){var unshift=Array.prototype.unshift;unshift.call(arguments,originalMethod);return decoratedMethod.apply(this,arguments);};};for(var d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod);}return DecoratedClass;};var Observable=function(){this.listeners={};};Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{};if(event in this.listeners){this.listeners[event].push(callback);}else{this.listeners[event]=[callback];}};Observable.prototype.trigger=function(event){var slice=Array.prototype.slice;var params=slice.call(arguments,1);this.listeners=this.listeners||{};if(params==null){params=[];}if(params.length===0){params.push({});}params[0]._type=event;if(event in this.listeners){this.invoke(this.listeners[event],slice.call(arguments,1));}if("*" in this.listeners){this.invoke(this.listeners["*"],arguments);}};Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;i<len;i++){listeners[i].apply(this,params);}};Utils.Observable=Observable;Utils.generateChars=function(length){var chars="";for(var i=0;i<length;i++){var randomChar=Math.floor(Math.random()*36);chars+=randomChar.toString(36);}return chars;};Utils.bind=function(func,context){return function(){func.apply(context,arguments);};};Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split("-");var dataLevel=data;if(keys.length===1){continue;}for(var k=0;k<keys.length;k++){var key=keys[k];
key=key.substring(0,1).toLowerCase()+key.substring(1);if(!(key in dataLevel)){dataLevel[key]={};}if(k==keys.length-1){dataLevel[key]=data[originalKey];}dataLevel=dataLevel[key];}delete data[originalKey];}return data;};Utils.hasScroll=function(index,el){var $el=$(el);var overflowX=el.style.overflowX;var overflowY=el.style.overflowY;if(overflowX===overflowY&&(overflowY==="hidden"||overflowY==="visible")){return false;}if(overflowX==="scroll"||overflowY==="scroll"){return true;}return($el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth);};Utils.escapeMarkup=function(markup){var replaceMap={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof markup!=="string"){return markup;}return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match];});};Utils.appendMany=function($element,$nodes){if($.fn.jquery.substr(0,3)==="1.7"){var $jqNodes=$();$.map($nodes,function(node){$jqNodes=$jqNodes.add(node);});$nodes=$jqNodes;}$element.append($nodes);};Utils.__cache={};var id=0;Utils.GetUniqueElementId=function(element){var select2Id=element.getAttribute("data-select2-id");if(select2Id==null){if(element.id){select2Id=element.id;element.setAttribute("data-select2-id",select2Id);}else{element.setAttribute("data-select2-id",++id);select2Id=id.toString();}}return select2Id;};Utils.StoreData=function(element,name,value){var id=Utils.GetUniqueElementId(element);if(!Utils.__cache[id]){Utils.__cache[id]={};}Utils.__cache[id][name]=value;};Utils.GetData=function(element,name){var id=Utils.GetUniqueElementId(element);if(name){if(Utils.__cache[id]){if(Utils.__cache[id][name]!=null){return Utils.__cache[id][name];
}return $(element).data(name);}return $(element).data(name);}else{return Utils.__cache[id];}};Utils.RemoveData=function(element){var id=Utils.GetUniqueElementId(element);if(Utils.__cache[id]!=null){delete Utils.__cache[id];}element.removeAttribute("data-select2-id");};return Utils;});S2.define("select2/results",["jquery","./utils"],function($,Utils){function Results($element,options,dataAdapter){this.$element=$element;this.data=dataAdapter;this.options=options;Results.__super__.constructor.call(this);}Utils.Extend(Results,Utils.Observable);Results.prototype.render=function(){var $results=$('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){$results.attr("aria-multiselectable","true");}this.$results=$results;return $results;};Results.prototype.clear=function(){this.$results.empty();};Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get("escapeMarkup");this.clear();this.hideLoading();var $message=$('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var message=this.options.get("translations").get(params.message);$message.append(escapeMarkup(message(params.args)));$message[0].className+=" select2-results__message";this.$results.append($message);};Results.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove();};Results.prototype.append=function(data){this.hideLoading();var $options=[];if(data.results==null||data.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"});}return;}data.results=this.sort(data.results);
for(var d=0;d<data.results.length;d++){var item=data.results[d];var $option=this.option(item);$options.push($option);}this.$results.append($options);};Results.prototype.position=function($results,$dropdown){var $resultsContainer=$dropdown.find(".select2-results");$resultsContainer.append($results);};Results.prototype.sort=function(data){var sorter=this.options.get("sorter");return sorter(data);};Results.prototype.highlightFirstItem=function(){var $options=this.$results.find(".select2-results__option[aria-selected]");var $selected=$options.filter("[aria-selected=true]");if($selected.length>0){$selected.first().trigger("mouseenter");}else{$options.first().trigger("mouseenter");}this.ensureHighlightVisible();};Results.prototype.setClasses=function(){var self=this;this.data.current(function(selected){var selectedIds=$.map(selected,function(s){return s.id.toString();});var $options=self.$results.find(".select2-results__option[aria-selected]");$options.each(function(){var $option=$(this);var item=Utils.GetData(this,"data");var id=""+item.id;if((item.element!=null&&item.element.selected)||(item.element==null&&$.inArray(id,selectedIds)>-1)){$option.attr("aria-selected","true");}else{$option.attr("aria-selected","false");}});});};Results.prototype.showLoading=function(params){this.hideLoading();var loadingMore=this.options.get("translations").get("searching");var loading={disabled:true,loading:true,text:loadingMore(params)};var $loading=this.option(loading);$loading.className+=" loading-results";this.$results.prepend($loading);};Results.prototype.hideLoading=function(){this.$results.find(".loading-results").remove();
};Results.prototype.option=function(data){var option=document.createElement("li");option.className="select2-results__option";var attrs={"role":"option","aria-selected":"false"};var matches=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if((data.element!=null&&matches.call(data.element,":disabled"))||(data.element==null&&data.disabled)){delete attrs["aria-selected"];attrs["aria-disabled"]="true";}if(data.id==null){delete attrs["aria-selected"];}if(data._resultId!=null){option.id=data._resultId;}if(data.title){option.title=data.title;}if(data.children){attrs.role="group";attrs["aria-label"]=data.text;delete attrs["aria-selected"];}for(var attr in attrs){var val=attrs[attr];option.setAttribute(attr,val);}if(data.children){var $option=$(option);var label=document.createElement("strong");label.className="select2-results__group";var $label=$(label);this.template(data,label);var $children=[];for(var c=0;c<data.children.length;c++){var child=data.children[c];var $child=this.option(child);$children.push($child);}var $childrenContainer=$("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});$childrenContainer.append($children);$option.append(label);$option.append($childrenContainer);}else{this.template(data,option);}Utils.StoreData(option,"data",data);return option;};Results.prototype.bind=function(container,$container){var self=this;var id=container.id+"-results";this.$results.attr("id",id);container.on("results:all",function(params){self.clear();self.append(params.data);if(container.isOpen()){self.setClasses();
self.highlightFirstItem();}});container.on("results:append",function(params){self.append(params.data);if(container.isOpen()){self.setClasses();}});container.on("query",function(params){self.hideMessages();self.showLoading(params);});container.on("select",function(){if(!container.isOpen()){return;}self.setClasses();if(self.options.get("scrollAfterSelect")){self.highlightFirstItem();}});container.on("unselect",function(){if(!container.isOpen()){return;}self.setClasses();if(self.options.get("scrollAfterSelect")){self.highlightFirstItem();}});container.on("open",function(){self.$results.attr("aria-expanded","true");self.$results.attr("aria-hidden","false");self.setClasses();self.ensureHighlightVisible();});container.on("close",function(){self.$results.attr("aria-expanded","false");self.$results.attr("aria-hidden","true");self.$results.removeAttr("aria-activedescendant");});container.on("results:toggle",function(){var $highlighted=self.getHighlightedResults();if($highlighted.length===0){return;}$highlighted.trigger("mouseup");});container.on("results:select",function(){var $highlighted=self.getHighlightedResults();if($highlighted.length===0){return;}var data=Utils.GetData($highlighted[0],"data");if($highlighted.attr("aria-selected")=="true"){self.trigger("close",{});}else{self.trigger("select",{data:data});}});container.on("results:previous",function(){var $highlighted=self.getHighlightedResults();var $options=self.$results.find("[aria-selected]");var currentIndex=$options.index($highlighted);if(currentIndex<=0){return;}var nextIndex=currentIndex-1;if($highlighted.length===0){nextIndex=0;
}var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top;var nextTop=$next.offset().top;var nextOffset=self.$results.scrollTop()+(nextTop-currentOffset);if(nextIndex===0){self.$results.scrollTop(0);}else{if(nextTop-currentOffset<0){self.$results.scrollTop(nextOffset);}}});container.on("results:next",function(){var $highlighted=self.getHighlightedResults();var $options=self.$results.find("[aria-selected]");var currentIndex=$options.index($highlighted);var nextIndex=currentIndex+1;if(nextIndex>=$options.length){return;}var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top+self.$results.outerHeight(false);var nextBottom=$next.offset().top+$next.outerHeight(false);var nextOffset=self.$results.scrollTop()+nextBottom-currentOffset;if(nextIndex===0){self.$results.scrollTop(0);}else{if(nextBottom>currentOffset){self.$results.scrollTop(nextOffset);}}});container.on("results:focus",function(params){params.element.addClass("select2-results__option--highlighted");});container.on("results:message",function(params){self.displayMessage(params);});if($.fn.mousewheel){this.$results.on("mousewheel",function(e){var top=self.$results.scrollTop();var bottom=self.$results.get(0).scrollHeight-top+e.deltaY;var isAtTop=e.deltaY>0&&top-e.deltaY<=0;var isAtBottom=e.deltaY<0&&bottom<=self.$results.height();if(isAtTop){self.$results.scrollTop(0);e.preventDefault();e.stopPropagation();}else{if(isAtBottom){self.$results.scrollTop(self.$results.get(0).scrollHeight-self.$results.height());e.preventDefault();
e.stopPropagation();}}});}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(evt){var $this=$(this);var data=Utils.GetData(this,"data");if($this.attr("aria-selected")==="true"){if(self.options.get("multiple")){self.trigger("unselect",{originalEvent:evt,data:data});}else{self.trigger("close",{});}return;}self.trigger("select",{originalEvent:evt,data:data});});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(evt){var data=Utils.GetData(this,"data");self.getHighlightedResults().removeClass("select2-results__option--highlighted");self.trigger("results:focus",{data:data,element:$(this)});});};Results.prototype.getHighlightedResults=function(){var $highlighted=this.$results.find(".select2-results__option--highlighted");return $highlighted;};Results.prototype.destroy=function(){this.$results.remove();};Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if($highlighted.length===0){return;}var $options=this.$results.find("[aria-selected]");var currentIndex=$options.index($highlighted);var currentOffset=this.$results.offset().top;var nextTop=$highlighted.offset().top;var nextOffset=this.$results.scrollTop()+(nextTop-currentOffset);var offsetDelta=nextTop-currentOffset;nextOffset-=$highlighted.outerHeight(false)*2;if(currentIndex<=2){this.$results.scrollTop(0);}else{if(offsetDelta>this.$results.outerHeight()||offsetDelta<0){this.$results.scrollTop(nextOffset);}}};Results.prototype.template=function(result,container){var template=this.options.get("templateResult");var escapeMarkup=this.options.get("escapeMarkup");
var content=template(result,container);if(content==null){container.style.display="none";}else{if(typeof content==="string"){container.innerHTML=escapeMarkup(content);}else{$(container).append(content);}}};return Results;});S2.define("select2/keys",[],function(){var KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return KEYS;});S2.define("select2/selection/base",["jquery","../utils","../keys"],function($,Utils,KEYS){function BaseSelection($element,options){this.$element=$element;this.options=options;BaseSelection.__super__.constructor.call(this);}Utils.Extend(BaseSelection,Utils.Observable);BaseSelection.prototype.render=function(){var $selection=$('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(Utils.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=Utils.GetData(this.$element[0],"old-tabindex");}else{if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex");}}$selection.attr("title",this.$element.attr("title"));$selection.attr("aria-label",this.$element.attr("aria-label"));$selection.attr("tabindex",this._tabindex);$selection.attr("aria-disabled","false");this.$selection=$selection;return $selection;};BaseSelection.prototype.bind=function(container,$container){var self=this;var resultsId=container.id+"-results";this.container=container;this.$selection.on("focus",function(evt){self.trigger("focus",evt);});this.$selection.on("blur",function(evt){self._handleBlur(evt);
});this.$selection.on("keydown",function(evt){self.trigger("keypress",evt);if(evt.which===KEYS.SPACE){evt.preventDefault();}});container.on("results:focus",function(params){self.$selection.attr("aria-activedescendant",params.data._resultId);});container.on("selection:update",function(params){self.update(params.data);});container.on("open",function(){self.$selection.attr("aria-expanded","true");self.$selection.attr("aria-owns",resultsId);self._attachCloseHandler(container);});container.on("close",function(){self.$selection.attr("aria-expanded","false");self.$selection.removeAttr("aria-activedescendant");self.$selection.removeAttr("aria-owns");self._detachCloseHandler(container);});container.on("enable",function(){self.$selection.attr("tabindex",self._tabindex);self.$selection.attr("aria-disabled","false");});container.on("disable",function(){self.$selection.attr("tabindex","-1");self.$selection.attr("aria-disabled","true");});};BaseSelection.prototype._handleBlur=function(evt){var self=this;window.setTimeout(function(){if((document.activeElement==self.$selection[0])||($.contains(self.$selection[0],document.activeElement))){return;}self.trigger("blur",evt);},1);};BaseSelection.prototype._attachCloseHandler=function(container){$(document.body).on("mousedown.select2."+container.id,function(e){var $target=$(e.target);var $select=$target.closest(".select2");var $all=$(".select2.select2-container--open");$all.each(function(){if(this==$select[0]){return;}var $element=Utils.GetData(this,"element");$element.select2("close");});});};BaseSelection.prototype._detachCloseHandler=function(container){$(document.body).off("mousedown.select2."+container.id);
};BaseSelection.prototype.position=function($selection,$container){var $selectionContainer=$container.find(".selection");$selectionContainer.append($selection);};BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container);};BaseSelection.prototype.update=function(data){throw new Error("The `update` method must be defined in child classes.");};BaseSelection.prototype.isEnabled=function(){return !this.isDisabled();};BaseSelection.prototype.isDisabled=function(){return this.options.get("disabled");};return BaseSelection;});S2.define("select2/selection/single",["jquery","./base","../utils","../keys"],function($,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments);}Utils.Extend(SingleSelection,BaseSelection);SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);$selection.addClass("select2-selection--single");$selection.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return $selection;};SingleSelection.prototype.bind=function(container,$container){var self=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",id);this.$selection.on("mousedown",function(evt){if(evt.which!==1){return;}self.trigger("toggle",{originalEvent:evt});});this.$selection.on("focus",function(evt){});
this.$selection.on("blur",function(evt){});container.on("focus",function(evt){if(!container.isOpen()){self.$selection.trigger("focus");}});};SingleSelection.prototype.clear=function(){var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty();$rendered.removeAttr("title");};SingleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");var escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data,container));};SingleSelection.prototype.selectionContainer=function(){return $("<span></span>");};SingleSelection.prototype.update=function(data){if(data.length===0){this.clear();return;}var selection=data[0];var $rendered=this.$selection.find(".select2-selection__rendered");var formatted=this.display(selection,$rendered);$rendered.empty().append(formatted);var title=selection.title||selection.text;if(title){$rendered.attr("title",title);}else{$rendered.removeAttr("title");}};return SingleSelection;});S2.define("select2/selection/multiple",["jquery","./base","../utils"],function($,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments);}Utils.Extend(MultipleSelection,BaseSelection);MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);$selection.addClass("select2-selection--multiple");$selection.html('<ul class="select2-selection__rendered"></ul>');return $selection;};MultipleSelection.prototype.bind=function(container,$container){var self=this;MultipleSelection.__super__.bind.apply(this,arguments);
this.$selection.on("click",function(evt){self.trigger("toggle",{originalEvent:evt});});this.$selection.on("click",".select2-selection__choice__remove",function(evt){if(self.isDisabled()){return;}var $remove=$(this);var $selection=$remove.parent();var data=Utils.GetData($selection[0],"data");self.trigger("unselect",{originalEvent:evt,data:data});});};MultipleSelection.prototype.clear=function(){var $rendered=this.$selection.find(".select2-selection__rendered");$rendered.empty();$rendered.removeAttr("title");};MultipleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");var escapeMarkup=this.options.get("escapeMarkup");return escapeMarkup(template(data,container));};MultipleSelection.prototype.selectionContainer=function(){var $container=$('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return $container;};MultipleSelection.prototype.update=function(data){this.clear();if(data.length===0){return;}var $selections=[];for(var d=0;d<data.length;d++){var selection=data[d];var $selection=this.selectionContainer();var formatted=this.display(selection,$selection);$selection.append(formatted);var title=selection.title||selection.text;if(title){$selection.attr("title",title);}Utils.StoreData($selection[0],"data",selection);$selections.push($selection);}var $rendered=this.$selection.find(".select2-selection__rendered");Utils.appendMany($rendered,$selections);};return MultipleSelection;});S2.define("select2/selection/placeholder",["../utils"],function(Utils){function Placeholder(decorated,$element,options){this.placeholder=this.normalizePlaceholder(options.get("placeholder"));
decorated.call(this,$element,options);}Placeholder.prototype.normalizePlaceholder=function(_,placeholder){if(typeof placeholder==="string"){placeholder={id:"",text:placeholder};}return placeholder;};Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();$placeholder.html(this.display(placeholder));$placeholder.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return $placeholder;};Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=(data.length==1&&data[0].id!=this.placeholder.id);var multipleSelections=data.length>1;if(multipleSelections||singlePlaceholder){return decorated.call(this,data);}this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append($placeholder);};return Placeholder;});S2.define("select2/selection/allowClear",["jquery","../keys","../utils"],function($,KEYS,Utils){function AllowClear(){}AllowClear.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.");}}this.$selection.on("mousedown",".select2-selection__clear",function(evt){self._handleClear(evt);});container.on("keypress",function(evt){self._handleKeyboardClear(evt,container);});};AllowClear.prototype._handleClear=function(_,evt){if(this.isDisabled()){return;}var $clear=this.$selection.find(".select2-selection__clear");
if($clear.length===0){return;}evt.stopPropagation();var data=Utils.GetData($clear[0],"data");var previousVal=this.$element.val();this.$element.val(this.placeholder.id);var unselectData={data:data};this.trigger("clear",unselectData);if(unselectData.prevented){this.$element.val(previousVal);return;}for(var d=0;d<data.length;d++){unselectData={data:data[d]};this.trigger("unselect",unselectData);if(unselectData.prevented){this.$element.val(previousVal);return;}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{});};AllowClear.prototype._handleKeyboardClear=function(_,evt,container){if(container.isOpen()){return;}if(evt.which==KEYS.DELETE||evt.which==KEYS.BACKSPACE){this._handleClear(evt);}};AllowClear.prototype.update=function(decorated,data){decorated.call(this,data);if(this.$selection.find(".select2-selection__placeholder").length>0||data.length===0){return;}var removeAll=this.options.get("translations").get("removeAllItems");var $remove=$('<span class="select2-selection__clear" title="'+removeAll()+'">'+"&times;"+"</span>");Utils.StoreData($remove[0],"data",data);this.$selection.find(".select2-selection__rendered").prepend($remove);};return AllowClear;});S2.define("select2/selection/search",["jquery","../utils","../keys"],function($,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options);}Search.prototype.render=function(decorated){var $search=$('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</li>");
this.$searchContainer=$search;this.$search=$search.find("input");var $rendered=decorated.call(this);this._transferTabIndex();return $rendered;};Search.prototype.bind=function(decorated,container,$container){var self=this;var resultsId=container.id+"-results";decorated.call(this,container,$container);container.on("open",function(){self.$search.attr("aria-controls",resultsId);self.$search.trigger("focus");});container.on("close",function(){self.$search.val("");self.$search.removeAttr("aria-controls");self.$search.removeAttr("aria-activedescendant");self.$search.trigger("focus");});container.on("enable",function(){self.$search.prop("disabled",false);self._transferTabIndex();});container.on("disable",function(){self.$search.prop("disabled",true);});container.on("focus",function(evt){self.$search.trigger("focus");});container.on("results:focus",function(params){if(params.data._resultId){self.$search.attr("aria-activedescendant",params.data._resultId);}else{self.$search.removeAttr("aria-activedescendant");}});this.$selection.on("focusin",".select2-search--inline",function(evt){self.trigger("focus",evt);});this.$selection.on("focusout",".select2-search--inline",function(evt){self._handleBlur(evt);});this.$selection.on("keydown",".select2-search--inline",function(evt){evt.stopPropagation();self.trigger("keypress",evt);self._keyUpPrevented=evt.isDefaultPrevented();var key=evt.which;if(key===KEYS.BACKSPACE&&self.$search.val()===""){var $previousChoice=self.$searchContainer.prev(".select2-selection__choice");if($previousChoice.length>0){var item=Utils.GetData($previousChoice[0],"data");
self.searchRemoveChoice(item);evt.preventDefault();}}});this.$selection.on("click",".select2-search--inline",function(evt){if(self.$search.val()){evt.stopPropagation();}});var msie=document.documentMode;var disableInputEvents=msie&&msie<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(evt){if(disableInputEvents){self.$selection.off("input.search input.searchcheck");return;}self.$selection.off("keyup.search");});this.$selection.on("keyup.search input.search",".select2-search--inline",function(evt){if(disableInputEvents&&evt.type==="input"){self.$selection.off("input.search input.searchcheck");return;}var key=evt.which;if(key==KEYS.SHIFT||key==KEYS.CTRL||key==KEYS.ALT){return;}if(key==KEYS.TAB){return;}self.handleSearch(evt);});};Search.prototype._transferTabIndex=function(decorated){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1");};Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr("placeholder",placeholder.text);this.$search.removeClass("select2search");};Search.prototype.update=function(decorated,data){var searchHadFocus=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""+this.options.get("searchPlaceHolder"));this.$search.addClass("select2search");decorated.call(this,data);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(searchHadFocus){this.$search.trigger("focus");}};Search.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var input=this.$search.val();
this.trigger("query",{term:input});}this._keyUpPrevented=false;};Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger("unselect",{data:item});this.$search.val(item.text);this.handleSearch();};Search.prototype.resizeSearch=function(){this.$search.css("width","100%");};return Search;});S2.define("select2/selection/eventRelay",["jquery"],function($){function EventRelay(){}EventRelay.prototype.bind=function(decorated,container,$container){var self=this;var relayEvents=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var preventableEvents=["opening","closing","selecting","unselecting","clearing"];decorated.call(this,container,$container);container.on("*",function(name,params){if($.inArray(name,relayEvents)===-1){return;}params=params||{};var evt=$.Event("select2:"+name,{params:params});self.$element.trigger(evt);if($.inArray(name,preventableEvents)===-1){return;}params.prevented=evt.isDefaultPrevented();});};return EventRelay;});S2.define("select2/translation",["jquery","require"],function($,require){function Translation(dict){this.dict=dict||{};}Translation.prototype.all=function(){return this.dict;};Translation.prototype.get=function(key){return this.dict[key];};Translation.prototype.extend=function(translation){this.dict=$.extend({},translation.all(),this.dict);};Translation._cache={};Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require(path);Translation._cache[path]=translations;}return new Translation(Translation._cache[path]);};return Translation;});S2.define("select2/diacritics",[],function(){var diacritics={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u0152":"OE","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u0153":"oe","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038A":"\u0399","\u03AA":"\u0399","\u038C":"\u039F","\u038E":"\u03A5","\u03AB":"\u03A5","\u038F":"\u03A9","\u03AC":"\u03B1","\u03AD":"\u03B5","\u03AE":"\u03B7","\u03AF":"\u03B9","\u03CA":"\u03B9","\u0390":"\u03B9","\u03CC":"\u03BF","\u03CD":"\u03C5","\u03CB":"\u03C5","\u03B0":"\u03C5","\u03CE":"\u03C9","\u03C2":"\u03C3","\u2019":"'"};
return diacritics;});S2.define("select2/data/base",["../utils"],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this);}Utils.Extend(BaseAdapter,Utils.Observable);BaseAdapter.prototype.current=function(callback){throw new Error("The `current` method must be defined in child classes.");};BaseAdapter.prototype.query=function(params,callback){throw new Error("The `query` method must be defined in child classes.");};BaseAdapter.prototype.bind=function(container,$container){};BaseAdapter.prototype.destroy=function(){};BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+"-result-";id+=Utils.generateChars(4);if(data.id!=null){id+="-"+data.id.toString();}else{id+="-"+Utils.generateChars(4);}return id;};return BaseAdapter;});S2.define("select2/data/select",["./base","../utils","jquery"],function(BaseAdapter,Utils,$){function SelectAdapter($element,options){this.$element=$element;this.options=options;SelectAdapter.__super__.constructor.call(this);}Utils.Extend(SelectAdapter,BaseAdapter);SelectAdapter.prototype.current=function(callback){var data=[];var self=this;this.$element.find(":selected").each(function(){var $option=$(this);var option=self.item($option);data.push(option);});callback(data);};SelectAdapter.prototype.select=function(data){var self=this;data.selected=true;if($(data.element).is("option")){data.element.selected=true;this.$element.trigger("input").trigger("change");return;}if(this.$element.prop("multiple")){this.current(function(currentData){var val=[];data=[data];data.push.apply(data,currentData);
for(var d=0;d<data.length;d++){var id=data[d].id;if($.inArray(id,val)===-1){val.push(id);}}self.$element.val(val);self.$element.trigger("input").trigger("change");});}else{var val=data.id;this.$element.val(val);this.$element.trigger("input").trigger("change");}};SelectAdapter.prototype.unselect=function(data){var self=this;if(!this.$element.prop("multiple")){return;}data.selected=false;if($(data.element).is("option")){data.element.selected=false;this.$element.trigger("input").trigger("change");return;}this.current(function(currentData){var val=[];for(var d=0;d<currentData.length;d++){var id=currentData[d].id;if(id!==data.id&&$.inArray(id,val)===-1){val.push(id);}}self.$element.val(val);self.$element.trigger("input").trigger("change");});};SelectAdapter.prototype.bind=function(container,$container){var self=this;this.container=container;container.on("select",function(params){self.select(params.data);});container.on("unselect",function(params){self.unselect(params.data);});};SelectAdapter.prototype.destroy=function(){this.$element.find("*").each(function(){Utils.RemoveData(this);});};SelectAdapter.prototype.query=function(params,callback){var data=[];var self=this;var $options=this.$element.children();$options.each(function(){var $option=$(this);if(!$option.is("option")&&!$option.is("optgroup")){return;}var option=self.item($option);var matches=self.matches(params,option);if(matches!==null){data.push(matches);}});callback({results:data});};SelectAdapter.prototype.addOptions=function($options){Utils.appendMany(this.$element,$options);};SelectAdapter.prototype.option=function(data){var option;
if(data.children){option=document.createElement("optgroup");option.label=data.text;}else{option=document.createElement("option");if(option.textContent!==undefined){option.textContent=data.text;}else{option.innerText=data.text;}}if(data.id!==undefined){option.value=data.id;}if(data.disabled){option.disabled=true;}if(data.selected){option.selected=true;}if(data.title){option.title=data.title;}var $option=$(option);var normalizedData=this._normalizeItem(data);normalizedData.element=option;Utils.StoreData(option,"data",normalizedData);return $option;};SelectAdapter.prototype.item=function($option){var data={};data=Utils.GetData($option[0],"data");if(data!=null){return data;}if($option.is("option")){data={id:$option.val(),text:$option.text(),disabled:$option.prop("disabled"),selected:$option.prop("selected"),title:$option.prop("title")};}else{if($option.is("optgroup")){data={text:$option.prop("label"),children:[],title:$option.prop("title")};var $children=$option.children("option");var children=[];for(var c=0;c<$children.length;c++){var $child=$($children[c]);var child=this.item($child);children.push(child);}data.children=children;}}data=this._normalizeItem(data);data.element=$option[0];Utils.StoreData($option[0],"data",data);return data;};SelectAdapter.prototype._normalizeItem=function(item){if(item!==Object(item)){item={id:item,text:item};}item=$.extend({},{text:""},item);var defaults={selected:false,disabled:false};if(item.id!=null){item.id=item.id.toString();}if(item.text!=null){item.text=item.text.toString();}if(item._resultId==null&&item.id&&this.container!=null){item._resultId=this.generateResultId(this.container,item);
}return $.extend({},defaults,item);};SelectAdapter.prototype.matches=function(params,data){var matcher=this.options.get("matcher");return matcher(params,data);};return SelectAdapter;});S2.define("select2/data/array",["./select","../utils","jquery"],function(SelectAdapter,Utils,$){function ArrayAdapter($element,options){this._dataToConvert=options.get("data")||[];ArrayAdapter.__super__.constructor.call(this,$element,options);}Utils.Extend(ArrayAdapter,SelectAdapter);ArrayAdapter.prototype.bind=function(container,$container){ArrayAdapter.__super__.bind.call(this,container,$container);this.addOptions(this.convertToOptions(this._dataToConvert));};ArrayAdapter.prototype.select=function(data){var $option=this.$element.find("option").filter(function(i,elm){return elm.value==data.id.toString();});if($option.length===0){$option=this.option(data);this.addOptions($option);}ArrayAdapter.__super__.select.call(this,data);};ArrayAdapter.prototype.convertToOptions=function(data){var self=this;var $existing=this.$element.find("option");var existingIds=$existing.map(function(){return self.item($(this)).id;}).get();var $options=[];function onlyItem(item){return function(){return $(this).val()==item.id;};}for(var d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if($.inArray(item.id,existingIds)>=0){var $existingOption=$existing.filter(onlyItem(item));var existingData=this.item($existingOption);var newData=$.extend(true,{},item,existingData);var $newOption=this.option(newData);$existingOption.replaceWith($newOption);continue;}var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);
Utils.appendMany($option,$children);}$options.push($option);}return $options;};return ArrayAdapter;});S2.define("select2/data/ajax",["./array","../utils","jquery"],function(ArrayAdapter,Utils,$){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults;}AjaxAdapter.__super__.constructor.call(this,$element,options);}Utils.Extend(AjaxAdapter,ArrayAdapter);AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return $.extend({},params,{q:params.term});},transport:function(params,success,failure){var $request=$.ajax(params);$request.then(success);$request.fail(failure);return $request;}};return $.extend({},defaults,options,true);};AjaxAdapter.prototype.processResults=function(results){return results;};AjaxAdapter.prototype.query=function(params,callback){var matches=[];var self=this;if(this._request!=null){if($.isFunction(this._request.abort)){this._request.abort();}this._request=null;}var options=$.extend({type:"GET"},this.ajaxOptions);if(typeof options.url==="function"){options.url=options.url.call(this.$element,params);}if(typeof options.data==="function"){options.data=options.data.call(this.$element,params);}function request(){var $request=options.transport(options,function(data){var results=self.processResults(data,params);if(self.options.get("debug")&&window.console&&console.error){if(!results||!results.results||!$.isArray(results.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.");
}}callback(results);},function(){if("status" in $request&&($request.status===0||$request.status==="0")){return;}self.trigger("results:message",{message:"errorLoading"});});self._request=$request;}if(this.ajaxOptions.delay&&params.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout);}this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay);}else{request();}};return AjaxAdapter;});S2.define("select2/data/tags",["jquery"],function($){function Tags(decorated,$element,options){var tags=options.get("tags");var createTag=options.get("createTag");if(createTag!==undefined){this.createTag=createTag;}var insertTag=options.get("insertTag");if(insertTag!==undefined){this.insertTag=insertTag;}decorated.call(this,$element,options);if($.isArray(tags)){for(var t=0;t<tags.length;t++){var tag=tags[t];var item=this._normalizeItem(tag);var $option=this.option(item);this.$element.append($option);}}}Tags.prototype.query=function(decorated,params,callback){var self=this;this._removeOldTags();if(params.term==null||params.page!=null){decorated.call(this,params,callback);return;}function wrapper(obj,child){var data=obj.results;for(var i=0;i<data.length;i++){var option=data[i];var checkChildren=(option.children!=null&&!wrapper({results:option.children},true));var optionText=(option.text||"").toUpperCase();var paramsTerm=(params.term||"").toUpperCase();var checkText=optionText===paramsTerm;if(checkText||checkChildren){if(child){return false;}obj.data=data;callback(obj);return;}}if(child){return true;}var tag=self.createTag(params);if(tag!=null){var $option=self.option(tag);
$option.attr("data-select2-tag",true);self.addOptions([$option]);self.insertTag(data,tag);}obj.results=data;callback(obj);}decorated.call(this,params,wrapper);};Tags.prototype.createTag=function(decorated,params){var term=$.trim(params.term);if(term===""){return null;}return{id:term,text:term};};Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag);};Tags.prototype._removeOldTags=function(_){var $options=this.$element.find("option[data-select2-tag]");$options.each(function(){if(this.selected){return;}$(this).remove();});};return Tags;});S2.define("select2/data/tokenizer",["jquery"],function($){function Tokenizer(decorated,$element,options){var tokenizer=options.get("tokenizer");if(tokenizer!==undefined){this.tokenizer=tokenizer;}decorated.call(this,$element,options);}Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container);this.$search=container.dropdown.$search||container.selection.$search||$container.find(".select2-search__field");};Tokenizer.prototype.query=function(decorated,params,callback){var self=this;function createAndSelect(data){var item=self._normalizeItem(data);var $existingOptions=self.$element.find("option").filter(function(){return $(this).val()===item.id;});if(!$existingOptions.length){var $option=self.option(item);$option.attr("data-select2-tag",true);self._removeOldTags();self.addOptions([$option]);}select(item);}function select(data){self.trigger("select",{data:data});}params.term=params.term||"";var tokenData=this.tokenizer(params,this.options,createAndSelect);if(tokenData.term!==params.term){if(this.$search.length){this.$search.val(tokenData.term);
this.$search.trigger("focus");}params.term=tokenData.term;}decorated.call(this,params,callback);};Tokenizer.prototype.tokenizer=function(_,params,options,callback){var separators=options.get("tokenSeparators")||[];var term=params.term;var i=0;var createTag=this.createTag||function(params){return{id:params.term,text:params.term};};while(i<term.length){var termChar=term[i];if($.inArray(termChar,separators)===-1){i++;continue;}var part=term.substr(0,i);var partParams=$.extend({},params,{term:part});var data=createTag(partParams);if(data==null){i++;continue;}callback(data);term=term.substr(i+1)||"";i=0;}return{term:term};};return Tokenizer;});S2.define("select2/data/minimumInputLength",[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get("minimumInputLength");decorated.call(this,$e,options);}MinimumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"";if(params.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:params.term,params:params}});return;}decorated.call(this,params,callback);};return MinimumInputLength;});S2.define("select2/data/maximumInputLength",[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get("maximumInputLength");decorated.call(this,$e,options);}MaximumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"";if(this.maximumInputLength>0&&params.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:params.term,params:params}});
return;}decorated.call(this,params,callback);};return MaximumInputLength;});S2.define("select2/data/maximumSelectionLength",[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get("maximumSelectionLength");decorated.call(this,$e,options);}MaximumSelectionLength.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("select",function(){self._checkIfMaximumSelected();});};MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self=this;this._checkIfMaximumSelected(function(){decorated.call(self,params,callback);});};MaximumSelectionLength.prototype._checkIfMaximumSelected=function(_,successCallback){var self=this;this.current(function(currentData){var count=currentData!=null?currentData.length:0;if(self.maximumSelectionLength>0&&count>=self.maximumSelectionLength){self.trigger("results:message",{message:"maximumSelected",args:{maximum:self.maximumSelectionLength}});return;}if(successCallback){successCallback();}});};return MaximumSelectionLength;});S2.define("select2/dropdown",["jquery","./utils"],function($,Utils){function Dropdown($element,options){this.$element=$element;this.options=options;Dropdown.__super__.constructor.call(this);}Utils.Extend(Dropdown,Utils.Observable);Dropdown.prototype.render=function(){var $dropdown=$('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");$dropdown.attr("dir",this.options.get("dir"));this.$dropdown=$dropdown;return $dropdown;};Dropdown.prototype.bind=function(){};
Dropdown.prototype.position=function($dropdown,$container){};Dropdown.prototype.destroy=function(){this.$dropdown.remove();};return Dropdown;});S2.define("select2/dropdown/search",["jquery","../utils"],function($,Utils){function Search(){}Search.prototype.render=function(decorated){var $rendered=decorated.call(this);var $search=$('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=$search;this.$search=$search.find("input");$rendered.prepend($search);return $rendered;};Search.prototype.bind=function(decorated,container,$container){var self=this;var resultsId=container.id+"-results";decorated.call(this,container,$container);this.$search.on("keydown",function(evt){self.trigger("keypress",evt);self._keyUpPrevented=evt.isDefaultPrevented();});this.$search.on("input",function(evt){$(this).off("keyup");});this.$search.on("keyup input",function(evt){self.handleSearch(evt);});container.on("open",function(){self.$search.attr("tabindex",0);self.$search.attr("aria-controls",resultsId);self.$search.trigger("focus");window.setTimeout(function(){self.$search.trigger("focus");},0);});container.on("close",function(){self.$search.attr("tabindex",-1);self.$search.removeAttr("aria-controls");self.$search.removeAttr("aria-activedescendant");self.$search.val("");self.$search.trigger("blur");});container.on("focus",function(){if(!container.isOpen()){self.$search.trigger("focus");
}});container.on("results:all",function(params){if(params.query.term==null||params.query.term===""){var showSearch=self.showSearch(params);if(showSearch){self.$searchContainer.removeClass("select2-search--hide");}else{self.$searchContainer.addClass("select2-search--hide");}}});container.on("results:focus",function(params){if(params.data._resultId){self.$search.attr("aria-activedescendant",params.data._resultId);}else{self.$search.removeAttr("aria-activedescendant");}});};Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input});}this._keyUpPrevented=false;};Search.prototype.showSearch=function(_,params){return true;};return Search;});S2.define("select2/dropdown/hidePlaceholder",[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get("placeholder"));decorated.call(this,$element,options,dataAdapter);}HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results);decorated.call(this,data);};HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){if(typeof placeholder==="string"){placeholder={id:"",text:placeholder};}return placeholder;};HidePlaceholder.prototype.removePlaceholder=function(_,data){var modifiedData=data.slice(0);for(var d=data.length-1;d>=0;d--){var item=data[d];if(this.placeholder.id===item.id){modifiedData.splice(d,1);}}return modifiedData;};return HidePlaceholder;});S2.define("select2/dropdown/infiniteScroll",["jquery"],function($){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={};
decorated.call(this,$element,options,dataAdapter);this.$loadingMore=this.createLoadingMore();this.loading=false;}InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove();this.loading=false;decorated.call(this,data);if(this.showLoadingMore(data)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded();}};InfiniteScroll.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("query",function(params){self.lastParams=params;self.loading=true;});container.on("query:append",function(params){self.lastParams=params;self.loading=true;});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this));};InfiniteScroll.prototype.loadMoreIfNeeded=function(){var isLoadMoreVisible=$.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!isLoadMoreVisible){return;}var currentOffset=this.$results.offset().top+this.$results.outerHeight(false);var loadingMoreOffset=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(currentOffset+50>=loadingMoreOffset){this.loadMore();}};InfiniteScroll.prototype.loadMore=function(){this.loading=true;var params=$.extend({},{page:1},this.lastParams);params.page++;this.trigger("query:append",params);};InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more;};InfiniteScroll.prototype.createLoadingMore=function(){var $option=$("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var message=this.options.get("translations").get("loadingMore");
$option.html(message(this.lastParams));return $option;};return InfiniteScroll;});S2.define("select2/dropdown/attachBody",["jquery","../utils"],function($,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=$(options.get("dropdownParent")||document.body);decorated.call(this,$element,options);}AttachBody.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("open",function(){self._showDropdown();self._attachPositioningHandler(container);self._bindContainerResultHandlers(container);});container.on("close",function(){self._hideDropdown();self._detachPositioningHandler(container);});this.$dropdownContainer.on("mousedown",function(evt){evt.stopPropagation();});};AttachBody.prototype.destroy=function(decorated){decorated.call(this);this.$dropdownContainer.remove();};AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr("class",$container.attr("class"));$dropdown.removeClass("select2");$dropdown.addClass("select2-container--open");$dropdown.css({position:"absolute",top:-999999});this.$container=$container;};AttachBody.prototype.render=function(decorated){var $container=$("<span></span>");var $dropdown=decorated.call(this);$container.append($dropdown);this.$dropdownContainer=$container;return $container;};AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach();};AttachBody.prototype._bindContainerResultHandlers=function(decorated,container){if(this._containerResultsHandlersBound){return;}var self=this;container.on("results:all",function(){self._positionDropdown();
self._resizeDropdown();});container.on("results:append",function(){self._positionDropdown();self._resizeDropdown();});container.on("results:message",function(){self._positionDropdown();self._resizeDropdown();});container.on("select",function(){self._positionDropdown();self._resizeDropdown();});container.on("unselect",function(){self._positionDropdown();self._resizeDropdown();});this._containerResultsHandlersBound=true;};AttachBody.prototype._attachPositioningHandler=function(decorated,container){var self=this;var scrollEvent="scroll.select2."+container.id;var resizeEvent="resize.select2."+container.id;var orientationEvent="orientationchange.select2."+container.id;var $watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.each(function(){Utils.StoreData(this,"select2-scroll-position",{x:$(this).scrollLeft(),y:$(this).scrollTop()});});$watchers.on(scrollEvent,function(ev){var position=Utils.GetData(this,"select2-scroll-position");$(this).scrollTop(position.y);});$(window).on(scrollEvent+" "+resizeEvent+" "+orientationEvent,function(e){self._positionDropdown();self._resizeDropdown();});};AttachBody.prototype._detachPositioningHandler=function(decorated,container){var scrollEvent="scroll.select2."+container.id;var resizeEvent="resize.select2."+container.id;var orientationEvent="orientationchange.select2."+container.id;var $watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.off(scrollEvent);$(window).off(scrollEvent+" "+resizeEvent+" "+orientationEvent);};AttachBody.prototype._positionDropdown=function(){var $window=$(window);var isCurrentlyAbove=this.$dropdown.hasClass("select2-dropdown--above");
var isCurrentlyBelow=this.$dropdown.hasClass("select2-dropdown--below");var newDirection=null;var offset=this.$container.offset();offset.bottom=offset.top+this.$container.outerHeight(false);var container={height:this.$container.outerHeight(false)};container.top=offset.top;container.bottom=offset.top+container.height;var dropdown={height:this.$dropdown.outerHeight(false)};var viewport={top:$window.scrollTop(),bottom:$window.scrollTop()+$window.height()};var enoughRoomAbove=viewport.top<(offset.top-dropdown.height);var enoughRoomBelow=viewport.bottom>(offset.bottom+dropdown.height);var css={left:offset.left,top:container.bottom};var $offsetParent=this.$dropdownParent;if($offsetParent.css("position")==="static"){$offsetParent=$offsetParent.offsetParent();}var parentOffset={top:0,left:0};if($.contains(document.body,$offsetParent[0])||$offsetParent[0].isConnected){parentOffset=$offsetParent.offset();}css.top-=parentOffset.top;css.left-=parentOffset.left;if(!isCurrentlyAbove&&!isCurrentlyBelow){newDirection="below";}if(!enoughRoomBelow&&enoughRoomAbove&&!isCurrentlyAbove){newDirection="above";}else{if(!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove){newDirection="below";}}if(newDirection=="above"||(isCurrentlyAbove&&newDirection!=="below")){css.top=container.top-parentOffset.top-dropdown.height;}if(newDirection!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+newDirection);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+newDirection);}this.$dropdownContainer.css(css);
};AttachBody.prototype._resizeDropdown=function(){var css={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){css.minWidth=css.width;css.position="relative";css.width="auto";}this.$dropdown.css(css);};AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown();};return AttachBody;});S2.define("select2/dropdown/minimumResultsForSearch",[],function(){function countResults(data){var count=0;for(var d=0;d<data.length;d++){var item=data[d];if(item.children){count+=countResults(item.children);}else{count++;}}return count;}function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity;}decorated.call(this,$element,options,dataAdapter);}MinimumResultsForSearch.prototype.showSearch=function(decorated,params){if(countResults(params.data.results)<this.minimumResultsForSearch){return false;}return decorated.call(this,params);};return MinimumResultsForSearch;});S2.define("select2/dropdown/selectOnClose",["../utils"],function(Utils){function SelectOnClose(){}SelectOnClose.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("close",function(params){self._handleSelectOnClose(params);});};SelectOnClose.prototype._handleSelectOnClose=function(_,params){if(params&&params.originalSelect2Event!=null){var event=params.originalSelect2Event;if(event._type==="select"||event._type==="unselect"){return;
}}var $highlightedResults=this.getHighlightedResults();if($highlightedResults.length<1){return;}var data=Utils.GetData($highlightedResults[0],"data");if((data.element!=null&&data.element.selected)||(data.element==null&&data.selected)){return;}this.trigger("select",{data:data});};return SelectOnClose;});S2.define("select2/dropdown/closeOnSelect",[],function(){function CloseOnSelect(){}CloseOnSelect.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container);container.on("select",function(evt){self._selectTriggered(evt);});container.on("unselect",function(evt){self._selectTriggered(evt);});};CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;if(originalEvent&&(originalEvent.ctrlKey||originalEvent.metaKey)){return;}this.trigger("close",{originalEvent:originalEvent,originalSelect2Event:evt});};return CloseOnSelect;});S2.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded.";},inputTooLong:function(args){var overChars=args.input.length-args.maximum;var message="Please delete "+overChars+" character";if(overChars!=1){message+="s";}return message;},inputTooShort:function(args){var remainingChars=args.minimum-args.input.length;var message="Please enter "+remainingChars+" or more characters";return message;},loadingMore:function(){return"Loading more results";},maximumSelected:function(args){var message="You can only select "+args.maximum+" item";if(args.maximum!=1){message+="s";}return message;},noResults:function(){return"No results found";
},searching:function(){return"Searching";},removeAllItems:function(){return"Remove all items";}};});S2.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function($,require,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,EnglishTranslation){function Defaults(){this.reset();}Defaults.prototype.apply=function(options){options=$.extend(true,{},this.defaults,options);if(options.dataAdapter==null){if(options.ajax!=null){options.dataAdapter=AjaxData;}else{if(options.data!=null){options.dataAdapter=ArrayData;}else{options.dataAdapter=SelectData;}}if(options.minimumInputLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength);}if(options.maximumInputLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength);
}if(options.maximumSelectionLength>0){options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength);}if(options.tags){options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags);}if(options.tokenSeparators!=null||options.tokenizer!=null){options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer);}if(options.query!=null){var Query=require(options.amdBase+"compat/query");options.dataAdapter=Utils.Decorate(options.dataAdapter,Query);}if(options.initSelection!=null){var InitSelection=require(options.amdBase+"compat/initSelection");options.dataAdapter=Utils.Decorate(options.dataAdapter,InitSelection);}}if(options.resultsAdapter==null){options.resultsAdapter=ResultsList;if(options.ajax!=null){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll);}if(options.placeholder!=null){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder);}if(options.selectOnClose){options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose);}}if(options.dropdownAdapter==null){if(options.multiple){options.dropdownAdapter=Dropdown;}else{var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown;}if(options.minimumResultsForSearch!==0){options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch);}if(options.closeOnSelect){options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect);}if(options.dropdownCssClass!=null||options.dropdownCss!=null||options.adaptDropdownCssClass!=null){var DropdownCSS=require(options.amdBase+"compat/dropdownCss");
options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS);}options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody);}if(options.selectionAdapter==null){if(options.multiple){options.selectionAdapter=MultipleSelection;}else{options.selectionAdapter=SingleSelection;}if(options.placeholder!=null){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder);}if(options.allowClear){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear);}if(options.multiple){options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionSearch);}if(options.containerCssClass!=null||options.containerCss!=null||options.adaptContainerCssClass!=null){var ContainerCSS=require(options.amdBase+"compat/containerCss");options.selectionAdapter=Utils.Decorate(options.selectionAdapter,ContainerCSS);}options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay);}options.language=this._resolveLanguage(options.language);options.language.push("en");var uniqueLanguages=[];for(var l=0;l<options.language.length;l++){var language=options.language[l];if(uniqueLanguages.indexOf(language)===-1){uniqueLanguages.push(language);}}options.language=uniqueLanguages;options.translations=this._processTranslations(options.language,options.debug);return options;};Defaults.prototype.reset=function(){function stripDiacritics(text){function match(a){return DIACRITICS[a]||a;}return text.replace(/[^\u0000-\u007E]/g,match);}function matcher(params,data){if($.trim(params.term)===""){return data;}if(data.children&&data.children.length>0){var match=$.extend(true,{},data);
for(var c=data.children.length-1;c>=0;c--){var child=data.children[c];var matches=matcher(params,child);if(matches==null){match.children.splice(c,1);}}if(match.children.length>0){return match;}return matcher(params,match);}var original=stripDiacritics(data.text).toUpperCase();var term=stripDiacritics(params.term).toUpperCase();if(original.indexOf(term)>-1){return data;}return null;}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,searchPlaceHolder:"",escapeMarkup:Utils.escapeMarkup,language:{},matcher:matcher,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(data){return data;},templateResult:function(result){return result.text;},templateSelection:function(selection){return selection.text;},theme:"default",width:"resolve"};};Defaults.prototype.applyFromElement=function(options,$element){var optionLanguage=options.language;var defaultLanguage=this.defaults.language;var elementLanguage=$element.prop("lang");var parentLanguage=$element.closest("[lang]").prop("lang");var languages=Array.prototype.concat.call(this._resolveLanguage(elementLanguage),this._resolveLanguage(optionLanguage),this._resolveLanguage(defaultLanguage),this._resolveLanguage(parentLanguage));options.language=languages;return options;};Defaults.prototype._resolveLanguage=function(language){if(!language){return[];}if($.isEmptyObject(language)){return[];}if($.isPlainObject(language)){return[language];}var languages;if(!$.isArray(language)){languages=[language];
}else{languages=language;}var resolvedLanguages=[];for(var l=0;l<languages.length;l++){resolvedLanguages.push(languages[l]);if(typeof languages[l]==="string"&&languages[l].indexOf("-")>0){var languageParts=languages[l].split("-");var baseLanguage=languageParts[0];resolvedLanguages.push(baseLanguage);}}return resolvedLanguages;};Defaults.prototype._processTranslations=function(languages,debug){var translations=new Translation();for(var l=0;l<languages.length;l++){var languageData=new Translation();var language=languages[l];if(typeof language==="string"){try{languageData=Translation.loadPath(language);}catch(e){try{language=this.defaults.amdLanguageBase+language;languageData=Translation.loadPath(language);}catch(ex){if(debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+language+'" could '+"not be automatically loaded. A fallback will be used instead.");}}}}else{if($.isPlainObject(language)){languageData=new Translation(language);}else{languageData=language;}}translations.extend(languageData);}return translations;};Defaults.prototype.set=function(key,value){var camelKey=$.camelCase(key);var data={};data[camelKey]=value;var convertedData=Utils._convertData(data);$.extend(true,this.defaults,convertedData);};var defaults=new Defaults();return defaults;});S2.define("select2/options",["require","jquery","./defaults","./utils"],function(require,$,Defaults,Utils){function Options(options,$element){this.options=options;if($element!=null){this.fromElement($element);}if($element!=null){this.options=Defaults.applyFromElement(this.options,$element);}this.options=Defaults.apply(this.options);
if($element&&$element.is("input")){var InputCompat=require(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=Utils.Decorate(this.options.dataAdapter,InputCompat);}}Options.prototype.fromElement=function($e){var excludedData=["select2"];if(this.options.multiple==null){this.options.multiple=$e.prop("multiple");}if(this.options.disabled==null){this.options.disabled=$e.prop("disabled");}if(this.options.dir==null){if($e.prop("dir")){this.options.dir=$e.prop("dir");}else{if($e.closest("[dir]").prop("dir")){this.options.dir=$e.closest("[dir]").prop("dir");}else{this.options.dir="ltr";}}}$e.prop("disabled",this.options.disabled);$e.prop("multiple",this.options.multiple);if(Utils.GetData($e[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.");}Utils.StoreData($e[0],"data",Utils.GetData($e[0],"select2Tags"));Utils.StoreData($e[0],"tags",true);}if(Utils.GetData($e[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.");}$e.attr("ajax--url",Utils.GetData($e[0],"ajaxUrl"));Utils.StoreData($e[0],"ajax-Url",Utils.GetData($e[0],"ajaxUrl"));}var dataset={};function upperCaseLetter(_,letter){return letter.toUpperCase();}for(var attr=0;attr<$e[0].attributes.length;attr++){var attributeName=$e[0].attributes[attr].name;
var prefix="data-";if(attributeName.substr(0,prefix.length)==prefix){var dataName=attributeName.substring(prefix.length);var dataValue=Utils.GetData($e[0],dataName);var camelDataName=dataName.replace(/-([a-z])/g,upperCaseLetter);dataset[camelDataName]=dataValue;}}if($.fn.jquery&&$.fn.jquery.substr(0,2)=="1."&&$e[0].dataset){dataset=$.extend(true,{},$e[0].dataset,dataset);}var data=$.extend(true,{},Utils.GetData($e[0]),dataset);data=Utils._convertData(data);for(var key in data){if($.inArray(key,excludedData)>-1){continue;}if($.isPlainObject(this.options[key])){$.extend(this.options[key],data[key]);}else{this.options[key]=data[key];}}return this;};Options.prototype.get=function(key){return this.options[key];};Options.prototype.set=function(key,val){this.options[key]=val;};return Options;});S2.define("select2/core",["jquery","./options","./utils","./keys"],function($,Options,Utils,KEYS){var Select2=function($element,options){if(Utils.GetData($element[0],"select2")!=null){Utils.GetData($element[0],"select2").destroy();}this.$element=$element;this.id=this._generateId($element);options=options||{};this.options=new Options(options,$element);Select2.__super__.constructor.call(this);var tabindex=$element.attr("tabindex")||0;Utils.StoreData($element[0],"old-tabindex",tabindex);$element.attr("tabindex","-1");var DataAdapter=this.options.get("dataAdapter");this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get("selectionAdapter");this.selection=new SelectionAdapter($element,this.options);
this.$selection=this.selection.render();this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get("dropdownAdapter");this.dropdown=new DropdownAdapter($element,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get("resultsAdapter");this.results=new ResultsAdapter($element,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var self=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(initialData){self.trigger("selection:update",{data:initialData});});$element.addClass("select2-hidden-accessible");$element.attr("aria-hidden","true");this._syncAttributes();Utils.StoreData($element[0],"select2",this);$element.data("select2",this);};Utils.Extend(Select2,Utils.Observable);Select2.prototype._generateId=function($element){var id="";if($element.attr("id")!=null){id=$element.attr("id");}else{if($element.attr("name")!=null){id=$element.attr("name")+"-"+Utils.generateChars(2);}else{id=Utils.generateChars(4);}}id=id.replace(/(:|\.|\[|\]|,)/g,"");id="select2-"+id;return id;};Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get("width"));if(width!=null){$container.css("width",width);}};Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;
if(method=="resolve"){var styleWidth=this._resolveWidth($element,"style");if(styleWidth!=null){return styleWidth;}return this._resolveWidth($element,"element");}if(method=="element"){var elementWidth=$element.outerWidth(false);if(elementWidth<=0){return"auto";}return elementWidth+"px";}if(method=="style"){var style=$element.attr("style");if(typeof(style)!=="string"){return null;}var attrs=style.split(";");for(var i=0,l=attrs.length;i<l;i=i+1){var attr=attrs[i].replace(/\s/g,"");var matches=attr.match(WIDTH);if(matches!==null&&matches.length>=1){return matches[1];}}return null;}if(method=="computedstyle"){var computedStyle=window.getComputedStyle($element[0]);return computedStyle.width;}return method;};Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container);};Select2.prototype._registerDomEvents=function(){var self=this;this.$element.on("change.select2",function(){self.dataAdapter.current(function(data){self.trigger("selection:update",{data:data});});});this.$element.on("focus.select2",function(evt){self.trigger("focus",evt);});this._syncA=Utils.bind(this._syncAttributes,this);this._syncS=Utils.bind(this._syncSubtree,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._syncA);}var observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(observer!=null){this._observer=new observer(function(mutations){self._syncA();self._syncS(null,mutations);});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false});
}else{if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",self._syncA,false);this.$element[0].addEventListener("DOMNodeInserted",self._syncS,false);this.$element[0].addEventListener("DOMNodeRemoved",self._syncS,false);}}};Select2.prototype._registerDataEvents=function(){var self=this;this.dataAdapter.on("*",function(name,params){self.trigger(name,params);});};Select2.prototype._registerSelectionEvents=function(){var self=this;var nonRelayEvents=["toggle","focus"];this.selection.on("toggle",function(){self.toggleDropdown();});this.selection.on("focus",function(params){self.focus(params);});this.selection.on("*",function(name,params){if($.inArray(name,nonRelayEvents)!==-1){return;}self.trigger(name,params);});};Select2.prototype._registerDropdownEvents=function(){var self=this;this.dropdown.on("*",function(name,params){self.trigger(name,params);});};Select2.prototype._registerResultsEvents=function(){var self=this;this.results.on("*",function(name,params){self.trigger(name,params);});};Select2.prototype._registerEvents=function(){var self=this;this.on("open",function(){self.$container.addClass("select2-container--open");});this.on("close",function(){self.$container.removeClass("select2-container--open");});this.on("enable",function(){self.$container.removeClass("select2-container--disabled");});this.on("disable",function(){self.$container.addClass("select2-container--disabled");});this.on("blur",function(){self.$container.removeClass("select2-container--focus");});this.on("query",function(params){if(!self.isOpen()){self.trigger("open",{});
}this.dataAdapter.query(params,function(data){self.trigger("results:all",{data:data,query:params});});});this.on("query:append",function(params){this.dataAdapter.query(params,function(data){self.trigger("results:append",{data:data,query:params});});});this.on("keypress",function(evt){var key=evt.which;if(self.isOpen()){if(key===KEYS.ESC||key===KEYS.TAB||(key===KEYS.UP&&evt.altKey)){self.close(evt);evt.preventDefault();}else{if(key===KEYS.ENTER){self.trigger("results:select",{});evt.preventDefault();}else{if((key===KEYS.SPACE&&evt.ctrlKey)){self.trigger("results:toggle",{});evt.preventDefault();}else{if(key===KEYS.UP){self.trigger("results:previous",{});evt.preventDefault();}else{if(key===KEYS.DOWN){self.trigger("results:next",{});evt.preventDefault();}}}}}}else{if(key===KEYS.ENTER||key===KEYS.SPACE||(key===KEYS.DOWN&&evt.altKey)){self.open();evt.preventDefault();}}});};Select2.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close();}this.trigger("disable",{});}else{this.trigger("enable",{});}};Select2.prototype._isChangeMutation=function(evt,mutations){var changed=false;var self=this;if(evt&&evt.target&&(evt.target.nodeName!=="OPTION"&&evt.target.nodeName!=="OPTGROUP")){return;}if(!mutations){changed=true;}else{if(mutations.addedNodes&&mutations.addedNodes.length>0){for(var n=0;n<mutations.addedNodes.length;n++){var node=mutations.addedNodes[n];if(node.selected){changed=true;}}}else{if(mutations.removedNodes&&mutations.removedNodes.length>0){changed=true;}else{if($.isArray(mutations)){$.each(mutations,function(evt,mutation){if(self._isChangeMutation(evt,mutation)){changed=true;
return false;}});}}}}return changed;};Select2.prototype._syncSubtree=function(evt,mutations){var changed=this._isChangeMutation(evt,mutations);var self=this;if(changed){this.dataAdapter.current(function(currentData){self.trigger("selection:update",{data:currentData});});}};Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger;var preTriggerMap={"open":"opening","close":"closing","select":"selecting","unselect":"unselecting","clear":"clearing"};if(args===undefined){args={};}if(name in preTriggerMap){var preTriggerName=preTriggerMap[name];var preTriggerArgs={prevented:false,name:name,args:args};actualTrigger.call(this,preTriggerName,preTriggerArgs);if(preTriggerArgs.prevented){args.prevented=true;return;}}actualTrigger.call(this,name,args);};Select2.prototype.toggleDropdown=function(){if(this.isDisabled()){return;}if(this.isOpen()){this.close();}else{this.open();}};Select2.prototype.open=function(){if(this.isOpen()){return;}if(this.isDisabled()){return;}this.trigger("query",{});};Select2.prototype.close=function(evt){if(!this.isOpen()){return;}this.trigger("close",{originalEvent:evt});};Select2.prototype.isEnabled=function(){return !this.isDisabled();};Select2.prototype.isDisabled=function(){return this.options.get("disabled");};Select2.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open");};Select2.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus");};Select2.prototype.focus=function(data){if(this.hasFocus()){return;}this.$container.addClass("select2-container--focus");this.trigger("focus",{});
};Select2.prototype.enable=function(args){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.");}if(args==null||args.length===0){args=[true];}var disabled=!args[0];this.$element.prop("disabled",disabled);};Select2.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.");}var data=[];this.dataAdapter.current(function(currentData){data=currentData;});return data;};Select2.prototype.val=function(args){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.");}if(args==null||args.length===0){return this.$element.val();}var newVal=args[0];if($.isArray(newVal)){newVal=$.map(newVal,function(obj){return obj.toString();});}this.$element.val(newVal).trigger("input").trigger("change");};Select2.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._syncA);}if(this._observer!=null){this._observer.disconnect();this._observer=null;}else{if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._syncA,false);this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,false);
this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,false);}}this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",Utils.GetData(this.$element[0],"old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");Utils.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null;};Select2.prototype.render=function(){var $container=$('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");$container.attr("dir",this.options.get("dir"));this.$container=$container;this.$container.addClass("select2-container--"+this.options.get("theme"));Utils.StoreData($container[0],"element",this.$element);return $container;};return Select2;});S2.define("jquery-mousewheel",["jquery"],function($){return $;});S2.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function($,_,Select2,Defaults,Utils){if($.fn.select2==null){var thisMethods=["open","close","destroy"];$.fn.select2=function(options){options=options||{};if(typeof options==="object"){this.each(function(){var instanceOptions=$.extend(true,{},options);var instance=new Select2($(this),instanceOptions);});return this;}else{if(typeof options==="string"){var ret;var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=Utils.GetData(this,"select2");
if(instance==null&&window.console&&console.error){console.error("The select2('"+options+"') method was called on an "+"element that is not using Select2.");}ret=instance[options].apply(instance,args);});if($.inArray(options,thisMethods)>-1){return this;}return ret;}else{throw new Error("Invalid arguments for Select2: "+options);}}};}if($.fn.select2.defaults==null){$.fn.select2.defaults=Defaults;}return Select2;});return{define:S2.define,require:S2.require};}());var select2=S2.require("jquery.select2");jQuery.fn.select2.amd=S2;return select2;}));Array.prototype.remove=function(from,to){var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest);};Array.prototype.clean=function(deleteValue){for(var i=0;i<this.length;i++){if(this[i]==deleteValue){this.splice(i,1);i--;}}return this;};function replaceUrlParam(url,paramName,paramValue){if(paramValue==null){paramValue="";}var pattern=new RegExp("\\b("+paramName+"=).*?(&|#|$)");if(url.search(pattern)>=0){return url.replace(pattern,"$1"+paramValue+"$2");}url=url.replace(/[?#]$/,"");return url+(url.indexOf("?")>0?"&":"?")+paramName+"="+paramValue;}jQuery.fn.cssInt=function(prop){return parseInt(this.css(prop),10)||0;};function endsWith(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1;}function urldecode(str){return decodeURIComponent((str+"").replace(/\+/g,"%20"));}var waitForFinalEvent=(function(){var timers={};return function(callback,ms,uniqueId){if(!uniqueId){uniqueId="A2X6D";}if(timers[uniqueId]){clearTimeout(timers[uniqueId]);}if(callback){timers[uniqueId]=setTimeout(callback,ms);}};})();$.fn.textWidth=function(text,font){if(!$.fn.textWidth.fakeEl){$.fn.textWidth.fakeEl=$("<span>").hide().appendTo(document.body);}$.fn.textWidth.fakeEl.html(text||this.val()||this.text()).css("font",font||this.css("font"));return $.fn.textWidth.fakeEl.width();};$.fn.equals=function(compareTo){if(!compareTo||this.length!=compareTo.length){return false;}for(var i=0;i<this.length;++i){if(this[i]!==compareTo[i]){return false;}}return true;};function initDatePickerLocales(dateLocale){$.datepicker.setDefaults({weekHeader:"w",dateFormat:"yy-mm-dd",altFormat:"yy-mm-dd",firstDay:dateLocale.firstDay,isRTL:false,changeYear:true,changeMonth:true,showMonthAfterYear:false,showOtherMonths:true,selectOtherMonths:true,showWeek:dateLocale.showWeek,monthNamesShort:["January","February","March","April","May","June","July","August","September","October","November","December"],yearSuffix:""});
$.datepicker.regional["fr"]={closeText:"Fermer",prevText:"Prcdent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],monthNamesShort:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"s",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showWeek:true,showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["fr_PM"]=$.datepicker.regional["fr"];$.datepicker.regional["nl_NL"]={closeText:"Sluiten",prevText:"",nextText:"",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"W",dateFormat:"dd-mm-yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["sv_SE"]={closeText:"Stng",prevText:"Frra",nextText:"Nsta",currentText:"Idag",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayNamesShort:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],dayNames:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["S","M","Ti","On","To","Fr","L"],weekHeader:"v",dateFormat:"yy-mm-dd",altFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:false,showWeek:true,yearSuffix:""};
$.datepicker.regional["sv"]=$.datepicker.regional["sv_SE"];$.datepicker.regional["no_NO"]={closeText:"Lukk",prevText:"&laquo;Forrige",nextText:"Neste&raquo;",currentText:"I dag",monthNames:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayNamesShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayNames:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["S","Ma","Ti","On","To","Fr","L"],weekHeader:"u",dateFormat:"dd.mm.yy",altFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:false,showWeek:true,yearSuffix:""};$.datepicker.regional["no"]=$.datepicker.regional["no_NO"];$.datepicker.regional["nb"]=$.datepicker.regional["no_NO"];$.datepicker.regional["nb_NO"]=$.datepicker.regional["no_NO"];$.datepicker.regional["fi_FI"]={closeText:"Sulje",prevText:"&laquo;Edellinen",nextText:"Seuraava&raquo;",currentText:"T&auml;n&auml;&auml;n",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","Su"],dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","La"],weekHeader:"v",dateFormat:"yy-mm-dd",altFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:false,showWeek:true,yearSuffix:""};
$.datepicker.regional["fi"]=$.datepicker.regional["fi_FI"];$.datepicker.regional["da_DK"]={closeText:"Luk",prevText:"Foregende",nextText:"Nste",currentText:"I dag",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],dayNamesShort:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],dayNames:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["S","M","Ti","On","To","Fr","L"],weekHeader:"u",dateFormat:"dd.mm.yy",altFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:false,showWeek:true,yearSuffix:""};$.datepicker.regional["da"]=$.datepicker.regional["da_DK"];$.datepicker.regional["de_DE"]={closeText:"Schlieen",prevText:"Zurck",nextText:"Vor",currentText:"Heute",monthNames:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",altFormat:"yy-mm-dd",firstDay:1,isRTL:false,showMonthAfterYear:false,showWeek:true,yearSuffix:""};$.datepicker.regional["de"]=$.datepicker.regional["de_DE"];$.datepicker.regional["de_IT"]=$.datepicker.regional["de_DE"];$.datepicker.regional["en_US"]=$.datepicker.regional["en-US"];
}function supports_html5_storage(){return("localStorage" in window)&&window["localStorage"]!==null;}function supports_json(){if(!window.JSON){return false;}return JSON.parse;}jQuery.fn.extend({slideRight:function(done){return this.each(function(){if(isAnimationOff&&isAnimationOff()){jQuery(this).toggle();if(done){done();}}else{jQuery(this).animate({width:"show"},200,"",done);}});},slideLeft:function(done){return this.each(function(){if(isAnimationOff&&isAnimationOff()){jQuery(this).toggle();if(done){done();}}else{jQuery(this).animate({width:"hide"},200,"",done);}});},slideToggleWidth:function(right,left){return this.each(function(){var el=jQuery(this);if(el.css("display")=="none"){el.slideRight(right);}else{el.slideLeft(left);}});}});
/*
 * jQuery QuickFlip v2.1.1
 * http://jonraasch.com/blog/quickflip-2-jquery-plugin
 *
 * Copyright (c) 2009 Jon Raasch (http://jonraasch.com/)
 * Licensed under the FreeBSD License:
 * http://dev.jonraasch.com/quickflip/docs#licensing
 *
 */
(function($){var FALSE=false,NULL=null;$.quickFlip={wrappers:[],opts:[],objs:[],init:function(optionsIn,box){var options=optionsIn||{};options.closeSpeed=options.closeSpeed||180;options.openSpeed=options.openSpeed||120;options.ctaSelector=options.ctaSelector||".quickFlipCta";options.refresh=options.refresh||FALSE;options.easing=options.easing||"swing";options.noResize=options.noResize||true;options.vertical=options.vertical||FALSE;var $box=typeof(box)!="undefined"?$(box):$(".quickFlip"),$kids=$box.children();if($box.css("position")=="static"){$box.css("position","relative");}var i=$.quickFlip.wrappers.length;
$kids.each(function(j){var $this=$(this);if(options.ctaSelector){$this.find(options.ctaSelector).click(function(ev){ev.preventDefault();$.quickFlip.flip(i);});}if(j){$this.hide();}});$.quickFlip.opts.push(options);$.quickFlip.objs.push({$box:$($box),$kids:$($kids)});$.quickFlip.build(i);if(!options.noResize){$(window).resize(function(){var i=0;for(i=0;i<$.quickFlip.wrappers.length;i++){$.quickFlip.removeFlipDivs(i);$.quickFlip.build(i);}});}},build:function(i,currPanel){$.quickFlip.opts[i].panelWidth=$.quickFlip.opts[i].panelWidth||$.quickFlip.objs[i].$box.width();$.quickFlip.opts[i].panelHeight=$.quickFlip.opts[i].panelHeight||$.quickFlip.objs[i].$box.height();var options=$.quickFlip.opts[i],thisFlip={wrapper:$.quickFlip.objs[i].$box,index:i,half:parseInt((options.vertical?options.panelHeight:options.panelWidth)/2,10),panels:[],flipDivs:[],flipDivCols:[],currPanel:currPanel||0,options:options};$.quickFlip.objs[i].$kids.each(function(j){var $thisPanel=$(this).css({position:"absolute",top:0,left:0,margin:0,padding:0,width:options.panelWidth,height:options.panelHeight});thisFlip.panels[j]=$thisPanel;var $flipDivs=buildFlip(thisFlip,j).hide().appendTo(thisFlip.wrapper);thisFlip.flipDivs[j]=$flipDivs;thisFlip.flipDivCols[j]=$flipDivs.children();});$.quickFlip.wrappers[i]=thisFlip;function buildFlip(x,y){function buildFlipCol(x,y){var $col=$("<div></div>"),$inner=x.panels[y].clone().show();$col.css(flipCss);$col.html($inner);return $col;}var $out=$("<div></div>"),inner=x.panels[y].html(),flipCss={width:options.vertical?options.panelWidth:x.half,height:options.vertical?x.half:options.panelHeight,position:"absolute",overflow:"hidden",margin:0,padding:0};
if(options.vertical){flipCss.left=0;}else{flipCss.top=0;}var $col1=$(buildFlipCol(x,y)).appendTo($out),$col2=$(buildFlipCol(x,y)).appendTo($out);if(options.vertical){$col1.css("bottom",x.half);$col2.css("top",x.half);$col2.children().css({top:NULL,bottom:0});}else{$col1.css("right",x.half);$col2.css("left",x.half);$col2.children().css({right:0,left:"auto"});}return $out;}},flip:function(i,nextPanel,repeater,options){function combineOpts(opts1,opts2){opts1=opts1||{};opts2=opts2||{};for(var opt in opts1){opts2[opt]=opts1[opt];}return opts2;}if(typeof i!="number"||typeof $.quickFlip.wrappers[i]=="undefined"){return;}var x=$.quickFlip.wrappers[i],j=x.currPanel,k=(typeof(nextPanel)!="undefined"&&nextPanel!=NULL)?nextPanel:(x.panels.length>j+1)?j+1:0;x.currPanel=k,repeater=(typeof(repeater)!="undefined"&&repeater!=NULL)?repeater:1;options=combineOpts(options,$.quickFlip.opts[i]);x.panels[j].hide();if(options.refresh){$.quickFlip.removeFlipDivs(i);$.quickFlip.build(i,k);x=$.quickFlip.wrappers[i];}x.flipDivs[j].show();var panelFlipCount1=0,panelFlipCount2=0,closeCss=options.vertical?{height:0}:{width:0},openCss=options.vertical?{height:x.half}:{width:x.half};x.flipDivCols[j].animate(closeCss,options.closeSpeed,options.easing,function(){if(!panelFlipCount1){panelFlipCount1++;}else{x.flipDivs[k].show();x.flipDivCols[k].css(closeCss);x.flipDivCols[k].animate(openCss,options.openSpeed,options.easing,function(){if(!panelFlipCount2){panelFlipCount2++;}else{x.flipDivs[k].hide();x.panels[k].show();switch(repeater){case 0:case -1:$.quickFlip.flip(i,NULL,-1);break;case 1:break;default:$.quickFlip.flip(i,NULL,repeater-1);
break;}}});}});},removeFlipDivs:function(i){var j=0;for(j=0;j<$.quickFlip.wrappers[i].flipDivs.length;j++){$.quickFlip.wrappers[i].flipDivs[j].remove();}}};$.fn.quickFlip=function(options){this.each(function(){new $.quickFlip.init(options,this);});return this;};$.fn.whichQuickFlip=function(){function compare(obj1,obj2){if(!obj1||!obj2||!obj1.length||!obj2.length||obj1.length!=obj2.length){return FALSE;}var i=0;for(i=0;i<obj1.length;i++){if(obj1[i]!==obj2[i]){return FALSE;}}return true;}var out=NULL;var i=0;for(i=0;i<$.quickFlip.wrappers.length;i++){if(compare(this,$($.quickFlip.wrappers[i].wrapper))){out=i;}}return out;};$.fn.quickFlipper=function(options,nextPanel,repeater){this.each(function(){var $this=$(this),thisIndex=$this.whichQuickFlip();if(thisIndex==NULL){$this.quickFlip(options);thisIndex=$this.whichQuickFlip();}$.quickFlip.flip(thisIndex,nextPanel,repeater,options);});};})(jQuery);
/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function($){$.support.touch="ontouchend" in document;if(!$.support.touch){return;}var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,touchHandled;function simulateMouseEvent(event,simulatedType){if(event.originalEvent.touches.length>1){return;}event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent("MouseEvents");simulatedEvent.initMouseEvent(simulatedType,true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);
event.target.dispatchEvent(simulatedEvent);}mouseProto._touchStart=function(event){var self=this;if(touchHandled||!self._mouseCapture(event.originalEvent.changedTouches[0])){return;}touchHandled=true;self._touchMoved=false;simulateMouseEvent(event,"mouseover");simulateMouseEvent(event,"mousemove");simulateMouseEvent(event,"mousedown");};mouseProto._touchMove=function(event){if(!touchHandled){return;}this._touchMoved=true;simulateMouseEvent(event,"mousemove");};mouseProto._touchEnd=function(event){if(!touchHandled){return;}simulateMouseEvent(event,"mouseup");simulateMouseEvent(event,"mouseout");if(!this._touchMoved){simulateMouseEvent(event,"click");}touchHandled=false;};mouseProto._mouseInit=function(){var self=this;self.element.bind("touchstart",$.proxy(self,"_touchStart")).bind("touchmove",$.proxy(self,"_touchMove")).bind("touchend",$.proxy(self,"_touchEnd"));_mouseInit.call(self);};})(jQuery);function isImageOk(img){if(!img.complete){return false;}if(typeof img.naturalWidth!="undefined"&&img.naturalWidth===0){return false;}return true;}var Plugins;(function(Plugins){var AutosizeInputOptions=(function(){function AutosizeInputOptions(space){if(typeof space==="undefined"){space=0;}this.space=space;}return AutosizeInputOptions;})();Plugins.AutosizeInputOptions=AutosizeInputOptions;var AutosizeInput=(function(){function AutosizeInput(input,options){var _this=this;this._input=$(input);this._options=$.extend({},AutosizeInput.getDefaultOptions(),options);this._mirror=$('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>');$.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(i,val){_this._mirror[0].style[val]=_this._input.css(val);
});$("body").append(this._mirror);this._input.bind("keydown keyup input propertychange change",function(e){_this.update();});(function(){_this.update();})();}AutosizeInput.prototype.getOptions=function(){return this._options;};AutosizeInput.prototype.update=function(){var value=this._input.val()||"";if(value===this._mirror.text()){return;}this._mirror.text(value);var newWidth=this._mirror.width()+this._options.space;this._input.width(newWidth);};AutosizeInput.getDefaultOptions=function(){return this._defaultOptions;};AutosizeInput.getInstanceKey=function(){return"autosizeInputInstance";};AutosizeInput._defaultOptions=new AutosizeInputOptions();return AutosizeInput;})();Plugins.AutosizeInput=AutosizeInput;(function($){var pluginDataAttributeName="autosize-input";var validTypes=["text","password","search","url","tel","email","number"];$.fn.autosizeInput=function(options){return this.each(function(){if(!(this.tagName=="INPUT"&&$.inArray(this.type,validTypes)>-1)){return;}var $this=$(this);if(!$this.data(Plugins.AutosizeInput.getInstanceKey())){if(options===undefined){options=$this.data(pluginDataAttributeName);}$this.data(Plugins.AutosizeInput.getInstanceKey(),new Plugins.AutosizeInput(this,options));}});};})(jQuery);})(Plugins||(Plugins={}));(function($){$.fn.collidesWith=function(elements){var rects=this;var result=false;if(!rects||!elements){return false;}rects.each(function(){var rect=$(this);var rectOff=rect.offset();var rectMinX=rectOff.left;var rectMinY=rectOff.top;var rectMaxX=rectMinX+rect.width();var rectMaxY=rectMinY+rect.height();elements.not(rect).each(function(){var otherRect=$(this);
var otherRectOff=otherRect.offset();var otherRectMinX=otherRectOff.left;var otherRectMinY=otherRectOff.top;var otherRectMaxX=otherRectMinX+otherRect.width();var otherRectMaxY=otherRectMinY+otherRect.height();if(rectMinX>=otherRectMaxX||rectMaxX<=otherRectMinX||rectMinY>=otherRectMaxY||rectMaxY<=otherRectMinY){return true;}result=true;return false;});});return result;};})(jQuery);(function($){var $w=$(window);$.fn.visible=function(partial,hidden,directionIn){if(this.length<1){return;}var $t=this.length>1?this.eq(0):this,t=$t.get(0),vpWidth=$w.width(),vpHeight=$w.height(),direction=(directionIn)?directionIn:"both",clientSize=hidden===true?t.offsetWidth*t.offsetHeight:true;if(typeof t.getBoundingClientRect==="function"){var rec=t.getBoundingClientRect(),tViz=rec.top>=0&&rec.top<vpHeight,bViz=rec.bottom>0&&rec.bottom<=vpHeight,lViz=rec.left>=0&&rec.left<vpWidth,rViz=rec.right>0&&rec.right<=vpWidth,vVisible=partial?tViz||bViz:tViz&&bViz,hVisible=partial?lViz||rViz:lViz&&rViz;if(direction==="both"){return clientSize&&vVisible&&hVisible;}else{if(direction==="vertical"){return clientSize&&vVisible;}else{if(direction==="horizontal"){return clientSize&&hVisible;}}}}else{var viewTop=$w.scrollTop(),viewBottom=viewTop+vpHeight,viewLeft=$w.scrollLeft(),viewRight=viewLeft+vpWidth,offset=$t.offset(),_top=offset.top,_bottom=_top+$t.height(),_left=offset.left,_right=_left+$t.width(),compareTop=partial===true?_bottom:_top,compareBottom=partial===true?_top:_bottom,compareLeft=partial===true?_right:_left,compareRight=partial===true?_left:_right;if(direction==="both"){return !!clientSize&&((compareBottom<=viewBottom)&&(compareTop>=viewTop))&&((compareRight<=viewRight)&&(compareLeft>=viewLeft));
}else{if(direction==="vertical"){return !!clientSize&&((compareBottom<=viewBottom)&&(compareTop>=viewTop));}else{if(direction==="horizontal"){return !!clientSize&&((compareRight<=viewRight)&&(compareLeft>=viewLeft));}}}}};})(jQuery);(function(window,document,undefined){var _MAP={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"};var _KEYCODE_MAP={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var _SHIFT_MAP={"~":"`","!":"1","@":"2","#":"3","$":"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0","_":"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"};var _SPECIAL_ALIASES={"option":"alt","command":"meta","return":"enter","escape":"esc","plus":"+","mod":/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};var _REVERSE_MAP;for(var i=1;i<20;++i){_MAP[111+i]="f"+i;}for(i=0;i<=9;++i){_MAP[i+96]=i;}function _addEvent(object,type,callback){if(object.addEventListener){object.addEventListener(type,callback,false);return;}object.attachEvent("on"+type,callback);}function _characterFromEvent(e){if(e.type=="keypress"){var character=String.fromCharCode(e.which);if(!e.shiftKey){character=character.toLowerCase();}return character;}if(_MAP[e.which]){return _MAP[e.which];}if(_KEYCODE_MAP[e.which]){return _KEYCODE_MAP[e.which];}return String.fromCharCode(e.which).toLowerCase();}function _modifiersMatch(modifiers1,modifiers2){return modifiers1.sort().join(",")===modifiers2.sort().join(",");
}function _eventModifiers(e){var modifiers=[];if(e.shiftKey){modifiers.push("shift");}if(e.altKey){modifiers.push("alt");}if(e.ctrlKey){modifiers.push("ctrl");}if(e.metaKey){modifiers.push("meta");}return modifiers;}function _preventDefault(e){if(e.preventDefault){e.preventDefault();return;}e.returnValue=false;}function _stopPropagation(e){if(e.stopPropagation){e.stopPropagation();return;}e.cancelBubble=true;}function _isModifier(key){return key=="shift"||key=="ctrl"||key=="alt"||key=="meta";}function _getReverseMap(){if(!_REVERSE_MAP){_REVERSE_MAP={};for(var key in _MAP){if(key>95&&key<112){continue;}if(_MAP.hasOwnProperty(key)){_REVERSE_MAP[_MAP[key]]=key;}}}return _REVERSE_MAP;}function _pickBestAction(key,modifiers,action){if(!action){action=_getReverseMap()[key]?"keydown":"keypress";}if(action=="keypress"&&modifiers.length){action="keydown";}return action;}function _keysFromString(combination){if(combination==="+"){return["+"];}combination=combination.replace(/\+{2}/g,"+plus");return combination.split("+");}function _getKeyInfo(combination,action){var keys;var key;var i;var modifiers=[];keys=_keysFromString(combination);for(i=0;i<keys.length;++i){key=keys[i];if(_SPECIAL_ALIASES[key]){key=_SPECIAL_ALIASES[key];}if(action&&action!="keypress"&&_SHIFT_MAP[key]){key=_SHIFT_MAP[key];modifiers.push("shift");}if(_isModifier(key)){modifiers.push(key);}}action=_pickBestAction(key,modifiers,action);return{key:key,modifiers:modifiers,action:action};}function _belongsTo(element,ancestor){if(element===null||element===document){return false;}if(element===ancestor){return true;}return _belongsTo(element.parentNode,ancestor);
}function Mousetrap(targetElement){var self=this;targetElement=targetElement||document;if(!(self instanceof Mousetrap)){return new Mousetrap(targetElement);}self.target=targetElement;self._callbacks={};self._directMap={};var _sequenceLevels={};var _resetTimer;var _ignoreNextKeyup=false;var _ignoreNextKeypress=false;var _nextExpectedAction=false;function _resetSequences(doNotReset){doNotReset=doNotReset||{};var activeSequences=false,key;for(key in _sequenceLevels){if(doNotReset[key]){activeSequences=true;continue;}_sequenceLevels[key]=0;}if(!activeSequences){_nextExpectedAction=false;}}function _getMatches(character,modifiers,e,sequenceName,combination,level){var i;var callback;var matches=[];var action=e.type;if(!self._callbacks[character]){return[];}if(action=="keyup"&&_isModifier(character)){modifiers=[character];}for(i=0;i<self._callbacks[character].length;++i){callback=self._callbacks[character][i];if(!sequenceName&&callback.seq&&_sequenceLevels[callback.seq]!=callback.level){continue;}if(action!=callback.action){continue;}if((action=="keypress"&&!e.metaKey&&!e.ctrlKey)||_modifiersMatch(modifiers,callback.modifiers)){var deleteCombo=!sequenceName&&callback.combo==combination;var deleteSequence=sequenceName&&callback.seq==sequenceName&&callback.level==level;if(deleteCombo||deleteSequence){self._callbacks[character].splice(i,1);}matches.push(callback);}}return matches;}function _fireCallback(callback,e,combo,sequence){if(self.stopCallback(e,e.target||e.srcElement,combo,sequence)){return;}if(callback(e,combo)===false){_preventDefault(e);_stopPropagation(e);}}self._handleKey=function(character,modifiers,e){var callbacks=_getMatches(character,modifiers,e);
var i;var doNotReset={};var maxLevel=0;var processedSequenceCallback=false;for(i=0;i<callbacks.length;++i){if(callbacks[i].seq){maxLevel=Math.max(maxLevel,callbacks[i].level);}}for(i=0;i<callbacks.length;++i){if(callbacks[i].seq){if(callbacks[i].level!=maxLevel){continue;}processedSequenceCallback=true;doNotReset[callbacks[i].seq]=1;_fireCallback(callbacks[i].callback,e,callbacks[i].combo,callbacks[i].seq);continue;}if(!processedSequenceCallback){_fireCallback(callbacks[i].callback,e,callbacks[i].combo);}}var ignoreThisKeypress=e.type=="keypress"&&_ignoreNextKeypress;if(e.type==_nextExpectedAction&&!_isModifier(character)&&!ignoreThisKeypress){_resetSequences(doNotReset);}_ignoreNextKeypress=processedSequenceCallback&&e.type=="keydown";};function _handleKeyEvent(e){if(typeof e.which!=="number"){e.which=e.keyCode;}var character=_characterFromEvent(e);if(!character){return;}if(e.type=="keyup"&&_ignoreNextKeyup===character){_ignoreNextKeyup=false;return;}self.handleKey(character,_eventModifiers(e),e);}function _resetSequenceTimer(){clearTimeout(_resetTimer);_resetTimer=setTimeout(_resetSequences,1000);}function _bindSequence(combo,keys,callback,action){_sequenceLevels[combo]=0;function _increaseSequence(nextAction){return function(){_nextExpectedAction=nextAction;++_sequenceLevels[combo];_resetSequenceTimer();};}function _callbackAndReset(e){_fireCallback(callback,e,combo);if(action!=="keyup"){_ignoreNextKeyup=_characterFromEvent(e);}setTimeout(_resetSequences,10);}for(var i=0;i<keys.length;++i){var isFinal=i+1===keys.length;var wrappedCallback=isFinal?_callbackAndReset:_increaseSequence(action||_getKeyInfo(keys[i+1]).action);
_bindSingle(keys[i],wrappedCallback,action,combo,i);}}function _bindSingle(combination,callback,action,sequenceName,level){self._directMap[combination+":"+action]=callback;combination=combination.replace(/\s+/g," ");var sequence=combination.split(" ");var info;if(sequence.length>1){_bindSequence(combination,sequence,callback,action);return;}info=_getKeyInfo(combination,action);self._callbacks[info.key]=self._callbacks[info.key]||[];_getMatches(info.key,info.modifiers,{type:info.action},sequenceName,combination,level);self._callbacks[info.key][sequenceName?"unshift":"push"]({callback:callback,modifiers:info.modifiers,action:info.action,seq:sequenceName,level:level,combo:combination});}self._bindMultiple=function(combinations,callback,action){for(var i=0;i<combinations.length;++i){_bindSingle(combinations[i],callback,action);}};_addEvent(targetElement,"keypress",_handleKeyEvent);_addEvent(targetElement,"keydown",_handleKeyEvent);_addEvent(targetElement,"keyup",_handleKeyEvent);}Mousetrap.prototype.bind=function(keys,callback,action){var self=this;keys=keys instanceof Array?keys:[keys];self._bindMultiple.call(self,keys,callback,action);return self;};Mousetrap.prototype.unbind=function(keys,action){var self=this;return self.bind.call(self,keys,function(){},action);};Mousetrap.prototype.trigger=function(keys,action){var self=this;if(self._directMap[keys+":"+action]){self._directMap[keys+":"+action]({},keys);}return self;};Mousetrap.prototype.reset=function(){var self=this;self._callbacks={};self._directMap={};return self;};Mousetrap.prototype.stopCallback=function(e,element){var self=this;
if((" "+element.className+" ").indexOf(" mousetrap ")>-1){return false;}if(_belongsTo(element,self.target)){return false;}return element.tagName=="INPUT"||element.tagName=="SELECT"||element.tagName=="TEXTAREA"||element.isContentEditable;};Mousetrap.prototype.handleKey=function(){var self=this;return self._handleKey.apply(self,arguments);};Mousetrap.init=function(){var documentMousetrap=Mousetrap(document);for(var method in documentMousetrap){if(method.charAt(0)!=="_"){Mousetrap[method]=(function(method){return function(){return documentMousetrap[method].apply(documentMousetrap,arguments);};}(method));}}};Mousetrap.init();window.Mousetrap=Mousetrap;if(typeof module!=="undefined"&&module.exports){module.exports=Mousetrap;}if(typeof define==="function"&&define.amd){define(function(){return Mousetrap;});}})(window,document);jQuery.fn.putCursorAtEnd=function(){return this.each(function(){var $el=$(this),el=this;if(!$el.is(":focus")){$el.focus();}if(el.setSelectionRange){var len=$el.val().length*2;setTimeout(function(){el.setSelectionRange(len,len);},1);}else{$el.val($el.val());}this.scrollTop=999999;});};
/* Select2 4.0.13 | Translations | https://github.com/select2/select2/blob/master/LICENSE.md */
!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var e=jQuery.fn.select2.amd;}e.define("select2/i18n/fr",[],function(){return{errorLoading:function(){return"Les rsultats ne peuvent pas tre chargs.";},inputTooLong:function(e){var n=e.input.length-e.maximum;return"Supprimez "+n+" caractre"+(n>1?"s":"");},inputTooShort:function(e){var n=e.minimum-e.input.length;
return"Saisissez au moins "+n+" caractre"+(n>1?"s":"");},loadingMore:function(){return"Chargement de rsultats supplmentaires";},maximumSelected:function(e){return"Vous pouvez seulement slectionner "+e.maximum+" lment"+(e.maximum>1?"s":"");},noResults:function(){return"Aucun rsultat trouv";},searching:function(){return"Recherche en cours";},removeAllItems:function(){return"Supprimer tous les lments";}};}),e.define,e.require;}();!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var n=jQuery.fn.select2.amd;}n.define("select2/i18n/fi",[],function(){return{errorLoading:function(){return"Tuloksia ei saatu ladattua.";},inputTooLong:function(n){return"Ole hyv ja anna "+(n.input.length-n.maximum)+" merkki vhemmn";},inputTooShort:function(n){return"Ole hyv ja anna "+(n.minimum-n.input.length)+" merkki lis";},loadingMore:function(){return"Ladataan lis tuloksia";},maximumSelected:function(n){return"Voit valita ainoastaan "+n.maximum+" kpl";},noResults:function(){return"Ei tuloksia";},searching:function(){return"Haetaan";},removeAllItems:function(){return"Poista kaikki kohteet";}};}),n.define,n.require;}();!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var e=jQuery.fn.select2.amd;}e.define("select2/i18n/de",[],function(){return{errorLoading:function(){return"Die Ergebnisse konnten nicht geladen werden.";},inputTooLong:function(e){return"Bitte "+(e.input.length-e.maximum)+" Zeichen weniger eingeben";},inputTooShort:function(e){return"Bitte "+(e.minimum-e.input.length)+" Zeichen mehr eingeben";},loadingMore:function(){return"Lade mehr Ergebnisse";
},maximumSelected:function(e){var n="Sie knnen nur "+e.maximum+" Element";return 1!=e.maximum&&(n+="e"),n+=" auswhlen";},noResults:function(){return"Keine bereinstimmungen gefunden";},searching:function(){return"Suche";},removeAllItems:function(){return"Entferne alle Elemente";}};}),e.define,e.require;}();!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var e=jQuery.fn.select2.amd;}e.define("select2/i18n/nl",[],function(){return{errorLoading:function(){return"De resultaten konden niet worden geladen.";},inputTooLong:function(e){return"Gelieve "+(e.input.length-e.maximum)+" karakters te verwijderen";},inputTooShort:function(e){return"Gelieve "+(e.minimum-e.input.length)+" of meer karakters in te voeren";},loadingMore:function(){return"Meer resultaten laden";},maximumSelected:function(e){var n=1==e.maximum?"kan":"kunnen",r="Er "+n+" maar "+e.maximum+" item";return 1!=e.maximum&&(r+="s"),r+=" worden geselecteerd";},noResults:function(){return"Geen resultaten gevonden";},searching:function(){return"Zoeken";},removeAllItems:function(){return"Verwijder alle items";}};}),e.define,e.require;}();!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var e=jQuery.fn.select2.amd;}e.define("select2/i18n/da",[],function(){return{errorLoading:function(){return"Resultaterne kunne ikke indlses.";},inputTooLong:function(e){return"Angiv venligst "+(e.input.length-e.maximum)+" tegn mindre";},inputTooShort:function(e){return"Angiv venligst "+(e.minimum-e.input.length)+" tegn mere";},loadingMore:function(){return"Indlser flere resultater";
},maximumSelected:function(e){var n="Du kan kun vlge "+e.maximum+" emne";return 1!=e.maximum&&(n+="r"),n;},noResults:function(){return"Ingen resultater fundet";},searching:function(){return"Sger";},removeAllItems:function(){return"Fjern alle elementer";}};}),e.define,e.require;}();!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var n=jQuery.fn.select2.amd;}n.define("select2/i18n/sv",[],function(){return{errorLoading:function(){return"Resultat kunde inte laddas.";},inputTooLong:function(n){return"Vnligen sudda ut "+(n.input.length-n.maximum)+" tecken";},inputTooShort:function(n){return"Vnligen skriv in "+(n.minimum-n.input.length)+" eller fler tecken";},loadingMore:function(){return"Laddar fler resultat";},maximumSelected:function(n){return"Du kan max vlja "+n.maximum+" element";},noResults:function(){return"Inga trffar";},searching:function(){return"Sker";},removeAllItems:function(){return"Ta bort alla objekt";}};}),n.define,n.require;}();!function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd){var e=jQuery.fn.select2.amd;}e.define("select2/i18n/nb",[],function(){return{errorLoading:function(){return"Kunne ikke hente resultater.";},inputTooLong:function(e){return"Vennligst fjern "+(e.input.length-e.maximum)+" tegn";},inputTooShort:function(e){return"Vennligst skriv inn "+(e.minimum-e.input.length)+" tegn til";},loadingMore:function(){return"Laster flere resultater";},maximumSelected:function(e){return"Du kan velge maks "+e.maximum+" elementer";},noResults:function(){return"Ingen treff";},searching:function(){return"Sker";
},removeAllItems:function(){return"Fjern alle elementer";}};}),e.define,e.require;}();var DateDiff={inDays:function(d1,d2){var t2=d2.getTime();var t1=d1.getTime();return parseInt((t2-t1)/(24*3600*1000),10);},addOneWeek:function(date){return new Date(date.getTime()+(6*24*60*60*1000));},asMts:function(){return Math.round((new Date().getTime()-946681200000)/1000);},asMtsDay:function(date){return Math.round((date.getTime()-946681200000)/1000/86400);}};function onlyDigits(text){for(var i=text.length-1;i>=0;i--){var d=text.charCodeAt(i);if((d<48||d>57)&&d!=45){return false;}}return true;}function addCSToken(send,token){if(jQuery.isArray(send)){send.push({"name":"CSTT","value":""+token});return send;}if(typeof send==="object"&&send!==null){send["CSTT"]=""+token;return send;}return send+"&CSTT="+token;}function post4(url,send,ok,fail){return $.post(url,send).done(ok).fail(fail);}function post2(url,send,ok,fail){$.post(window.location,"CSTTG=gen").done(function(token){if(!onlyDigits(token)){alert("Invalid token code 65");console.log(token);return;}var xhr=$.post(url,addCSToken(send,token)).done(ok).fail(fail);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);fail(jqXHR,textStatus,errorThrown);});}function isEmpty(str){return(!str||0===str.length);}function toString(string){if(isEmpty(string)){return"";}return""+string;}function comma(string,add){if(isEmpty(string)){return add;}return", "+add;}function presentTwoDigits(value){if(value<10){return"0"+value;}return""+value;}function removeSpaces(value){return value.replace(/\s/g,"");}function removeHashFrom(url){if(isEmpty(url)){return url;}var index=url.indexOf("#",0);if(index>0){return url.substring(0,index);
}return url;}function setParam(keyValues,key,value,addto){key=encodeURI(key);value=encodeURI(value);if(keyValues===""){if(value===""){return"";}return key+"="+value;}var i=keyValues.length;var x;while(i--){x=keyValues[i].split("=");if(x[0]===key){if(addto){x[1]+=","+value;}else{x[1]=value;}if(value===""&&!addto){keyValues.remove(i);}else{keyValues[i]=x.join("=");}break;}}if(i<0){if(value!==""){keyValues[keyValues.length]=[key,value].join("=");}}return"";}function clearAllParam(keyValues,key){if(keyValues===""){return"";}key=encodeURI(key);var i=keyValues.length;var x;while(i--){x=keyValues[i].split("=");if(x[0]===key){keyValues.remove(i);}}return"";}var Qt={join:function(key,value,valueprefix){if(value===""||value===undefined){return"";}if(key===""){return"";}if(isEmpty(valueprefix)){return key+"="+value;}return key+"="+valueprefix+"."+value;},val:function(object){return encodeURIComponent($.trim(object.val()));},valCompact:function(object,isRemoveSpace){if(isRemoveSpace){return encodeURIComponent(removeSpaces(object.val()));}return encodeURIComponent($.trim(object.val()));},valText:function(object){return $.trim(object.val());}};function loadItem(key){if(!supports_html5_storage()){return"";}var found=window.localStorage.getItem(key);if(isEmpty(found)){return"";}return found;}function setItem(key,value){try{window.localStorage.setItem(key,value);}catch(ignore){}}function isCheck(input){return input.attr("type")=="radio"||input.attr("type")=="checkbox";}function isHidden(input){return input.attr("type")=="hidden"||input.attr("type")=="reset";}function updateQE(path,id,key){if(document.getElementById(id)){var value=document.getElementById(id).value;
if(isEmpty(value)){return;}setParam(path,key,value);}}function updateQClean(path,id,key){if(document.getElementById(id)){var value=toString(document.getElementById(id).value).replace(/[\\?&+]/g," ");if(isEmpty(value)){value=" ";}setParam(path,key,value);}}function updateQ(path,id,key){if(document.getElementById(id)){setParam(path,key,document.getElementById(id).value);}}function getV(id){var element=document.getElementById(id);if(element&&element.value){return element.value;}return"";}function getChecked(id){var element=document.getElementById(id);if(element&&element.checked){return element.checked;}return false;}var PageLock={init:function(){$(".pagelock").unbind("click").click(function(){PageLock.save();});},save:function(){setItem("PageLockTop",window.pageYOffset);},load:function(){var top=TEUtil.asInt(loadItem("PageLockTop"));if(top>0){window.scrollTo(0,top);}},restore:function(){PageLock.load();setItem("PageLockTop",0);}};var Stats3={enabled:false,call:function(name,mouseflowtag){if(!Stats3.enabled){return;}if(isEmpty(name)){return;}$.ajax(Stats3.url(),{type:"POST",data:Stats3.data(name),dataType:"html"});if(!isEmpty(mouseflowtag)){window._mfq=window._mfq||[];window._mfq.push(["setVariable",mouseflowtag,"1"]);}},url:function(name){var link=""+$("#linksdata").attr("data-linksbase");if(link=="no"){return"stats3/s.json";}var index=link.lastIndexOf("/");if(index>0){return link.substring(0,index)+"/"+urlPrefix()+"stats3/s.json";}return link;},data:function(name){var data=$("#linksdata");return"name="+name+"&sid="+data.attr("data-sid")+"&lang="+data.attr("data-lang");},};var TEObject={loadExpandObjectInfo:function(idAndType,next,fr){var idtype=toString(idAndType).split(".");
if(idtype.length!=2){return;}var sid=Qt.join("&sid",$("#linksdata").attr("data-sid"));var lang=Qt.join("&l",$("#linksdata").attr("data-lang"));var query=sid+lang;$.getJSON(urlPrefix()+"objects/"+idtype[0]+"/o.json?fr="+fr+"&types="+idtype[1]+query,function(data){TEObject.expandInfo(data,next);});},expandInfo:function(data,next){if(isEmpty(data)){return;}var items="";var images="";$.each(data,function(key,val){if(val.indexOf("http")===0){if(isImage(val)){images+='<a class="objectInfoItem clickable" target="_blank" href="'+val+'"> <span class="columnname">'+key+"</span>"+'<img class="objectimg" src="'+val+'" alt="'+val+'">'+" </a>";return;}items+='<a class="objectInfoItem clickable" target="_blank" href="'+val+'"> <span class="columnname">'+key+'</span><span class="underlinedlink">'+shortURL(val)+"</span></a>";return;}items+='<div class="objectInfoItem"> <span class="columnname">'+key+'</span><span class="pr">'+val+"</span></div>";});next.append('<div class="expandobjectinfo">'+items+'<br class="clearBoth">'+images+'<br class="clearBoth"></div>');}};var TEQuickZoom={init:function(){$(".jumpZoom").unbind("click").click(function(event){var day=$(this).parents(".weekDay");TEQuickZoom.zoomDay(day);return true;});},zoomDay:function(day){var week=day.parent();if(day.hasClass("zoomedIn")){$(".zoomedIn").removeClass("zoomedIn").css("width",toString(week.attr("data-weekdaywidth")));week.children(".weekDay").show();return false;}day.prevUntil("br").hide();day.nextUntil("br").hide();day.addClass("zoomedIn").css("width","100%").show();return true;}};var TEZoom={current:null,oneDay:false,on:false,week:null,picker:null,searchAfterZoom:false,moveTo:function(day){if(isEmpty(TEZoom.current)){TEZoom.update();
return;}TEZoom.current=day;TEZoom.update();},step:function(){if(!TEZoom.on){return 1;}return isEmpty(TEZoom.current)?7:1;},hide:function(){if(TEZoom.picker){TEZoom.picker.datepicker("hide");TEZoom.picker.focus();}},focusCurrent:function(){$(".ui-state-active").filter(":visible").first().focus();},init:function(){TEZoom.on=true;TEZoom.week=$("#leftresweek");TEZoom.picker=$("#leftresdate");var toggleDate=function(){if(TEZoom.picker.datepicker("widget").is(":visible")){TEZoom.picker.datepicker("hide");return;}TEZoom.picker.datepicker("show");TEZoom.focusCurrent();};TEZoom.picker.unbind("click").bind("click",toggleDate).unbind("keypress").bind("keypress",function(e){if(e.which==13){toggleDate(e);}});TEZoom.week.unbind("click").click(toggleDate);TEZoom.initZoom();},initZoom:function(){if(isEmpty(TEZoom.current)){TEZoom.update();return;}TEZoom.zoomDay($(".zoomT"+TEZoom.current),null,true);},disableOneDay:function(){if(!TEZoom.oneDay){return;}TEZoom.oneDay=false;waitObjectSelection();},zoom:function(target,toggle,alwaysZoomIn){if($("#objectselectionresult").attr("data-expandAll")!="t"){return false;}if($(target).hasClass("weekDayHeaderFirst")){var today=$(".dateIsTodayHeader:visible").parent();if(today.length>0){return TEZoom.zoomDay(today,toggle);}}return TEZoom.zoomDay($(target).closest(".weekDay"),toggle,alwaysZoomIn);},zoomOneDay:function(){if($("#objectselectionresult").attr("data-expandAll")!="t"){return false;}return TEZoom.zoomDay($(".weekDay:visible:first"),false);},zoomFirst:function(){if($("#objectselectionresult").attr("data-expandAll")!="t"){return false;}var today=$(".dateIsTodayHeader:visible").parent();
if(today.length>0){return TEZoom.zoomDay(today,toggle);}return TEZoom.zoomDay($(".weekDay:visible:first"),true);},zoomDay:function(day,toggle,alwaysZoomIn){if(day.length==0){return false;}var result=TEZoom.doZoomDay(day,toggle,alwaysZoomIn);if(day.hasClass("zoomedIn")){$(".weekZoomWeek").removeClass("zoomPressed").prop("checked",false).attr("aria-selected","false");$(".weekZoomDay").addClass("zoomPressed").prop("checked",true).attr("aria-selected","true");}else{$(".weekZoomWeek").addClass("zoomPressed").prop("checked",true).attr("aria-selected","true");$(".weekZoomDay").removeClass("zoomPressed").prop("checked",false).attr("aria-selected","false");}if(!$("#newResTimeDiv").is(":visible")){moveRes(null,$(day.context));}TEZoom.update();return result;},doZoomDay:function(day,toggle,alwaysZoomIn){var week=day.parent();if(day.hasClass("zoomedIn")&&!alwaysZoomIn){if(!toggle){return false;}day.removeClass("zoomedIn").css("width",week.attr("data-weekdaywidth"));week.children(".weekDay").show();TEZoom.current="";TEHeader.adjust();return false;}TEZoom.current=day.attr("data-day");week.children(".weekDay").hide();day.addClass("zoomedIn").css("width","100%").show();TEHeader.adjust();TEZoom.updateDatePicker();return true;},update:function(){if(!TEZoom.on){return;}if(ResTime.slot){var date=TEZoom.picker.datepicker("getDate");if(date&&date.getDay){TESlot.updateDrop(date.getDay());}}if(isEmpty(TEZoom.current)){if(!TEZoom.oneDay){TEZoom.picker.addClass("pickhide");TEZoom.week.show();}var date=TEZoom.picker.datepicker("getDate");if(!date.getDate){return;}var firstDay=TEZoom.picker.datepicker("option","firstDay");
if(firstDay==1&&date.getDay()==0){firstDay=-6;}date.setDate(date.getDate()-date.getDay()+firstDay);var endDate=new Date(date);endDate.setDate(date.getDate()+6);var sameMonth=$.datepicker.formatDate("M",date)==$.datepicker.formatDate("M",endDate);TEZoom.week.html($.datepicker.formatDate((sameMonth?"d":"d M"),date)+" - "+$.datepicker.formatDate("d M",endDate));return;}var date=$.datepicker.parseDate("yymmdd",TEZoom.current);if(date){var dateFormat=TEZoom.picker.datepicker("option","dateFormat");TEZoom.week.html($.datepicker.formatDate(dateFormat,date));return;}TEZoom.week.hide();TEZoom.picker.removeClass("pickhide");},updateDatePicker:function(){var date=parseDate(TEZoom.current);if(!isEmpty(date)){TEZoom.picker.datepicker("setDate",date);}}};var TEHeader={adjust:function(){TEHeadline.adjust();adjustHeaderPadder();}};var TELanguage={SECOND_FIELD:"f2",nextID:0,columns:{},clearCache:false,isReminderMail:false,fill:function(key,name,input,target){if(target!==TELanguage.SECOND_FIELD){input.addClass("te_lang tooltip");}if(!TELanguage.columns){return;}var list=TELanguage.columns[key];if(!list){return;}if(!list.cl){return;}var data=list.cl;var id=toString(toString(input.attr("name")).substring((key+name+"_").length));if(isEmpty(id)){return;}for(var i=0;i<data.length;i++){var item=data[i];var position=item.k+"_"+i;if(position!==id){continue;}if(target===TELanguage.SECOND_FIELD){input.val(toString(item[target]));continue;}for(var entry in item[target]){input.attr("data-lang_"+entry,TELanguage.encode(toString(item[target][entry])));}}},init:function(){var original=$(".te_langdrop:first");
$(".te_lang").each(function(index,target){var input=$(target);if(input.parent().hasClass("te_langwrap")){return;}var drop=original.clone();input.wrap('<div class="te_langwrap tooltip"></div>');input.after(drop);input.unbind("blur").blur(function(){input.attr("data-lang_"+drop.val(),TELanguage.encode(input.val()));TELanguage.updateTip(input);});TELanguage.initDrop(input,drop);var empty=TELanguage.updateTip(input);if(empty&&!isEmpty(input.val())){input.attr("data-lang_"+drop.val(),TELanguage.encode(input.val()));TELanguage.updateTip(input);}var text=TELanguage.dropVal(input,drop).trim();if(!isEmpty(text)){input.val(text);}});},encode:function(text){return TEUtil.replaceAll(text,'"',"$$");},decode:function(text){return TEUtil.replaceAll(text,"$$",'"');},dropVal:function(input,drop){return TELanguage.decode(toString(input.attr("data-lang_"+drop.val())));},initDrop:function(input,drop){drop.unbind("change").change(function(){input.val(TELanguage.dropVal(input,drop));});},updateTip:function(input){var first=input[0];if(!first.dataset){input.parent().attr("data-tip","No dataset");return;}var tip=[];for(var key in first.dataset){tip.push(toString(key.substring(5).toUpperCase())+": "+TELanguage.decode(input.attr("data-"+key)));}tip.sort();input.parent().attr("data-tip",tip.join("\n"));return tip.length==0;},reloadTypes:function(text){var ok=confirm(""+text+"?");if(ok){TELanguage.clearCache=true;}return ok;},runReminderMail:function(text){var ok=confirm(""+text+"?");if(ok){TELanguage.isReminderMail=true;}return ok;},confirmPost:function(target,action,text,event){if(!confirm(""+text)){return false;
}return TELanguage.post2(target,action,event);},post2:function(target,action,event){return TELanguage.post(target,action,event,true);},post:function(target,action,event,useSubmit){var extra=[];$(target).addClass("saveanimation");if(TELanguage.isReminderMail){extra.push({name:"runReminderMail",value:"runReminderMail"});}if(TELanguage.clearCache){extra.push({name:"clearCache",value:"clearCache"});}if(event&&event.submitter){if($(event.submitter).attr("name")=="clearCache"){extra.push({name:"clearCache",value:"clearCache"});}if($(event.submitter).attr("name")=="runReminderMail"){extra.push({name:"runReminderMail",value:"runReminderMail"});}}var form=$(target);var base=form.serializeArray();if(base.length==0){form=form.parent();base=form.serializeArray();}form.find(".te_lang").each(function(index,target){if(!target.dataset){return;}var input=$(target);for(var key in target.dataset){extra.push({name:input.attr("name")+"_"+toString(key),value:toString(input.attr("data-"+key))});}});if(!isEmpty(toString(action))){extra.push({name:toString(action),value:toString(action)});}$("#adminsave").addClass("saveanimation");var send=base.concat(extra).concat({name:"CSTTG",value:"gen"});var post=$.post(window.location,send).done(function(tokenNew){var send=base.concat(extra).concat({name:"CSTT",value:""+tokenNew});if(useSubmit){$(".tokenInfo").remove();form.append('<input class="tokenInfo" type="hidden" name="CSTT" value="'+tokenNew+'">');form.append('<input class="tokenInfo" type="hidden" name="'+action+'" value="'+action+'">');form.submit();return;}var post=$.post(window.location,send).done(function(data){var url=toString(form.attr("action"));
if(isEmpty(url)){window.location.reload(true);return;}window.location=replaceUrlParam(url,"nocache",new Date().getTime());}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,form);$(target).removeClass("saveanimation");});}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,form);$(target).removeClass("saveanimation");});return false;},change:function(name,url){if(isEmpty(name)){return;}document.cookie="TimeEditLanguage="+name+";path=/";if(isEmpty(url)){window.location.reload(true);return;}window.location=url;}};var TEHeadline={size:-1,adjust:function(){var e=$(".headlinebottom2:visible");if(e.length<1){return;}var c=$(e[0]);if(TEHeadline.size<0){TEHeadline.size=c.children().first().width()+5;}TEHeadline.text(e,c.width()>TEHeadline.size);TEHeadline.bottom(c);},bottom:function(c){var bottom=c.find(".hourtop:first");if(bottom.length<1){return;}var width=bottom.width();if(width<8){$("#contents").addClass("hourlisttopsmaller");return;}if(width<13){$("#contents").addClass("hourlisttopsmall");return;}$("#contents").removeClass("hourlisttopsmall hourlisttopsmaller");},text:function(list,longA){list.each(function(index,item){var bottom=$(item);var span=bottom.children().first();if(isEmpty(bottom.attr("data-long"))){bottom.attr("data-long",span.html());}span.html(longA?bottom.attr("data-long"):bottom.attr("data-short"));});}};var TESlot={current:null,move:function(drop,end){if(drop.length==0){return;}var mapper=function(option){var times=option.value.split("-");var start=times[0].split(":");return parseInt(start[0])*60+parseInt(start[1]);
};var time=end?ResTime.end():ResTime.start();return TEUtil.closestOption(drop[0],mapper,time);},jump:function(drop,end){if(drop.length==0){return;}drop.val(TESlot.move(drop,end).value);},jumpAndUpdate:function(drop,end,moveEnd){TESlot.jump(drop,end);if(!TEReserve){return;}TEReserve.timeSlotChanged(drop,null,moveEnd);},updateDrop:function(dayNr){$(".timeslotdrop").hide();var slots=$(".slotday"+dayNr);slots.show();TESlot.current=slots.first();ResTime.fixSlot();}};var TEUtil={strip:function(text){var result=(""+text).replace(/(<([^>]+)>)/gi,"");return TEUtil.replaceAll(result,"="," ");},replaceAll:function(string,search,replace){return string.split(search).join(replace);},open:function(e,url){if(isEmpty(url)){return;}stop(e);var redirectWindow=window.open(""+url,"_blank");redirectWindow.location;Stats3.call("open");return false;},asInt:function(value){var result=parseInt(value,10);return isNaN(result)?0:result;},asFloat:function(value){var result=parseFloat(toString(value).replace(/,/g,"."));return isNaN(result)?0:result;},asSafeId:function(value){return(""+value).replace(/,/g,"_");},firstResult:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]){var found=arguments[i]();if(!isEmpty(found)){return found;}}}},sameBaseURL:function(first,second){return TEUtil.toFirstSlash(""+first)===TEUtil.toFirstSlash(""+second);},toFirstSlash:function(string){return string.substring(0,string.lastIndexOf("/")+1);},asId:function(id){return(""+id).replace(/\./g,"-").replace(/\,/g,"-");},typesFromIds:function(ids){return $.map(toString(ids).split(","),function(val,i){var split=toString(val).split(".");
if(split.length==2){return split[1];}return null;});},arrayMove:function(array,fromIndex,toIndex){var element=array[fromIndex];array.splice(fromIndex,1);array.splice(toIndex,0,element);},asTD:function(data,length){var items="";var first=length>1?' class="firstobject"':"";$.each(data,function(key,val){var valueTD="<td>"+val+"</td>";if(val.indexOf("http")===0){valueTD='<td class="clickobjectwrap"><a class="underlinedlink2 clickable clickobject"  target="_blank" href="'+val+'">'+val+"</a></td>";}items+="<tr"+first+'><td class="columnname">'+key+"</td>"+valueTD+"</tr>";first="";});return items;},blank:function(list,items){var len2=items.length;for(var i=0,len=list.length;i<len;++i){for(var j=0;j<len2;++j){if(list[i]===items[j]){list[i]="";}}}},addAll:function(list,items){if(!list){return;}if(!items){return;}if(!items.length){return;}for(var i=0,len=items.length;i<len;++i){list.push(items[i]);}},joinIfPresent:function(items,sep){return $.map(items,function(val){return val&&val.length>0?val:undefined;}).join(sep);},firstText:function($elem){var done=false;var text="";$elem.contents().filter(function(index,target){if(!done&&target.nodeType==Node.TEXT_NODE){text=target.nodeValue;done=true;}});return text;},setText:function($elem,text){var done=false;$elem.contents().filter(function(index,target){if(!done&&target.nodeType==Node.TEXT_NODE){target.nodeValue=text;done=true;}});},closest:function(theArray,goal){var closest=null;$.each(theArray,function(){if(closest==null||Math.abs(this-goal)<Math.abs(closest-goal)){closest=this;}});return closest;},closestOption:function(select,mapper,goal){var closest=null;
$.each(select.options,function(){if(closest==null||Math.abs(mapper(this)-goal)<Math.abs(mapper(closest)-goal)){closest=this;}});return closest;},prefix:function(prefix,text){return isEmpty(text)?text:prefix+text;},presentList:function(list,max,prefix){if(list.length==0){return"";}if(list.length>max){return prefix+list.slice(0,max).join(", ")+" + "+(list.length-max);}return prefix+list.join(", ");}};var TEError={scrollTop:function(){$("html, body").animate({scrollTop:0},"fast");},isHTMLStart:function(text){if(!text){return false;}return text.indexOf("<!DOCTYPE")===0;},print:function(e){if(!e){return"-";}var message="";if(e.message){message+=e.message;}if(e.stack){message+=" | stack: "+e.stack;}return message;},asText:function(xhr,e,exception){if(console&&console.log){console.log("TEError:");console.log(xhr);console.log(e);console.log(exception);}if(typeof xhr!=="object"){if(!exception){return""+xhr;}return xhr+" "+exception;}if(console&&console.log){console.log(xhr.responseText);}if(TEError.isHTMLStart(xhr.responseText)&&exception){return""+exception;}if(TEError.isHTMLStart(xhr.responseText)&&xhr.status&&xhr.status==412){return"You are logged out. Please reload this page.";}try{var info=JSON.parse(xhr.responseText);if(info.messages&&$.isArray(info.messages)){return info.messages[info.messages.length-1]+".";}}catch(e){}if(!isEmpty(exception)){return""+exception;}var message="";if(xhr.readyState===0){message="ReadyState 0 ";}return message+xhr.responseText+" \n [Status: "+xhr.status+" - "+xhr.statusText+(e?" Error: "+e:"")+" "+TEError.print(exception)+" readyState = "+xhr.readyState+"]";
},show:function(xhr,text,errorThrown,origin){var message=TEError.asText(xhr,origin,errorThrown);if(xhr.status==412){var last=loadItem("reload412");if(last!=null){var diff=Math.abs(new Date().getTime()-last);if(diff<10000){return message;}}setItem("reload412",new Date().getTime());alert(message+" \nReloading page.");window.location.reload(true);return message;}if(xhr.status==504){alert("This operation will take a long time to complete. \nReload page to see the progress.");window.location.reload(true);return message;}TEError.showMessage(message,origin);return message;},showMessage:function(message,origin){var title=message;var content="";var index=message.indexOf(". ");if(index>0){title=message.substr(0,index);content=message.substr(index+1);}$("#ajaxError").html("<b>"+title+'</b><p class="smallhelp columnpre">'+content+' \n <input type="button" class="continueRes" value="Ok" onClick="return window.location.reload()">'+"</p>").show();TEError.scrollTop();if(origin){origin.removeClass("loading");}},saveMessage:function(content){setItem("TELastMessage",toString(content));},loadMessage:function(){var content=toString(loadItem("TELastMessage"));if(isEmpty(content)){return;}TEError.saveMessage("");var box=$("#ajaxError");box.html('<div class="dialog textwrap">'+content+"</div>");$(".plan-close").clone().appendTo(box.find(".textwrap"));$(".plan-close").click(function(e){stop(e);$("#ajaxError").slideUp();});TEError.scrollTop();box.slideDown();},showFade:function(content){if(isEmpty(content)){return;}$("#ajaxError").stop(true,true).html(content).fadeIn(1000).delay(10000).fadeOut(5000);
TEError.scrollTop();}};var Multicheck={copyTime:false,commonRow:false,changing:false,findType:function(wrap,type){var first=wrap.find(".multicheck:checked:first");var found=first.parent().parent().next().children(".resobjectsearch:first").attr("data-type");if(!isEmpty(found)){return found;}return type;},init:function(wrap){var multichecktoggle=wrap.find(".multichecktoggle");multichecktoggle.click(function(e){multichecktoggle.toggleClass("xpressed");wrap.toggleClass("multicheckshow");if(!wrap.hasClass("multicheckshow")){wrap.find(".multicheck:checked").removeAttr("checked");wrap.find(".trchecked").removeClass("trchecked");Multicheck.updateCount(wrap);}});wrap.find(".multicheck").click(function(e){if(e.stopPropagation){e.stopPropagation();}var current=$(getTarget(e));var td=current.parent().parent();var newValue=current.is(":checked");Multicheck.styleRow(td,newValue);if(td.hasClass("noexpand")){Multicheck.updateCount(wrap);return;}var target=$("."+td.attr("data-level"));Multicheck.change(target,newValue);Multicheck.updateCount(wrap);});},updateCount:function(wrap){var all=wrap.find(".trchecked");var length=all.length;var tds=all.find(".editdesc:not(.sum)");var hours=0;tds.each(function(index){var row=$(this);if(row.attr("data-c")!="-4"){return;}hours+=TEUtil.asFloat(row.attr("data-value"));});var text=length>0?length+" "+wrap.find(".markedrowcount").attr("data-marked"):""+wrap.find(".markedrowcount").attr("data-none");wrap.find(".markedrowcount").text(text);var explain=wrap.find(".multideleteexplain");explain.attr("data-explain",text+" \n"+hours+" "+explain.attr("data-hourexplain"));
},styleRow:function(td,newValue){if(newValue){td.parent().addClass("trchecked");return;}td.parent().removeClass("trchecked");},change:function(target,newValue){if(!target){return;}if(target.length===0){return;}target.each(function(index,value){var td=$(value).children().eq(1);Multicheck.styleRow(td,newValue);td.find(".multicheck").prop("checked",newValue);var target=$("."+td.attr("data-level"));Multicheck.change(target,newValue);});},collect:function(target,result){if(!target){return result;}if(target.length===0){return result;}target.each(function(index,value){var td=$(value).children().first();TEUtil.addAll(result,td.find("input.multicheck"));var target=$("."+td.attr("data-level"));Multicheck.collect(target,result);});return result;},findValues:function(wrap){var values=[];wrap.find(".multicheck:checked").each(function(){var current=$(this);var target=$("."+current.parent().parent().attr("data-level"));var result=Multicheck.collect(target,[]);TEUtil.addAll(values,current.val().split(","));$.each(result,function(index,e){if(!e.checked){TEUtil.blank(values,$(e).val().split(","));}});});return TEUtil.joinIfPresent(values,",");}};var IdSet={changeSearch:function(idents,ids){var current=idents.split(",");if(!this.hasKey(this.getTypes(current),ids)){return{changed:false,ids:current};}this.removeAll(ids,current);if(ids.length<1){return{changed:false,ids:current};}return{changed:true,ids:ids};},merge:function(ids,other){if(isEmpty(other)){return ids;}var array=IdSet.asArray(ids).concat(IdSet.asArray(other));return $.grep(array,function(element,index){return index===$.inArray(element,array);
});},asArray:function(ids){return jQuery.isArray(ids)?ids:ids.split(",");},hasKey:function(set,ids){for(var i=0;i<ids.length;i++){if(set.hasOwnProperty(ids[i].split(".")[1])){return true;}}return false;},removeAll:function(ids,elements){for(var i=0;i<elements.length;i++){this.remove(ids,elements[i]);}},remove:function(list,id){for(var i=0;i<list.length;i++){if(list[i]===id){list.remove(i,i);}}return false;},getTypes:function(ids){var types={};for(var i=0;i<ids.length;i++){types[ids[i].split(".")[1]]=true;}return types;},types:function(ids){var types=[];for(var i=0;i<ids.length;i++){if(isEmpty(ids[i])){continue;}types.push(ids[i].split(".")[1]);}return types;},filterOnType:function(ids,types){if(types.length===0){return ids;}var result=[];for(var i=0;i<ids.length;i++){var type=ids[i].split(".")[1];if(jQuery.inArray(type,types)!==-1){result.push(ids[i]);}}return result;},containsSome:function(array,some){for(var i=0;i<some.length;i++){if(jQuery.inArray(some[i],array)!==-1){return true;}}return false;}};function NavTable(jppIn){var jpp=jppIn;var table=null;var td=null;var reset=function(target){table=null;td=null;init(target);};var needInit=function(e){if(!e){return true;}return e.length===0;};var init=function(target){if(planloading){return;}if(!target){return;}if(needInit(table)){table=target.children(".sandtable");if(needInit(table)){table=target.children(".persontile").children(".sandtable");}}if(needInit(td)){var pos=load().split(",");if(pos.length==2){var tr=table.find("tr:eq("+pos[1]+")");var p=tr.find("td:eq("+pos[0]+")");if(p.length>0&&isVaildTd(p)){table.find(".pos").removeClass("pos");
td=p;}}if(!td){td=table.find(".rowedit:first");}td.addClass("pos");}};var isVaildTd=function(newPos){return newPos.hasClass("rowedit")&&newPos.is(":visible");};var moveTo=function(target,newPos){init(target);updateTd(newPos);};var move=function(target,run){init(target);var newPos=run(td);if(newPos.length===0){return;}if(!newPos.hasClass("rowedit")||!newPos.is(":visible")){for(var i=0;i<100;i++){if(isVaildTd(newPos)){break;}newPos=run(newPos);if(newPos.length===0){return;}}}updateTd(newPos);};var updateTd=function(newPos){if(!newPos.hasClass("rowedit")||!newPos.is(":visible")){return;}var rowId=newPos.attr("data-id");if(!isEmpty(rowId)&&rowId!="-2"){if(sideinfo.is(":visible")){TEPlan.loadSidePanel("rowid="+rowId,true,newPos);}}td.removeClass("pos");td=newPos;td.addClass("pos");scrollToTd();save(td.index()+","+td.parent().index());};var scrollToTd=function(){if(td.visible(false,false,"vertical")){return;}var top=0;if(td.offset().top-$(window).scrollTop()<0){top=$(window).scrollTop()-td.height()*4;}else{top=td.offset().top-window.innerHeight+td.height()*6;}$("html,body").stop(true,true).animate({scrollTop:top},100);};var save=function(data){if(!supports_html5_storage()){return;}setItem("plan_key_"+objectSearcherFF+"_"+jpp,data);};var load=function(data){if(!supports_html5_storage()){return"";}return toString(window.localStorage.getItem("plan_key_"+objectSearcherFF+"_"+jpp));};var moveUp=function(target){move(target,function(cell){return cell.parent().prev().find("td:eq("+cell.index()+")");});};var moveDown=function(target){move(target,function(cell){return cell.parent().next().find("td:eq("+cell.index()+")");
});};var moveLeft=function(target){move(target,function(cell){return cell.prev(":visible");});};var moveRight=function(target){move(target,function(cell){return cell.next(":visible");});};var deleteOrder=function(target){init(target);var id=td.attr("data-id");if(isEmpty(id)){return;}if(id=="-2"){return;}var send="kind=plan&action=deletemanyrows&id="+id;var load=table.parent().parent();load.addClass("loading");var jqxhr=$.post(window.location,send).done(function(data){reloadpage(table);}).fail(function(jqXHR,textStatus,errorThrown){load.removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown);});};var removeText=function(target){init(target);if(td.attr("data-c")!="-1"){return;}var id=td.attr("data-id");if(isEmpty(id)){return;}if(id=="-2"){return;}var send="kind=plan&action=savetext&c=-1&id="+id+"&rawtext= ";var load=table.parent().parent();load.addClass("loading");var jqxhr=$.post(window.location,send).done(function(data){reloadpage(table);}).fail(function(jqXHR,textStatus,errorThrown){load.removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown);});};var enter=function(target){init(target);td.click();};var add=function(target){init(target);if(navTables.isEditVisible()){navTables.editoverlayHide();return;}td.parent().children(".quickmultiadd:first").children(".quickmultiadd:first").click();};var toggle=function(target){init(target);var t=td.parent().first().children(".levelExpand");if(t.hasClass("resobjectsearch")){return;}t.click();};return{reset:reset,moveUp:moveUp,moveDown:moveDown,moveLeft:moveLeft,moveRight:moveRight,enter:enter,add:add,deleteOrder:deleteOrder,removeText:removeText,moveTo:moveTo,toggle:toggle};
}var searchTables={action:function(act){if(!act){return;}var pos=$("#objectsearchresult").children(".pos");act(pos);},update:function(pos,newPos){if(pos.length===0){$("#objectsearchresult").children(":first").addClass("pos");return;}if(newPos.length===0){return;}if(!newPos.hasClass("searchObject")){return;}pos.removeClass("pos");newPos.addClass("pos");},up:function(pos){searchTables.update(pos,pos.prev());},down:function(pos){searchTables.update(pos,pos.next());},left:function(pos){var id=pos.attr("data-id");if(isEmpty(id)){return;}$("#objectbasket").children('[data-id="'+id+'"]').children(".basketItemRemove").click();},right:function(pos){pos.click();}};var MultiAdd={length:0,init:function(){},reset:function(){Multicheck.copyTime=false;Multicheck.commonRow=false;$(".plango").removeClass("multishow");$("#objectbasketgo").removeClass("helpunder");},update:function(ids){if(!ObjectsSearcher.multiAdd){return;}if(ids){MultiAdd.length=ids.length;}if(isEmpty(ObjectsSearcher.name)){$(".plango").addClass("multishow");$("#objectbasketgo").addClass("helpunder");var suffix=ids.length>1?"s":"";$("#objectbasketgo").val(toString($("#plandata").attr("data-namerow"+suffix)));if(ids.length>0){$("#objectbasketgo").removeAttr("disabled");}else{$("#objectbasketgo").attr("disabled","disabled");}if(ids.length>1){$("#planbasketcopy, #planbasketcommon").removeAttr("disabled");}else{$("#planbasketcopy, #planbasketcommon").attr("disabled","disabled");}}}};var navTables={coursewrap:new NavTable(1),workhourswrap:new NavTable(2),persontilewrap:new NavTable(3),currentwrapTarget:null,over:null,clearOver:function(){if(!navTables.over){return;
}navTables.over.removeClass("hinfoover");navTables.over=null;},wrap:function(){if(navTables.currentwrapTarget==null){navTables.currentwrapTarget=$("#coursewrap");}return navTables.currentwrapTarget;},updateWrapTarget:function(panel){if(panel=="plantab2"){navTables.currentwrapTarget=$("#workhourswrap");return;}if(panel=="plantab3"){navTables.currentwrapTarget=$("#persontilewrap");return;}var nr=parseInt(toString(toString(panel).substring("plantab".length)),10);if(nr>=10){navTables.currentwrapTarget=$("#planwrap"+nr);return;}navTables.currentwrapTarget=$("#coursewrap");},editoverlay:null,editoverlayHide:function(){navTables.clearCurrentEdit();navTables.editoverlay.hide();moveSearchDivBack();$(".l2object").addClass("hidden");},isEditVisible:function(){if(!navTables.editoverlay){return false;}return navTables.editoverlay.is(":visible");},isBlockReload:function(){return navTables.currentEdit!==null;},currentEdit:null,clearCurrentEdit:function(){navTables.clearOver();$("#plan-dialog").hide();if(!navTables.currentEdit){$(".sandheaderclick").removeClass("hinfoover");}if(navTables.currentEdit){navTables.currentEdit.removeClass("hinfoover h2key");navTables.currentEdit.find(".nrmini").hide();if(navTables.currentEdit.restore){navTables.currentEdit.restore();}navTables.currentEdit=null;}if(sideinfo){sideinfo.find(".orinfoextra").addClass("hidden");}},changeFocus:function(e){stop(e);var go=$("#objectbasketgo");if(go.is(":focus")){$("#ffsearchname").focus();return;}go.focus();},blur:function(e,action,second,searchAction,combo){var target=$(getTarget(e));var isInput=target.hasClass("ffinput");
if(isInput||navTables.isEditVisible()){if(!isInput&&combo!=="enter"){stop(e);}searchTables.action(searchAction);return;}if(!target.hasClass("tdedit")){action(e);if(navTables.currentEdit){navTables.currentEdit.addClass("h2key");}return false;}if(target.parent().hasClass("desc")){if(e.keyCode==37||e.keyCode==39||e.keyCode==32){return false;}}if(second){second(e);}navTables.savekeypressed(e);navTables.clearCurrentEdit();return true;},edit:function(e,action,combo){var target=$(getTarget(e));if(target.hasClass("tdedit")){return;}navTables.fixFocus=true;action(e);if(navTables.currentEdit){navTables.currentEdit.addClass("h2key");var td=navTables.currentEdit.children(".tdedit");td.val(combo);navTables.moveCursor(td,combo.length);}},copyText:function(e,action,combo,overwrite){var target=$(getTarget(e));if(target.hasClass("tdedit")){return;}navTables.fixFocus=true;action(e);if(!navTables.currentEdit){return;}navTables.currentEdit.addClass("h2key");var element=navTables.currentEdit.children(".tdedit");if(element.length<=0){return;}var input=element[0];if(!input.setSelectionRange){return;}if(overwrite){input.focus();try{document.execCommand("paste");navigator.clipboard.readText().then(function(clipText){$(input).val(clipText);});}catch(ignore){}return;}input.select();input.setSelectionRange(0,99999);document.execCommand("copy");var td=navTables.currentEdit;td.addClass("copytext");setTimeout(function(){td.removeClass("copytext");},800);navTables.clearCurrentEdit();return;},moveCursor:function(element,offset){if(element.length<=0){return;}var input=element[0];if(input.setSelectionRange){input.setSelectionRange(offset,offset);
return;}if(input.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveEnd("character",offset);range.moveStart("character",offset);range.select();}},fixSelect:function(element){if(!navTables.fixFocus){return;}navTables.fixFocus=false;if(element.length<=0){return;}var input=element[0];if(input.setSelectionRange){input.setSelectionRange(0,0);}else{if(input.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveEnd("character",0);range.moveStart("character",0);range.select();}}},initKeys:function(e){Sorter.init();var content=$("#contents");$(document).keydown(function(e){if(!content.hasClass("keydown")){content.addClass("keydown");}waitForFinalEvent(function(){content.removeClass("keydown");},5000,"navTablesKey");});Mousetrap.bind(["-","0","1","2","3","4","5","6","7","8","9","x","a","b","d","e","f"],function(e,combo){if($("#searchDiv").is(":visible")){return;}navTables.edit(e,navTables.enter,combo);});Mousetrap.bind(["c"],function(e,combo){if($("#searchDiv").is(":visible")){return;}if(navTables.currentEdit){return;}navTables.copyText(e,navTables.enter,combo,false);});Mousetrap.bind(["v"],function(e,combo){if($("#searchDiv").is(":visible")){return;}if(navTables.currentEdit){return;}navTables.copyText(e,navTables.enter,combo,true);});Mousetrap.bind(["meta+del","meta+backspace"],function(e,combo){navTables.deleteOrder(e);});Mousetrap.bind(["backspace"],function(e,combo){if(navTables.currentEdit){return;}navTables.removeText(e);});Mousetrap.bind("h",function(e,combo){if(navTables.currentEdit){navTables.edit(e,navTables.enter,combo);
return;}$("#shortcuts").click();});Mousetrap.bind("+",function(e,combo){navTables.add(e);});Mousetrap.bind("up",function(e,combo){navTables.blur(e,navTables.moveUp,navTables.moveUp,searchTables.up);});Mousetrap.bind("down",function(e,combo){navTables.blur(e,navTables.moveDown,navTables.moveDown,searchTables.down);});Mousetrap.bind(["left","shift+tab"],function(e,combo){navTables.blur(e,navTables.moveLeft,navTables.moveLeft,searchTables.left);});Mousetrap.bind(["right","tab"],function(e,combo){navTables.blur(e,navTables.moveRight,navTables.moveRight,searchTables.right);});Mousetrap.bind("enter",function(e,combo){navTables.blur(e,navTables.enter,navTables.moveDown,null,combo);});Mousetrap.bind("space",function(e,combo){navTables.blur(e,navTables.toggle,navTables.toggle);});},findTarget:function(e){stop(e);return $("#plantabs").children(".plantab:not(.ui-tabs-hide)").children("div");},lookUp:function(target){var result=navTables[target.attr("id")];if(!result){result=new NavTable(11);navTables[target.attr("id")]=result;}return result;},reinit:function(target){if(!target.attr("id")){return;}navTables.lookUp(target).reset(target);},deleteOrder:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).deleteOrder(target);},removeText:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).removeText(target);},add:function(e){if($(getTarget(e)).hasClass("sandinputtext")){return;}var target=navTables.findTarget(e);navTables.lookUp(target).add(target);},moveUp:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).moveUp(target);},moveDown:function(e){var target=navTables.findTarget(e);
navTables.lookUp(target).moveDown(target);},moveLeft:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).moveLeft(target);},moveRight:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).moveRight(target);},enter:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).enter(target);},toggle:function(e){var target=navTables.findTarget(e);navTables.lookUp(target).toggle(target);},moveTo:function(e,newTd){var target=navTables.findTarget(e);navTables.lookUp(target).moveTo(target,newTd);},savekeypressed:function(e){var target=$(getTarget(e));if(target.parent().hasClass("rowadd")||target.parent().hasClass("rowedit")){navTables.saverow(target.parent(),target.val());return;}var id=target.parent().attr("data-button");if(isEmpty(id)){return;}$("#"+id).val(target.val());$("#b"+id).click();},copysingelrow:function(e){stop(e);var element=$(getTarget(e));var send="kind=plan&action=savetext&c=-4"+"&id="+element.attr("data-id")+"&rawtext="+element.val();var jqxhr=$.post(window.location,send).done(function(data){navTables.clearCurrentEdit();reloadpage(element,true);}).fail(function(jqXHR,textStatus,errorThrown){element.removeAttr("data-valuesent");element.removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown);});},saverow:function(element,value){var rawtext=""+value;var id=element.attr("data-id");var target=element.attr("data-target");var start=element.attr("data-start");var end=element.attr("data-end");var description=toString($("#desc_"+target).val());if($("#desc_"+target).length===0){description="xskipx";}var comment=toString($("#comment_"+target).val());
if($("#comment_"+target).length===0){comment="xskipx";}var factor=$("#factor_"+target).val();var goal=$("#goal_"+target).val();var workgoal=$("#workgoal_"+target).val();var orderLength=value;var kind=element.attr("data-kind");if(id=="-2"&&isEmpty(value)){return;}if(!value){var found=$("#orderlength_"+target);if(found.length>0){orderLength=found.val();if(isEmpty(orderLength)){orderLength="0";}}}if(isEmpty(value)){value="0";}if(kind=="g"){orderLength="-";goal=value;}if(kind=="wg"){orderLength="-";workgoal=value;}if(value&&element.attr("data-valuesent")==value){return;}element.addClass("loading");element.attr("data-valuesent",value);var total=element.attr("data-total");if(!isEmpty(total)){factor=total;}if(isEmpty(value)){value="";}var text=element.first();if(text.length>0){text.text(value);}var column=element.attr("data-c");var send="kind=plan&id="+id;var wrap=navTables.findTarget(null);var person="";var period=element.attr("data-p");if(wrap.attr("id")==="persontilewrap"){var percent=wrap.find(".percentof").map(function(){var el=$(this);if(el.attr("data-p")!==period){return;}return el.attr("data-percentof");}).get().join();person="&person="+wrap.attr("data-reload")+"&percentof="+percent;}var filter="";if(!isEmpty(column)){send+="&action=savetext&rawtext="+encodeURIComponent(rawtext)+"&offset="+element.attr("data-offset")+"&connected="+encodeURIComponent(toString(element.attr("data-connected")))+"&p="+period+"&o="+element.attr("data-o")+"&gv="+toString(element.attr("data-gv"))+"&rowkey="+toString(element.closest("tr").attr("data-rowkey"))+"&c="+encodeURIComponent(column)+person;
filter=element.attr("data-o");}var factorlist=""+$(".factor_c"+target).map(function(){return $(this).attr("data-id")+":"+this.value;}).get().join(";");var orderCount=toString($("#ordercount_"+target).val());if(isEmpty(column)){send+="&periodstart="+start+"&periodend="+end+"&done="+asShortBoolean(element.attr("data-done"))+"&orderids="+element.attr("data-orderids")+"&ro="+element.attr("data-robject")+"&o="+element.attr("data-object")+"&orderLength="+encodeURIComponent(orderLength)+"&rowdescription="+encodeURIComponent(description)+"&rowcomment="+encodeURIComponent(comment)+"&offset="+encodeURIComponent(element.attr("data-offset"))+"&connected="+encodeURIComponent(toString(element.attr("data-connected")))+"&orderCount="+encodeURIComponent(orderCount)+"&factor="+encodeURIComponent(factor)+"&factorlist="+encodeURIComponent(factorlist)+"&workgoal="+encodeURIComponent(workgoal)+"&outcome="+encodeURIComponent($("#outcome_"+target).val())+"&timeframe="+encodeURIComponent($("#timeframe_"+target).val())+"&goal="+encodeURIComponent(goal);}var jqxhr=$.post(window.location,send).done(function(data){navTables.reload(element,filter);}).fail(function(jqXHR,textStatus,errorThrown){element.removeAttr("data-valuesent");element.removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown);});},reload:function(element,newObjects){if(isEmpty(newObjects)){reloadpage(element);return;}var table=element.parents(".sandtable");if(table.length==0){reloadpage(element);return;}var types=toString(table.attr("data-limittypes")).split(",");if(types.length==0){reloadpage(element);return;}var filtered=IdSet.filterOnType(newObjects.split(","),types);
if(filtered.length==0){reloadpage(element);return;}var searchIds=$("#linksdata").attr("data-searchids");var merged=IdSet.merge(searchIds,filtered).join(",");if(searchIds==merged){reloadpage(element);return;}changeAddObjectId(merged,true);}};var Sorter={currentPart:"1",init:function(){var columns=$("#columnorder");columns.sortable({items:".lefttext",axis:"y",update:function(event,ui){Sorter.updateOrder(columns,"cco","#colorlinks");}});var tdHelper=function(e,tr){var $originals=tr.children();var $helper=tr.clone();$helper.children().each(function(index){$(this).width($originals.eq(index).width());});$helper.addClass("hideSelect");return $helper;};$("#adminsettings .fieldtable, #adminsettings .dragtable").sortable({helper:tdHelper,axis:"y",items:"tr:not(.nodrag)",update:function(event,ui){var table=$(ui.item).closest(".dragtable");if(table.length==0){return;}var all=table.find(".columnPos");var moved=$(ui.item).find(".columnPos");Sorter.updateColumnNr(all,moved);}});},updateColumnNr:function(all,moved){if(all.length==0){return;}if(moved.length==0){return;}var prev=null;var offset=0;var newPos=0;all.each(function(index,element){var current=$(element);if(moved.attr("name")===current.attr("name")){var prevPos=(prev==null?0:TEUtil.asInt(prev.val()));if(moved.val()==prevPos){return;}offset=1;newPos=prevPos+1;moved.val(newPos);updated=true;prev=current;return;}if(offset>0){var pos=TEUtil.asInt(current.val());if((pos+offset)==newPos){offset++;}var next=pos+offset;var diff=next-(prev==null?1:TEUtil.asInt(prev.val()));if(diff>offset){offset=0;return;}current.val(next);}prev=current;});},initTypeOrder:function(part){if(isEmpty(part)){return;
}Sorter.bindTypeOrder("#typeorder"+part,"jco"+part+"A",part);},bindTypeOrder:function(id,key,part){var typeorder=$(id);typeorder.sortable({items:".lefttext",axis:"y",placeholder:"typeorder-placeholder",stop:function(event,ui){var valid=Sorter.isValidOrder(typeorder);if(!valid){stop(event);}return valid;}});$(id+"save").click(function(e){$("#planbuttonplantab2"+part).attr("action",Sorter.makeURL(typeorder,key,"#planedit"));});$(id+"reset").click(function(e){$("#planbuttonplantab2"+part).attr("action",Sorter.makeResetURL(part,key,"#planedit"));});},makeResetURL:function(part,key,hash){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");clearAllParam(path,"jco"+part+"A");clearAllParam(path,"jc"+part+"A");return asURL(url,path)+hash;},isValidOrder:function(columns){var order=Sorter.getOrder(columns);for(var i=0;i<order.length;i++){if(order[i]==Plans.SPLIT_COLUMNS){if(i===0){return false;}return true;}if(parseInt(order[i],10)<0){return false;}}return true;},containsType:function(type,list){var index=$.inArray(type,list);if(index!==-1){return index;}var current;for(var i=0;i<list.length;i++){current=list[i];if(current.indexOf(".")>-1){if($.inArray(type,current.split("."))>-1){return i;}}}return -1;},changeColumnOrder:function(ids,path){if(Sorter.currentPart==3){return;}var part=Sorter.currentPart;var columns=$("#typeorder"+part);var types=TEUtil.typesFromIds(ids);var visible=Sorter.getVisibleOrder(columns);var order=Sorter.getOrder(columns);var changed=false;for(var i=0;i<types.length;i++){var type=types[i];if(Sorter.containsType(type,visible)==-1){TEUtil.arrayMove(order,Sorter.containsType(type,order),Sorter.containsType(Plans.SPLIT_COLUMNS,order));
changed=true;break;}}if(!changed){return;}if(path){setParam(path,"jco"+part+"A","t"+order.join(","));return;}var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");setParam(path,"jco"+part+"A","t"+order.join(","));window.location=asURL(url,path);},getVisibleOrder:function(columns){var skip=false;return columns.children(".lefttext").map(function(){var id=$(this).attr("data-id");if(id==Plans.SPLIT_HIDDEN){skip=true;}if(skip){return null;}return id;}).get();},getOrder:function(columns){return columns.children(".lefttext").map(function(){return $(this).attr("data-id");}).get();},makeURL:function(columns,key,hash){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");setParam(path,key,"t"+Sorter.getOrder(columns).join(","));return asURL(url,path)+hash;},updateOrder:function(columns,key,hash){window.location=Sorter.makeURL(columns,key,hash);return true;}};var Plans={WORK:["4","5","14"],mandatory:null,mandatoryWork:null,isMandatory:function(type,level){if(!Plans.mandatory){Plans.mandatory=$("#asAddColumnPlan").attr("data-mtypes").split(",");}if(!Plans.mandatoryWork){Plans.mandatoryWork=$("#asAddColumnPlan").attr("data-wtypes").split(",");}var isWork=jQuery.inArray(level,Plans.WORK)!==-1;var types=isWork?Plans.mandatoryWork:Plans.mandatory;return jQuery.inArray(""+type,types)!==-1;},limitedTypes:null,isLimitType:function(type,level){if(!Plans.limitedTypes){Plans.limitedTypes=$("#asAddColumnPlan").attr("data-limitedtypes").split(",");}return jQuery.inArray(""+type,Plans.limitedTypes)!==-1;},TAB_EXTRA:10,MAX_TABS:10,TOTAL_TABS:20,SPLIT_COLUMNS:"-50",SPLIT_HIDDEN:"-60",saveAllStateExpand:function(){saveStateExpand("#coursewrap",1);
saveStateExpand("#persontilewrap",3);var id=0;for(id=Plans.TAB_EXTRA;id<=Plans.TOTAL_TABS;id++){saveStateExpand("#planwrap"+id,id);}},sticky:function(){setTimeout(Plans.stickyWait,200);},stickyWait:function(){Plans.stickySecond();Plans.stickySum();},stickySecond:function(){if(!$("body").hasClass("stickyB")){return;}var wrap=navTables.wrap();var width=wrap.find(".sandheaderleft").outerWidth();wrap.find(".sandheader.col1").css("left",width+"px");var index=900;wrap.find(".col1.hinfo.over").each(function(){index--;if(index<13){index=13;}$(this).css("z-index",index);});wrap.find(".col1.tooltip").each(function(){index--;if(index<13){index=13;}$(this).css("z-index",index);});var nr=0;var offset=0;for(nr=1;nr<=10;nr++){var top=wrap.find(".rangeheader.colB1_"+nr);wrap.find(".colB1_"+nr).css("left",(width+offset)+"px");offset+=top.outerWidth();}},stickySum:function(){if(!$("body").hasClass("stickySum")){return;}var wrap=navTables.wrap();var width=0;wrap.find(".sandheader.sumpin").css("right",width+"px");var nr=0;var offset=0;for(nr=10;nr>=1;nr--){var top=wrap.find(".rangeheader.colB9000_"+nr);wrap.find(".colB9000_"+nr).css("right",(width+offset)+"px");offset+=top.outerWidth();}},expand:function(element,expandAll,toggle,hideAll){if(element.length==0){return;}element.removeClass("loaded");var level=element.attr("data-level");var target=$("."+level);if(target.length===0){return;}if(level.length<5){expandAll=true;hideAll=target.hasClass("trshow");}if(hideAll){element.removeClass("bpressed");if(!target.hasClass("trshow")){return;}target.removeClass("trshow");target.children(".bpressed").removeClass("bpressed");
target.children(".levelExpand").each(function(index,el){Plans.expand($(el),expandAll,toggle,hideAll);});return;}if(expandAll){element.addClass("bpressed");target.addClass("trshow");target.children(".bpressed").removeClass("bpressed");target.children(".levelExpand").each(function(index,el){Plans.expand($(el),expandAll,true,hideAll);});return;}if(toggle){element.toggleClass("bpressed");target.toggleClass("trshow");if(!target.hasClass("trshow")){target.children(".levelExpand").each(function(index,el){Plans.expand($(el),expandAll,true,true);});}target.children(".bpressed").removeClass("bpressed");$(".s"+level).removeClass("trshow bpressed");}else{element.addClass("bpressed");target.addClass("trshow");}},updateTabNav:function(){var id=0;for(id=Plans.TAB_EXTRA;id<=Plans.TOTAL_TABS;id++){Plans.updateTabNr(id);}},updateTabNr:function(nr){var id=toString($("#planwrap"+nr).attr("data-reload"));if(isEmpty(id)){$("#tabnav"+nr).hide();return;}$("#tabnav"+nr).show();},updateTabName:function(wrap,jpp){if(jpp<Plans.TAB_EXTRA){return;}var name=toString(wrap.find(".plantitle").text()).trim();name=isEmpty(name)?"-":name;var nav=$("#plannav"+jpp);var current=nav.text();if(toString(current).length<2){nav.text(name);}nav.attr("title",name+" ("+jpp+")");$(".planTabTitle"+jpp).text(name);Plans.updateTabNav();},closeTab:function(nr){$("#planwrap"+nr).attr("data-reload","");savePlanState(nr,"");saveReloadables();var element=$("#tabnav"+nr);element.fadeOut(function(){$("#plantabs").tabs("select","1");element.removeAttr("style");});}};var TEInfo={info:null,init:function(){var show=function(){TEInfo.lazyCreate();
TEInfo.info.click();};$("#showtech").click(show);Mousetrap.bind(["meta+i"],show);},lazyCreate:function(){if(TEInfo.info!=null){return;}var abouttext=$("#abouttext");var aboutbaseText=abouttext.val();TEInfo.info=$("#techinfo");TEInfo.info.append('<div id="techwrap" class="techwrap"><div class="t3 techheader">'+TEInfo.info.attr("data-about")+'</div><textarea id="techtext" readonly class="techbox"/><button class="shaded techcopy" onclick="TEInfo.copy()">'+TEInfo.info.attr("data-copy")+"</button></div>");TEInfo.text=$("#techtext");TEInfo.info.fancybox({"margin":0,"padding":0,"href":"#techwrap","orig":"#pageMenuButtonItem","transitionIn":transition(),"transitionOut":transition(),"speedIn":200,"speedOut":200,"width":500,"height":500,"onStart":function(){TEInfo.text.val(TEInfo.info.attr("data-info")+"\n"+aboutbaseText+AboutInfo.getInfo());},"onClosed":function(){PageMenu.close();fancyboxClosed();},"onComplete":function(){$("#fancybox-close").addClass("white");}});},copy:function(selector){if(!selector){selector="#techtext";}var copyText=document.querySelector(selector);copyText.select();copyText.setSelectionRange(0,99999);document.execCommand("copy");}};var BatchEdit={enabled:false,box:".batcheditbox",toggle:function(box){if(BatchEdit.enabled){BatchEdit.disable();return;}BatchEdit.enable(box);},enable:function(box){BatchEdit.enabled=true;BatchEdit.box=box;$(".bookingDiv").addClass("toEditMode");$(BatchEdit.box).show();$("body").addClass("hideModeWrap");$(".saveToCore").removeClass("saveok");return false;},disable:function(){BatchEdit.enabled=false;$(".bookingDiv").removeClass("toEditMode");
$(".toHide").removeClass("toHide");$(BatchEdit.box).hide();$("body").removeClass("hideModeWrap");return false;},hide:function(id,element){if(!$(element).hasClass("toHide")){if(BatchEdit.ids().length>=60){alert("Max 60 reservations can be edit at once");return;}}$(element).toggleClass("toHide");},saveToCore:function(ids){if(!supports_html5_storage()){return;}setItem("TEViewerResIds",ids);$(".saveToCore").addClass("saveok");},editSelected:function(){var ids=BatchEdit.ids();if(isEmpty(ids)){return;}BatchEdit.disable();if(BatchEdit.box==".openInCoreBox"){BatchEdit.saveToCore(ids);return;}openRes(ids,$(".hidereswrap"),"","&step=0&ef=2&nocache=2");},updatePath:function(extraQuery,path){if(toString(extraQuery).indexOf("&ef=2")!=-1){clearAllParam(path,"objects");clearAllParam(path,"o");clearAllParam(path,"ox");clearAllParam(path,"p");}},ids:function(){var elements=$(".toHide");var values=$.map(elements,function(element){return $(element).attr("data-id");});return values;}};var TEScramble=(function(){var my={},tabledata=[["h=t&sid=","6="],["objects=","1="],["sid=","2="],["&ox=0&types=0&fe=0","3=3"],["&types=0&fe=0","5=5"],["&h=t&p=","4="]],tabledataspecial=[["=","ZZZX1"],["&","ZZZX2"],[",","ZZZX3"],[".","ZZZX4"],[" ","ZZZX5"],["-","ZZZX6"],["/","ZZZX7"],["%","ZZZX8"]],pairs=[["=","Q"],["&","Z"],[",","X"],[".","Y"],[" ","V"],["-","W"]],pattern=[4,22,5,37,26,17,33,15,39,11,45,20,2,40,19,36,28,38,30,41,44,42,7,24,14,27,35,25,12,1,43,23,6,16,3,9,47,46,48,50,21,10,49,32,18,31,29,34,13,8];function tablespecial(result){for(var i=0;i<100;i++){for(var index=0;index<tabledataspecial.length;index++){var key=tabledataspecial[index];result=result.replace(key[0],key[1]);}}return result;}function tableshort(result){for(var index=0;index<tabledata.length;index++){var key=tabledata[index];result=result.replace(key[0],key[1]);}return result;}function modKey(ch){if(ch>=97&&ch<=122){return(97+(ch-88)%26);}if(ch>=49&&ch<=57){return(49+(ch-45)%9);}return ch;}function scrambleChar(ch){for(var index=0;index<pairs.length;index++){var pair=pairs[index];if(ch===pair[0]){return pair[1];}if(ch===pair[1]){return pair[0];}}return String.fromCharCode(modKey(ch.charCodeAt(0)));}function swap(result,from,to){if((from<0)||(from>=result.length)){return;}if((to<0)||(to>=result.length)){return;}var fromChar=result[from];result[from]=result[to];result[to]=fromChar;}function swapPattern(result){var steps=Math.ceil(result.length,pattern.length);for(var step=0;step<steps;step++){for(var index=1;index<pattern.length;index+=2){swap(result,pattern[index]+step*pattern.length,pattern[index-1]+step*pattern.length);
}}}function swapChar(result){var split=result.split("");for(index=0;index<split.length;index++){split[index]=scrambleChar(split[index]);}swapPattern(split);return split.join("");}function scramble(query){if(isEmpty(query)){return query;}if(query.length<2){return query;}if(query.substring(0,2)==="i="){return query;}var result=decodeURIComponent(query);result=tableshort(result);result=swapChar(result);result=tablespecial(result);return encodeURIComponent(result);}my.asURL=function(urls,keyValues,extra){var url=urls[0];for(var index=0;index<keyValues.length;index++){keyValues[index]=toString(keyValues[index]).replace(/[+]/g," ");}var lastSlash=toString(url).lastIndexOf("/");var page=url.substring(lastSlash+1,url.length);if(page.indexOf("r")!==0){return url+"?i="+scramble(keyValues.join("&")+toString(extra));}var dot=".html";var lastDot=toString(url).lastIndexOf(".");if(lastDot!=-1){dot=url.substring(lastDot,url.length);}if(lastSlash!=-1){url=url.substring(0,lastSlash+1);}return url+"ri"+scramble(keyValues.join("&")+toString(extra))+dot;};return my;}());window.timers=window.timers||[];window.beforeload=window.beforeload||(new Date()).getTime();var loadMyRes;var PLAN_SPLIT="";function addTimer(name){window.timers.push(name+" "+((new Date()).getTime()-window.beforeload)+"ms");}addTimer("JS");function wait(callback,name){setTimeout(function(){callback();if(name){addTimer(name);}},($.browser.msie?100:1));}var SmallScreenDivHeight=1200;var toggleSpeed=100;function isSmallScreen(){return screen.width<=481;}function isSmallWindow(){return $(document).width()<=880;}function isTouchDevice(){return !!("ontouchstart" in window);}function isMobileSafari(){var platform=""+navigator.platform;return(platform.indexOf("iPad")!=-1)||(platform.indexOf("iPhone")!=-1)||(platform.indexOf("iPod")!=-1);}function isiOS(){if(isTouchDevice()){return true;}return isMobileSafari();}function stop(e){waitForFinalEvent();if(!e){return;}if(e.preventDefault){e.preventDefault();}stopProp(e);}function stopProp(e){if(!e){return;}if(e.stopPropagation){e.stopPropagation();}}function isWideViewport(){if(window.screen){if(window.screen.width>700){return true;}}var platform=""+navigator.platform;return(platform.indexOf("iPad")!=-1);}function iPadViewport(){if(!isWideViewport()){return;}var port=$("#iosviewport");if(port.length>0){port.remove();$("head").append('<meta name="viewport" content="width=device-width" />');}}function isAnimationOff(){return $.browser.msie||isiOS();}function slideUp(target,callback){if(isAnimationOff()){target.hide();if(callback){callback();}return;}target.slideUp(toggleSpeed,callback);}function slideDown(target,callback){if(isAnimationOff()){target.show();
if(callback){callback();}return;}target.slideDown(toggleSpeed,callback);}function transition(){return isAnimationOff()?"none":"elastic";}function reservationId(){var id=""+$("#table0").attr("data-resid");if(id=="undefined"){id=""+$(".detailedResObjects").attr("data-resid");}if(id=="undefined"){alert("Missing reservation ID for tags.");}return id;}function initTagSelector(){var selector=$(".tagselector");selector.select2({dropdownAutoWidth:true,language:select2Locale,tags:true,insertTag:function(data,tag){data.push(tag);},ajax:{url:urlTags(),delay:250,cache:true,data:function(params){var query={search_text:params.term,start:params.page||1};return query;}}});selector.on("select2:select",function(e){sendTag({"add":""+e.params.data.id,"id":reservationId()});});selector.on("select2:unselect",function(e){sendTag({"remove":""+e.params.data.id,"id":reservationId()});});$(".generatetag").unbind("click").click(function(e){var name="T_"+reservationId();sendTag({"add":""+name,"id":reservationId()},function(){if($("#newResTimeDiv").length==0){window.location.reload();return;}var newOption=new Option(name,name,true,true);selector.append(newOption).trigger("change");});});}function urlTags(){return urlPrefix()+"tags/tags.json";}function sendTag(data,onDone){var post=post2(urlTags(),data,function(data){if(onDone){onDone();}parent.$.fancybox.reloadOnClose=true;},function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);});}var tagDragId=0;var tagStart=0;function tagDrag(ev){var target=$(ev.target);tagDragId=target.attr("data-id");tagStart=target.parents(".alltags");var name=tagStart.attr("data-name");
ev.dataTransfer.setData("text",name);}function allowTagDrop(ev){ev.preventDefault();}function tagDrop(ev){ev.preventDefault();var oldTag=ev.dataTransfer.getData("text");if(isEmpty(tagDragId)||tagDragId==0){return;}if(isEmpty(oldTag)){return;}var target=$(ev.target).parents(".alltags");var name=target.attr("data-name");if(isEmpty(name)){return;}sendTag({"add":""+name,"id":tagDragId});sendTag({"remove":""+oldTag,"id":tagDragId});expandTagBox(target.children(".expandtags"),true);expandTagBox(tagStart.children(".expandtags"),true);}function openTag(icon){if(icon.hasClass("ui-icon-triangle-1-e")){icon.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");return;}icon.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");}function expandTag(el){expandTagBox($(el),false);}function expandTagBox(element,reload){var icon=element.find(".ui-icon");var ids="x.1."+element.attr("data-name")+".-5";var box=element.next();if(!reload&&box.html().length>0){box.slideToggle(toggleSpeed);openTag(icon);return;}if(!reload){openTag(icon);}box.empty();changeObjectIds(ids,true,false,function(url,path){setParam(path,"part","t");setParam(path,"g","f");setParam(path,"tas","f");box.load(asURL(url,path));});}function addTag(e,el){stop(e);var element=$(el);sendTag({"add":""+element.attr("data-name"),"id":-1},function(){window.location.reload();});return false;}function removeTag(e,el){stop(e);var element=$(el);if(!confirm(element.attr("title")+" "+element.attr("data-name")+"?")){return;}sendTag({"remove":""+element.attr("data-name"),"id":-1},function(){window.location.reload();});
return false;}function asURL(urls,keyValues,extra){PageLock.save();return TEScramble.asURL(urls,keyValues,extra);}function languageURL(name){if(isEmpty(name)){return;}document.cookie="TimeEditLanguage="+name+";path=/";var link=""+removeHashFrom(""+window.location.href);var url=link.split("?");var path=[];if(url.length>1){path=url[1].split("&");}setParam(path,"l",name);window.location=url[0]+"?"+path.join("&")+window.location.hash;return false;}function language(name){if(isEmpty(name)){return;}document.cookie="TimeEditLanguage="+name+";path=/";window.location.reload();return false;}function initLanguageSwap(){$(".languageSwap").click(function(){var text=""+$(this).attr("class");var name=text.match("language-(.*)-end");if(name.length==2){language(""+name[1]);return;}language("-");});}var res;var PageLoaderNext_o=function(){};function isFirstDataValue(element){return element.val()==element.attr("data-first");}function shortDate(start,end){if(start.length!=8&&end.length!=8){return start+"-"+end;}var input="20";if(start.substring(0,input.length)===input&&end.substring(0,input.length)===input){return start.substring(input.length)+"-"+end.substring(input.length);}return start+"-"+end;}function getSearchRange(isStart,isEnd){var start=$("#txtRangeStart").val()+".x";var rel=false;var buttonStart=$("#rangeTypeButtonStart");if(isFirstDataValue(buttonStart)){var startUnit=$("#periodvaluestartRange").val();if(startUnit=="619"){start="0.m";rel=true;}else{start=startUnit+"."+$("#periodtimestartRange").val();rel=true;}}if(!isStart){start=buttonStart.attr("data-paramtext");if(!endsWith(start,".x")){rel=true;
}}var end=$("#txtRangeEnd").val()+".x";var buttonEnd=$("#rangeTypeButtonEnd");if(isFirstDataValue(buttonEnd)){var relEnd=$("#periodtimeendRange").val();if(!rel||(start.indexOf("0.")===0&&start.indexOf("0.m")!==0)){start="0."+relEnd;}rel=true;end=$("#periodvalueendRange").val()+"."+relEnd;}if(!isEnd){end=buttonEnd.attr("data-paramtext");}return start+","+end;}function updatePeriod(path){if($("#flipStart").hasClass("hasQuickflip")){setParam(path,"p",getSearchRange());}}function changeAddObjectId(id,replace){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");setParam(path,"objects",id,(replace?false:true));Sorter.changeColumnOrder(id,path);var newLocation=asURL(url,path);window.location=newLocation;return true;}function changeObjectIds(ids,clearAll,changePeriod,callback){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");if(clearAll===true){clearAllParam(path,"ox");clearAllParam(path,"o");clearAllParam(path,"object");}if(isEmpty(ids)){setParam(path,"objects","0");}else{setParam(path,"objects",ids);clearAllParam(path,"object");clearAllParam(path,"type");}setParam(path,"ox","0");setParam(path,"types","0");setParam(path,"fe","0");setParam(path,"si","");if(changePeriod===true){updatePeriod(path);}if(callback){callback(url,path);return false;}var newLocation=asURL(url,path);window.location=newLocation;return true;}function removeObjectlink(idToRemove){var ids="";var id;$(".searchObjectMinus").each(function(){id=""+$(this).attr("data-objectid");if(id==idToRemove){return;}if(ids.length>0){ids+=",";
}ids+=id;});changeObjectIds(ids);}function getObjectBasketIds(basket){var ids=[];basket.children().each(function(){ids.push(""+$(this).attr("data-id"));});return ids;}function getObjectBasketNames(basket){var ids=[];basket.children().each(function(){ids.push(""+$(this).text());});return ids;}function isSeparatorId(id){return id=="-1.0"||id=="-1"||id=="-4"||id=="-6";}function hasObjectId(ids,id){var current=""+id;if(isSeparatorId(current)){return false;}var i=ids.length;while(i--){if(isSeparatorId(ids[i])){return false;}if(current==ids[i]){return true;}}return false;}function dimBasketItems(result){var basket=$("#objectbasket");var ids=getObjectBasketIds(basket);result.children().each(function(){var e=$(this);if(hasObjectId(ids,e.attr("data-id"))){e.addClass("dimmed");}});}function hasObject(basket,id){var ids=getObjectBasketIds(basket);return hasObjectId(ids,id);}function checkBasket(basket){var ids=getObjectBasketIds(basket);if(isEmpty(ids.join(""))){$("#objectbaskettext").show();$("#leftclearbutton").addClass("clickselected");if($(".searchrescatlink").length===0){$("#objectbasketgo").attr("disabled","disabled");}}else{$("#leftclearbutton").removeClass("clickselected");$("#objectbaskettext").hide();$("#objectbasketgo").removeAttr("disabled");}MultiAdd.update(ids);}function sortBasket(){var basket=$("#objectbasket");var lists=[];var items=[];basket.children().each(function(){var id=$(this).attr("data-id");if(id=="-4"||id=="-1"){lists.push(items);lists.push([$(this)]);items=[];return;}items.push($(this));});lists.push(items);for(i=0;i<lists.length;i++){lists[i].sort(function(a,b){return a.text()==b.text()?0:+(a.text()>b.text())||-1;
});}for(i=0;i<lists.length;i++){var part=lists[i];for(j=0;j<part.length;j++){part[j].appendTo(basket);}}checkBasket(basket);return false;}function emptyBasketConfirm(target,skipConfirm){if(skipConfirm=="t"){emptyBasket();return;}var text=$(target).attr("title");if(!isEmpty(text)&&!confirm(text+"?")){return false;}emptyBasket();}function emptyBasket(){var basket=$("#objectbasket");basket.html("");checkBasket(basket);$(".searchObject").removeClass("dimmed");return false;}function addBasketItem(basket,id,name,origin,allowAll){if(isEmpty(id)){return;}if(!allowAll&&hasObject(basket,id)){return;}if(origin){if(!origin.hasClass("searchrescatlink")&&!origin.hasClass("searchseparator")){origin.addClass("dimmed");}}var title=basket.attr("data-title");var click="";var clickcss="";var nameTitle=name;if(id=="-1"){name="+";nameTitle="";}if(id=="-4"){name="||";nameTitle="";}var wrap=$('<div class="basketitem'+clickcss+'" title="'+nameTitle+'" data-id="'+id+'"'+click+">"+name+"</div>").appendTo(basket);var removeName=title+" "+nameTitle;var element=$('<a href="#" title="'+removeName+'" aria-label="'+removeName+'" class="basketItemRemove clickable"><span class="ui-icon ui-icon-close"></span></a>').appendTo(wrap);element.click(function(e){if(origin){origin.removeClass("dimmed");}wrap.remove();$(".box").hide();checkBasket(basket);e.stopPropagation();e.preventDefault();return false;});if(!isiOS()){$("#objectbasket").sortable({axis:"y",start:function(event,ui){$(".boxloaded").removeClass("boxloaded");slideUp($(".box"));},items:".basketitem"});}if(allowAll){return;}checkBasket(basket);}function resizeFields(h,fields,hidden){var old=h.attr("data-h");
if(isEmpty(old)){old=h.height();h.attr("data-h",old);}h.height(hidden?old:old-fields.height()-5);}function toggleFields(e){stop(e);ObjectsSearcher.initFields();$("#fancyformfieldsearch .searchAdvancedFields").slideToggle(toggleSpeed);var link=$(".showFieldsLink");var altText=link.attr("data-alt-text");link.attr("data-alt-text",link.text());link.text(altText);link.attr("data-show",link.attr("data-show")==="no"?"yes":"no");link.attr("aria-expanded",link.attr("data-show")==="yes"?"true":"false");if(link.attr("data-show")==="yes"){Stats3.call("filter-show");link.addClass("filterdown");return false;}link.removeClass("filterdown");return false;}function fancyboxSearchResult(fillBasket){emptyBasket();if(!fillBasket){return;}var i=0;var array=$("#linksdata").attr("data-searchidsenc").split(",");var arrayNames=$("#linksdata").attr("data-searchnames").split(",,");var basket=$("#objectbasket");var length=array.length;for(i=0;i<length;i++){addBasketItem(basket,array[i],arrayNames[i],null,true);}checkBasket(basket);}function fancyboxClosed(){$("#fancybox-overlay").hide();}var objectSearcherFF="osFF";var objectSearcherOrig=$("#openSearchButton");function addObjectTo(basket,id,name,e,doAdd,current,down,startTop,fixHeight){var basketHeight=basket.height();var select=$("#basketSelectText");select.html(""+select.attr("data-none")).removeClass("basketSelectText");doAdd();if(basket.length===0||$.browser.msie){return false;}if(current.hasClass("moving")){return false;}current.addClass("moving");var offset=e.offset();var endPoint=$("#reservationsWrap");if(endPoint.length===0){endPoint=$("#baskettarget");
}var offsetBody=endPoint.offset();var toOffset=basket.offset();var mover=$('<div class="basketMover"></div>').appendTo(endPoint);mover.stop(true,true).css("top",offset.top-offsetBody.top+startTop).css("left",offset.left-offsetBody.left).css("width",Math.min(390,e.width())).html(name);if(fixHeight){hideAllSearchObjectHover();}mover.show().animate({top:toOffset.top-offsetBody.top+down+basketHeight,left:toOffset.left-offsetBody.left},{duration:600,complete:function(){current.removeClass("moving");mover.remove();}});}function resizeObjectInfo(current){if(current.hasClass("noexpand")){return;}if(current.hasClass("dimmed")&&!current.hasClass("fixed")){return;}var element=current.find(".objectfieldsextra");if(element.children().length<1){return;}var height=Math.max(20,element.height())+5;current.addClass("expanded");current.find(".objectfieldsextrawrap").stop(true,false).animate({height:height+"px"},200);}function loadObjectInfo(current,afterload,afterinfo,allobject){if(current.hasClass("loaded")){return;}var id=current.attr("data-idonly");if(id=="-1"){return;}if(!id){return;}var extra=current.find(".objectfieldsextra");if(extra.children().size()>0){return;}var sid=Qt.join("&sid",$("#linksdata").attr("data-sid"));var lang=Qt.join("&l",$("#linksdata").attr("data-lang"));var query=sid+lang;var all="fr=t";if(allobject){all="part=t";}$.getJSON(urlPrefix()+"objects/"+id+"/o.json?"+all+"&types="+current.attr("data-type")+query,function(data){var items="";if(allobject){$.each(data.objects,function(key,val){items+=TEUtil.asTD(val.fields,data.objects.length);});}else{items+=TEUtil.asTD(data,1);
}current.addClass("loaded");if(afterload){afterload(current,items,afterinfo);return;}extra.html(items);resizeObjectInfo(current);});}function hideAllSearchObjectHover(){$("#objectsearchresult").find(".searchObject").each(function(index,e){hideSearchObjectHover($(e));});}function hideSearchObjectHover(element){if(element.hasClass("moving")){return;}if(element.hasClass("fixed")){return;}if(!element.hasClass("expanded")){return;}element.removeClass("expanded");var found=element.find(".objectfieldsextrawrap");if(found.height()<1){return;}found.stop().animate({height:"0px"},200);}function relatedToIds(){return $(".middlesearchtitle .reltoitem").map(function(){var input=$(this);return input.attr("data-id");}).get().join(",");}function middleSearchTitle(){if(isEmpty(relatedToIds())){$(".middlesearchname").text($(".middlesearchname").attr("data-name")).removeClass("black");return;}var typeName=$("#fancytypeselector option:selected").text();$(".middlesearchname").text(typeName+" "+$(".middlesearchname").attr("data-relprefix")+" ").addClass("black");}function relatedChangeType(type){$("#ffsearchname").val("");ObjectsSearcher.fancytypeselectorVal(type,"",true);waitObjectSearch();middleSearchTitle();}function runRelatedTo(e,id){var basket=$(".middlesearchtitle");var name=e.attr("data-name");var title=$("#objectbasket").attr("data-title");var removeName=title+" "+name;var wrap=$('<span class="basketitem clickable reltoitem" aria-label="'+removeName+'" title="'+removeName+'" data-id="'+id+'">'+name+"</span>").appendTo(basket);var element=$('<a href="#" title="'+removeName+'" aria-label="'+removeName+'" class="basketItemRemove clickable"><span class="ui-icon ui-icon-close"></span></a>').appendTo(wrap);
var oldType=$("#fancytypeselector").val();wrap.click(function(e){stop(e);wrap.remove();relatedChangeType(oldType);return false;});relatedChangeType(e.attr("data-relto"));}function initSearchObjectHover(){$(".loadAllNext").unbind("click").click(function(e){ObjectsSearcher.objectSearch(false);});var basket=$("#objectbasket");$(".searchObject").each(function(){var current=$(this);current.unbind("click").click(function(event){var e=$(this);var id=""+e.attr("data-id");var target=$(getTarget(event));if(target.hasClass("reltoicon")){addObjectTo($(".middlesearchwrap"),id,e.attr("data-name"),e,function(){},current,-40,0,true);runRelatedTo(e,id);return;}if(target.hasClass("clickobject")){return;}if(target.hasClass("infolinkobject")){var wrap=current.find(".objectfieldsextrawrap");if(wrap.height()>0){current.removeClass("fixed");current.removeClass("expanded");wrap.stop().animate({height:"0px"},200);return;}current.addClass("fixed");loadObjectInfo(current);resizeObjectInfo(current);return;}if(ObjectsSearcher.quickCallback){ObjectsSearcher.quickCallback(id,e.attr("data-name"),e);}else{if(hasObject(basket,id)){return;}addObjectTo(basket,id,e.attr("data-name"),e,function(){addBasketItem(basket,id,e.attr("data-name"),e);},current,0,0,true);}current.removeClass("expanded");current.find(".objectfieldsextrawrap").stop().animate({height:"0px"},delay);return false;});var timeHover;var delay=600;var currentIndex=0;current.hover(function(){currentIndex=current.index();if(current.hasClass("noexpand")){return;}if(current.hasClass("moving")){return;}if(current.hasClass("dimmed")){return;}timeHover=setTimeout(function(){loadObjectInfo(current);
resizeObjectInfo(current);},delay);},function(){if(current.hasClass("moving")){return;}if(current.hasClass("fixed")){return;}clearTimeout(timeHover);});});$("#objectsearchresult").hover(function(){},function(){hideAllSearchObjectHover();});}function storeKey(input){return objectSearcherFF+input.parent(".fancyfieldset").attr("id")+input.attr("name");}var HISTORY_SIZE=11;var OBJECT_SEARCH_SIZE=15;function loadHistoryList(){var list=[];var i=0;for(i=0;i<HISTORY_SIZE;i++){var history=""+window.localStorage.getItem(objectSearcherFF+"_"+i);if(!isEmpty(history)){list.push(history);}}return list;}function loadHistory(){if(!supports_html5_storage()){$("#favoritewrap").hide();return"";}var list=loadHistoryList();var content="";for(var i=0;i<list.length;i++){var history=""+list[i];var split=history.split("#");if(split.length!=2){continue;}if(isEmpty(split[0])){continue;}if(isEmpty(split[1])){continue;}content+='<li><a class="favoritelink clickable" href="#" data-id='+split[0]+">"+split[1]+"</a></li>";}if(isEmpty(content)){$("#favoritewrap").hide();return;}$("#favoritewrap").show();$(".favoriteitems").html(content);$(".favoritelink").click(function(e){var current=$(this);var ids=""+current.attr("data-id");var names=""+current.text();var basket=$("#objectbasket");addObjectTo(basket,"0",names,current,function(){},current,-20,-20,false);var array=ids.split(",");var arrayNames=names.split(",  ");emptyBasket();var i=0;var length=array.length;for(i=0;i<length;i++){addBasketItem(basket,array[i],arrayNames[i],null,true);}checkBasket(basket);return false;});}function saveHistory(ids,names){if(!supports_html5_storage()){return;
}var list=loadHistoryList();var item=ids.join(",")+"#"+names.join(",  ");var found=jQuery.inArray(item,list)>-1;if(found){return;}var i=0;for(i=0;i<HISTORY_SIZE;i++){setItem(objectSearcherFF+"_"+(i+1),""+list[i]);}setItem(objectSearcherFF+"_0",item);}function emptyHistory(target){var text=$(target).attr("title");if(!isEmpty(text)&&!confirm(text+"?")){return false;}for(i=0;i<HISTORY_SIZE;i++){setItem(objectSearcherFF+"_"+i,"");}$(".favoriteitems").html("");return false;}var PageScroll={step:0,current:0,max:0,time:20000,scrollTime:2000,enabled:false,off:true,timerId:0,messageTimer:0,autoRefreshSeconds:0,startTime:0,refresh:function(){if(PageScroll.autoRefreshSeconds==0){return;}if(PageScroll.startTime==0){PageScroll.startTime=new Date().getTime();return;}var diff=new Date().getTime()-PageScroll.startTime;if(diff>=(PageScroll.autoRefreshSeconds*1000)){$(window).scrollTop(0);window.location.reload();}},initStep:function(){PageScroll.max=$("#contents").height();PageScroll.step=$(window).height()-$("#header").height()-$("#colorExplanation").height()-10;PageScroll.current=0;},initMessage:function(){clearInterval(PageScroll.messageTimer);var sec=PageScroll.time/1000;var scrollMessageSpan=$("#scrollMessage span");scrollMessageSpan.text(sec);var scrollMessage=$("#scrollMessage");scrollMessage.fadeIn();PageScroll.messageTimer=setInterval(function(){scrollMessageSpan.text(--sec);if(sec===0||PageScroll.pause){clearInterval(PageScroll.messageTimer);}},1000);},resume:function(){if(!PageScroll.enabled){return;}PageScroll.off=false;PageScroll.pause=false;PageScroll.step=0;$(window).scrollTop(0);
PageScroll.start();},doPause:function(){PageScroll.pause=true;PageScroll.off=true;clearInterval(PageScroll.messageTimer);},start:function(){PageScroll.initMessage();window.clearTimeout(PageScroll.timerId);PageScroll.timerId=window.setTimeout(PageScroll.scroll,PageScroll.time);PageScroll.refresh();},scroll:function(){if(PageScroll.enabled===false){return;}if(PageScroll.off){return;}if(PageScroll.pause){return;}if(PageScroll.step===0){PageScroll.initStep();}$(window).scrollTop(PageScroll.current);PageScroll.current+=PageScroll.step;if(PageScroll.current>PageScroll.max){PageScroll.current=0;PageScroll.refresh();}$("html, body").stop().animate({scrollTop:PageScroll.current},PageScroll.scrollTime,function(){PageScroll.initMessage();});PageScroll.timerId=window.setTimeout(PageScroll.scroll,PageScroll.time+PageScroll.scrollTime);}};function focusFirst(target){if(!target){return;}if(target.selector==="#searchDiv"){$("#ffsearchname").focus();return;}if(target.selector==="#dateRange"){TEZoom.focusCurrent();return;}var focusable='button, [href], input, select, textarea, [tabindex]:not([tabindex=" - 1"])';target.find(focusable).filter(":visible").first().focus();}var waitObjectSearchlastKeyPress=0;var waitObjectSearchtypingTimeOutId=0;var ObjectsSearcher={};function waitObjectSearch(){clearTimeout(waitObjectSearchtypingTimeOutId);var diff=new Date().getTime()-waitObjectSearchlastKeyPress;if(diff<300){waitObjectSearchtypingTimeOutId=window.setTimeout(waitObjectSearch,200);return;}ObjectsSearcher.objectSearch(false);}function urlPrefix(){var link=""+$("#linksdata").attr("data-linksbase");
if(link.indexOf("/s/s")!=-1){return"../";}return"";}function resetHeaderHash(){var hash=""+window.location.hash;if(isEmpty(hash)){return;}if(hash.indexOf("#00")===0){return;}window.location.hash="#";}function resetHeader(){resetHeaderHash();ObjectsSearcher.quickCallback=null;ObjectsSearcher.multiAdd=null;ObjectsSearcher.name=null;ObjectsSearcher.time="";$("#searchDiv").removeClass("quicksearch quickadd");}function closeHeader(){$(".pressed").removeClass("pressed").attr("aria-expanded","false");$(".topmenu").hide();$("#footerOverlay").hide();resetHeader();PageMenu.close();PageScroll.resume();}function expandHeader(target,quick,orig,scrolltop){PageScroll.doPause();$("#footerOverlay").hide();resetHeaderHash();if(scrolltop){$(window).scrollTop(0);}$(".pressed").each(function(index,e){var element=$(e);if(!element.equals(orig)){element.removeClass("pressed").attr("aria-expanded","false");}});if(target.is(":hidden")){orig.addClass("pressed").attr("aria-expanded","true");$(window).scrollLeft(0);}else{orig.removeClass("pressed").attr("aria-expanded","false");}$(".topmenu").each(function(index,e){var element=$(e);if(!element.equals(target)){slideUp(element);}});var after=function(){if(!target.is(":visible")){PageScroll.resume();return;}if("#footer"===(""+target.selector)){$("#footerOverlay").show();}focusFirst(target);};if(quick||isAnimationOff()){target.toggle(isAnimationOff()?0:100,after);return;}target.slideToggle(toggleSpeed,after);}function presentName(name){return toString(name).replace("",".");}ObjectsSearcher={ztop:null,first:false,firstGo:false,fitToScreen:false,quickCallback:null,lastQuery:"-123",lastKeyPress:1,typingTimeOutId:0,lastFields:"",lastTypes:"",searchTextLegend:null,lastRequest:null,lastXHR:null,currentType:"",time:"",selectedObjectsFunction:null,templateGroupId:0,resStep:0,my:false,cat:"",catVis:"",multiAdd:null,name:null,abort:function(){if(ObjectsSearcher.lastXHR){ObjectsSearcher.lastXHR.abort();
ObjectsSearcher.lastXHR=null;}},findReservations:function(){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");clearAllParam(path,"fe");clearAllParam(path,"types");clearAllParam(path,"objects");clearAllParam(path,"o");clearAllParam(path,"ox");clearAllParam(path,"object");this.loadSearch(true);setParam(path,"objects","0");updatePeriod(path);var newLoc=""+asURL(url,path,this.lastFields+this.lastTypes);window.location=newLoc;return true;},initFields:function(){var selector=$(".fancyformfieldsearchselect");selector.each(function(){var input=$(this);input.select2({searchPlaceHolder:$("#ffsearchname").attr("data-search"),dropdownAutoWidth:true,language:select2Locale,closeOnSelect:false,placeholder:toString(input.attr("data-name"))});});var jump=function(e){var target=$(getTarget(e));if(!target.hasClass("hasURL")){return;}var url=e.params.data.id;if(isEmpty(url)){return;}PageLock.save();window.location=url;};selector.on("select2:select",jump);selector.on("select2:unselect",jump);},reOpenSearch:function(){$("#openStartRangeButton").html($("#rangeStartNice").html());$("#openEndRangeButton").html($("#rangeEndNice").html());expandHeader($("#searchDiv"),false,$(".openSearchButton"),false);},showSearch:function(quick,orig,fillBasket){ObjectsSearcher.fieldSetsChange(false);PageScroll.doPause();fancyboxSearchResult(fillBasket);var t=$("#searchDiv");expandHeader(t,quick,orig,false);if(ObjectsSearcher.fitToScreen){var screenWidth=$(window).width();var leftPos=t.offset().left+t.width();if(leftPos>screenWidth){t.css("left",(screenWidth-t.width()-10)+"px");
}else{t.css("left","");}}},init:function(){this.searchTextLegend=$("#searchTextLegend");var searcher=this;$(".searchObjectMinus, #searchMinus").each(function(){$(this).click(function(event){removeObjectlink($(this).attr("data-objectid"));event.preventDefault();return false;});});$(".searchrescatlink").click(function(event){var basket=$("#objectbasket");var e=$(this);ObjectsSearcher.loadSearch(true);var type="x."+e.attr("data-id");var id=""+ObjectsSearcher.catVis;if(hasObject(basket,id)){return;}var name=presentName(e.attr("data-name"));addObjectTo(basket,id,name,e,function(){addBasketItem(basket,id,name,e);},e,0,0,true);Stats3.call("filter-categorySchedule");return false;});$(".searchseparator").click(function(event){var basket=$("#objectbasket");var e=$(this);ObjectsSearcher.loadSearch(true);var id=""+e.attr("data-id");addObjectTo(basket,id,e.data("name"),e,function(){addBasketItem(basket,id,e.data("name"),e);},e,0,0,true);Stats3.call("filter-separator");return false;});$("#searchNew").each(function(){$(this).click(function(event){changeObjectIds("",true);event.preventDefault();return false;});});$("#planbasketcopy").click(function(){Multicheck.copyTime=true;$("#objectbasketgo").click();});$("#planbasketcommon").click(function(){Multicheck.commonRow=true;$("#objectbasketgo").click();});$("#objectbasketgo").click(function(){var ids=getObjectBasketIds($("#objectbasket"));if(isEmpty(ids)&&$("#objectbasketgo").attr("data-mandatory")=="yes"){var element=$("#basketSelectText");element.html(""+element.attr("data-select"));element.addClass("basketSelectText");return;}if(ObjectsSearcher.multiAdd){ObjectsSearcher.multiAdd(ids);
if(navTables.editoverlay){navTables.editoverlay.hide();}return;}setCourseWrapClasses("");saveHistory(ids,getObjectBasketNames($("#objectbasket")));var after;if($("#dateRange").hasClass("searchOpen")){after=function(url,path){setParam(path,"periods","");setParam(path,"p",getSearchRange(true,true));var newLocation=asURL(url,path);window.location=newLocation;return true;};}clearPlanState();changeObjectIds(ids,false,true,after);});var tabs=$("#fancytypetabs .searchtab");tabs.click(function(e){var tab=$(this);tabs.removeClass("tabselected").addClass("clickable");tab.addClass("tabselected").removeClass("clickable");ObjectsSearcher.fancytypeselectorVal(tab.attr("data-value"));ObjectsSearcher.fieldSetsChange();});var searchDiv=$("#searchDiv");var openSearchButton=$(".openSearchButton");openSearchButton.click(function(e){var go=$("#objectbasketgo");go.val(go.attr("data-search"));if(ObjectsSearcher.quickCallback){searchDiv.addClass("quicksearch");}else{if(ObjectsSearcher.multiAdd){if(isEmpty(ObjectsSearcher.name)){go.val(go.attr("data-copy"));}else{go.val(ObjectsSearcher.name);}}else{if(ObjectsSearcher.first){ObjectsSearcher.fancytypeselectorVal(0);$("#fancytypeselector").hide();}else{if(ObjectsSearcher.firstGo){ObjectsSearcher.fancytypeselectorVal(0);}else{$(window).scrollTop(0);}}}}Favorites.moveToSearch();ObjectsSearcher.showSearch(false,openSearchButton,!ObjectsSearcher.multiAdd);e.stopPropagation();e.preventDefault();return false;});$("#currentSearchObjects").click(function(){openSearchButton.click();});loadHistory();ObjectsSearcher.loadValues();ObjectsSearcher.loadSelected();$(".ffinput").each(function(){var val="";
var input=$(this);var check=function(){if(supports_html5_storage()){var store=input.val();if(isCheck(input)){store=input.attr("checked");}setItem(storeKey(input),store);}if(isCheck(input)){ObjectsSearcher.objectSearch();}if(val===(val=input.val())){return;}ObjectsSearcher.objectSearch();};$(this).bind("keyup blur update change",check);});$(".ffsearchInput").each(function(){var val="";var input=$(this);var check=function(e){if(e.charCode!==13){return;}if(supports_html5_storage()){var store=input.val();if(isCheck(input)){store=input.attr("checked");}setItem(storeKey(input),store);}ObjectsSearcher.objectSearch(false);};$(this).bind("keypress",check);});$(".objectFieldsParam").each(function(){var val="-----";var input=$(this);var clickHandler=function(){var checked=input.val();if(!isArray(checked)){ObjectsSearcher.objectSearch();return;}var values=$.map(checked,function(checkbox){return checkbox;});var newVal=values.join(",");if(val===newVal){return;}val=newVal;if(supports_html5_storage()){setItem(storeKey(input),values);}ObjectsSearcher.objectSearch();};input.on("change",clickHandler);});$(".fancyform").submit(function(event){ObjectsSearcher.objectSearch(false);return false;});$(".ffsearchbutton").click(function(event){ObjectsSearcher.objectSearch(false);return false;});$(".ffcreateobject").click(function(event){ObjectsSearcher.loadSearch(false,true);return false;});$(".myObjectLink").click(function(event){changeObjectIds(""+$(this).attr("data-id"));return false;});ObjectsSearcher.fieldSetsChange();},fancytypeselectorVal:function(val,disValue,keepOldOnFail){var element=$("#fancytypeselector");
element.find("option").removeAttr("disabled");if(!isEmpty(disValue)){element.find('option[value="'+disValue+'"]').attr("disabled","disabled");}var oldValue=element.val();var newValue=""+val;element.val(newValue);if(element.val()===newValue){ObjectsSearcher.updateSearchName(true);return true;}if(keepOldOnFail){element.val(oldValue);return false;}element.val($("#fancytypeselector option:first").val());ObjectsSearcher.updateSearchName(true);return false;},loadValues:function(){if(!supports_html5_storage()){return;}ObjectsSearcher.fancytypeselectorVal(""+window.localStorage.getItem(objectSearcherFF+"fancytypeselector"));},loadSelected:function(){if(!supports_html5_storage()){return;}if($("#fancyformfieldsearch").attr("data-loadSelected")!="t"){return;}$("#fancyformfieldsearch .ffinput").each(function(){var input=$(this);if(input.hasClass("hidden")){return;}if(input.attr("name")==="fftext"){return;}var stored=window.localStorage.getItem(storeKey(input));if(stored===null){return;}if(!isCheck(input)&&!isHidden(input)){input.val(stored);}if(stored=="true"&&isCheck(input)){input.attr("checked","checked");}});$(".objectFieldsParam").each(function(){var input=$(this);if(input.hasClass("hidden")){return;}var item=""+window.localStorage.getItem(storeKey(input));if(item===""){return;}input.val(item.split(","));});},objectSearchNoKey:function(e){stop(e);ObjectsSearcher.objectSearch(false);},objectSearch:function(keypressed){clearTimeout(waitObjectSearchtypingTimeOutId);waitObjectSearchlastKeyPress=new Date().getTime();if(keypressed===false){ObjectsSearcher.lastKeyPress=1;}else{waitObjectSearch();
return;}this.loadSearch();},fieldSetSave:function(){this.currentType=$("#fancytypeselector").val();},fieldSetLoad:function(){ObjectsSearcher.fancytypeselectorVal(this.currentType);},resTypeChange:function(e){var selected=$(e).find(":selected");var typeid=selected.val();var result=$("#objectselectionresult");result.attr("data-typeid",typeid);result.attr("data-subtypes",selected.attr("data-subtypes"));$(".restypeselector").val(typeid);$(".fancyfieldset").addClass("hidden");$("#ffsetx"+typeid).removeClass("hidden");waitObjectSelection();},lastFancyType:"",fieldSetsChange:function(){var type=$("#fancytypeselector").val();if(type===this.lastFancyType){return;}ObjectsSearcher.loadSelected();this.lastFancyType=type;if(supports_html5_storage()){setItem(objectSearcherFF+"fancytypeselector",type);}var selectedId="ffset"+TEUtil.asSafeId(type);if($(".showFieldsLink").attr("data-show")==="no"){$(".topmenu .searchAdvancedFields").hide();}else{$(".topmenu .searchAdvancedFields").show();}$("#fancyformfieldsearch").children(".fancyfieldset").each(function(){var element=$(this);if(element.attr("id")===selectedId){element.show();}else{element.hide();}});var result=$("#objectsearchresult");var resultText=this.searchTextLegend;result.html('<div><div class="clicksearchicon"></div>'+resultText.data("nomatches")+"</div>");resultText.html(""+resultText.data("Result"));ObjectsSearcher.updateSearchName(false);},updateSearchName:function(changeFieldSet){var placeholder=$("#ffsearchname");var typeName=$("#fancytypeselector option:selected").text();placeholder.attr("placeholder",placeholder.attr("data-search")+" "+typeName);
if(changeFieldSet){ObjectsSearcher.fieldSetsChange();}},fieldSetReload:function(){ObjectsSearcher.fieldSetLoad();ObjectsSearcher.fieldSetsChange();ObjectsSearcher.objectSearch();},updateSearchButton:function(list,fullList){var button=$(".searchrescatlink:visible");var name=button.attr("data-basename")+TEUtil.presentList(list,2,": ");button.attr("data-name",name);button.text(button.attr("data-addText")+" "+presentName(name));button.attr("title",button.attr("data-addText")+" "+button.attr("data-basename")+TEUtil.presentList(fullList,100,": "));},loadSearch:function(fake,create){var fields="";var searchText="";var inputName=$("#ffsearchname");var nameText=Qt.valCompact(inputName,false);var nameTextNice=Qt.valText(inputName);var type=""+$("#fancytypeselector").val();var set=$("#ffset"+TEUtil.asSafeId(type));var categories="";set.find(".ffinput").each(function(){var input=$(this);var isRemoveSpaces=input.attr("data-tefieldkind")==="INTEGER";var val=Qt.valCompact(input,isRemoveSpaces);var valText=Qt.valText(input);var niceText=input.find("option:selected").attr("data-text");if(!isEmpty(niceText)){valText=niceText;}if(!isCheck(input)&&val!==""&&!isHidden(input)){fields+="&fe="+input.attr("data-prefix")+"."+val;categories+="x."+input.attr("data-prefix")+"."+val+"."+type+".";searchText+=comma(searchText,input.attr("data-name")+": "+valText);}});set.find(".ffinput:checked").each(function(){var input=$(this);var val=input.val();if(input.val()!==""){fields+="&fe="+input.attr("data-prefix")+"."+val;if(searchText.size()>0){searchText+=" ";}searchText+=comma(searchText,input.attr("data-name"));
}});var resultFields="";var allText=[];var allTextFull=[];ObjectsSearcher.catVis=""+categories;set.find(".objectFieldsParam").each(function(){var input=$(this);var checked=input.val();if(!isEmpty(checked)&&(typeof checked==="string")){var wrapped="__i__"+checked;checked={wrapped:wrapped};}var isRemoveSpaces=input.attr("data-tefieldkind")==="INTEGER";var values=$.map(checked,function(checkbox){if(isRemoveSpaces){return encodeURIComponent(""+removeSpaces(checkbox));}return encodeURIComponent(encodeURIComponent(""+checkbox));});var valuesPlain=$.map(checked,function(checkbox){if(isRemoveSpaces){return""+removeSpaces(checkbox);}return encodeURIComponent(""+checkbox);});var textValues=$.map(checked,function(checkbox){return(""+checkbox).replace("__i__","").replace("__a__","");});if(!isEmpty(textValues)){if(!input.hasClass("hidden")){allText=allText.concat(textValues);}allTextFull=allTextFull.concat(textValues);}var field=Qt.join("&"+input.data("param"),values.join(","),input.data("prefix"));if(!isEmpty(field)){searchText+=comma(searchText,input.data("name")+": "+textValues.join(", ")+" ");var catValue="x."+input.data("prefix")+"."+valuesPlain.join(".")+"."+type+".";categories+=catValue;if(!input.hasClass("hidden")){ObjectsSearcher.catVis+=catValue;}resultFields+=field;}});ObjectsSearcher.updateSearchButton(allText,allTextFull);var types=Qt.join("&types",type);ObjectsSearcher.cat=categories;if(isEmpty(ObjectsSearcher.cat)){ObjectsSearcher.cat="x."+type;ObjectsSearcher.catVis=ObjectsSearcher.cat;}if(isEmpty(ObjectsSearcher.catVis)){ObjectsSearcher.catVis="x."+type;}this.lastFields=fields+resultFields;
this.lastTypes=types;if(fake){return;}var exclude="";var sid=Qt.join("&sid",$("#linksdata").attr("data-sid"));var lang=Qt.join("&l",$("#linksdata").attr("data-lang"));var text=Qt.join("&search_text",nameText);var objectIds="";if(ObjectsSearcher.selectedObjectsFunction){objectIds=Qt.join("&objects",ObjectsSearcher.selectedObjectsFunction());}var relto=relatedToIds();if(!isEmpty(relto)){objectIds=isEmpty(objectIds)?Qt.join("&objects",relto):objectIds+","+relto;}var templateGroup="";if(this.templateGroupId!==0){templateGroup=Qt.join("&grp",this.templateGroupId);}var step="";if(this.resStep!==0){step=Qt.join("&step",this.resStep);}if(!isEmpty(text)&&!ObjectsSearcher.quickCallback){searchText=" "+nameTextNice+comma(searchText,searchText);}var hasTime=!isEmpty(ObjectsSearcher.time)&&ObjectsSearcher.time.indexOf("dates")!==-1;var userObjects="";if(!hasTime&&ObjectsSearcher.my){ObjectsSearcher.my=false;userObjects="&uo=t";}if(hasTime&&ObjectsSearcher.my){ObjectsSearcher.my=false;userObjects="&uof=t";}if(ObjectsSearcher.firstGo){userObjects="";}var add=(objectSearcherFF.indexOf("osRes")===-1?"":"&add=f");var quick=ObjectsSearcher.quickCallback?"&step=1&or=1&objects="+resObjectSelected():"";var maxSize=OBJECT_SEARCH_SIZE;if(ObjectsSearcher.quickCallback){maxSize=Math.min(10,OBJECT_SEARCH_SIZE);}if(ObjectsSearcher.firstGo){quick="";if(ObjectsSearcher.quickCallback||ObjectsSearcher.multiAdd){quick="&fo=2";maxSize=Math.min(10,OBJECT_SEARCH_SIZE);}}if(nameTextNice.length>2){maxSize=100;}if(!ObjectsSearcher.firstGo&&!ObjectsSearcher.quickCallback){var basket=getObjectBasketIds($("#objectbasket"));
objectIds=isEmpty(objectIds)?Qt.join("&objects",basket):objectIds+","+basket;}var query="max="+maxSize+userObjects+"&fr=t&partajax=t&im=f"+add+sid+lang+text+step+templateGroup+objectIds+types+exclude+fields+resultFields+ObjectsSearcher.time+quick;if(create){query+="&create=t";}searchText="";this.searchTextLegend.hide();if(hasTime){searchText=""+$("#linksdata").attr("data-freeresources");this.searchTextLegend.show();}if((query.indexOf("uof=t")!==-1||query.indexOf("uo=t")!==-1)&&!(query.indexOf("uos=t")!==-1)){searchText=(hasTime?$("#linksdata").attr("data-freeresources")+" ":"")+$("#linksdata").attr("data-myresources");this.searchTextLegend.show();}this.searchTextLegend.html(this.searchTextLegend.data("search")+searchText+' <img src="'+$("#linksdata").attr("data-staticui")+'loading.svg" alt="Loading..." width="8" height="8"> ');this.lastQuery=query;this.loadSearchObjectResult(urlPrefix()+"objects.html?"+query,searchText);},loadSearchObjectResult:function(url,legendText){var loader=$("#searchLoader");if(loader.is(":visible")){loader.addClass("saveanimation");}var result=$("#objectsearchresult");var resultText=this.searchTextLegend;ObjectsSearcher.lastRequest=url;ObjectsSearcher.abort();ObjectsSearcher.lastXHR=$.get(url,function(response,status,xhr){if(ObjectsSearcher.lastRequest!=url){return;}loader.removeClass("saveanimation");if(status==="error"){result.html('<p class="stacktraceError">A problem occurred:<br> '+TEError.asText(xhr)+"</p>");resultText.html("");}else{result.html(response);if(!ObjectsSearcher.quickCallback){dimBasketItems(result);}resultText.html(legendText);if(typeof window.initAutoPager!=="undefined"){PageLoaderNext_o=window.initAutoPager("_o",initSearchObjectHover);
}initSearchObjectHover();if(result.children(".emptysearch").length>0){var target=result.find(".loadAllNext");if(target.is(":visible")){ObjectsSearcher.objectSearch(false);}}}}).fail(function(response,status,xhr){if(status=="abort"){return;}if(response.status&&response.status==412){window.location=window.location.href.replace("phtml","html");return;}result.html('<p class="stacktraceError">A problem occurred in search:<br> '+TEError.asText(xhr)+" <br> "+response.responseText+"</p>");resultText.html("");loader.removeClass("saveanimation");});},clearResult:function(){var result=$("#objectsearchresult");var resultText=this.searchTextLegend;result.html("");resultText.html(""+resultText.data("Result"));},clearAllForms:function(){ObjectsSearcher.fieldSetSave();ObjectsSearcher.resetSearch();document.fancyformfieldsearch.reset();$("#fancyformfieldsearch").find(".fancyformfieldsearchselect").trigger("change");ObjectsSearcher.fieldSetReload();return false;},resetSearch:function(){ObjectsSearcher.resetSearchStored();},resetSearchStored:function(){if(!supports_html5_storage()){return;}var i=0;var length=window.localStorage.length;for(i=0;i<length;i++){var key=window.localStorage.key(i);if(key.indexOf(objectSearcherFF)!=-1){setItem(key,"");}}}};function toggle(id){window.location.hash="#";var obj=document.getElementById(id);if(obj.style.display=="none"){obj.style.display="";return;}obj.style.display="none";if(id==="footer"){hideMenu();}}function hideSelectedInFooterList(){$("#footerList").children().removeClass("expselected");}function tabswitch(id){toggle(id);hideSelectedInFooterList();}function initTEAuthLogout(){var logoutbutton=$("#logoutbutton");
var env=logoutbutton.attr("data-env");if(isEmpty(env)){return;}logoutbutton.unbind("click").click(function(e){stop(e);localStorage.setItem("te_auth_token","");$.getScript("https://storage.googleapis.com/auth-cdn/authorize-script/authorize.js",function(data,textStatus,jqxhr){logout(env).then(function(){window.location.href=logoutbutton.attr("href")+"?back="+encodeURIComponent(getAuthURL(env));});});});}function updateLogin(){initTEAuthLogout();var loginbutton=$("#loginbutton");if(loginbutton.length<1){return;}var link=removeHashFrom(""+window.location);var url=link.split("?");var path=[];if(url.length>1){path=url[1].split("&");}setParam(path,"loginpost","true");loginbutton.attr("href",""+url[0]+"?"+path.join("&"));return true;}function updateFilter(link,hash){var url=link.split("?");var path=url[1].split("&");var filter=""+$("#oxFilter").find("option:selected").map(function(){return this.value;}).get().join(",");setParam(path,"ox",filter);setParam(path,"pp","f");window.location=asURL(url,path)+hash;return true;}function updateTitlelink(link,hash){var url=link.split("?");var path=url[1].split("&");updateQClean(path,"gtitlevalue","title");window.location=asURL(url,path)+hash;return true;}function clearFilter(link,hash){var url=link.split("?");var path=url[1].split("&");setParam(path,"ox","0");setParam(path,"s","0");window.location=asURL(url,path)+hash;return true;}function updateSizelink(link,hash){var url=link.split("?");var path=url[1].split("&");updateQ(path,"gwidth","dw");updateQ(path,"gheigth","hh");updateQ(path,"fwidth","fw");clearAllParam(path,"tw");window.location=asURL(url,path)+hash;
return true;}function updateTargetWidthlink(link,hash){var url=link.split("?");var path=url[1].split("&");var content=$("#contents");var hourwidth=parseInt(toString(content.attr("data-hourwidth")),10);var width=content.width()-hourwidth-25;setParam(path,"tw",width);setParam(path,"dw",-1);window.location=asURL(url,path)+hash;return true;}function updateSearchDatelink(link,hash){var url=link.split("?");var path=url[1].split("&");var time=getV("txtStartDate")+"-"+getV("txtEndDate");setParam(path,"p",time);window.location=asURL(url,path)+hash;return true;}function updatePdflink(link,hash){var url=link.split("?");var path=url[1].split("&");updateQ(path,"pdfpagesize","ps");updateQ(path,"pdfstanding","sp");updateQ(path,"pdfcolumns","dpp");updateQ(path,"pdflined","pl");updateQ(path,"pdfrows","rop");updateQ(path,"pdffontsize","fs");updateQE(path,"pdfcolor","cl");updateQE(path,"pdfheader","shf");updateQE(path,"pdfgroup","sort");updateQE(path,"pdfweeksperpage","wpp");updateQE(path,"pdftitle","title");closeHeader();window.open(url[0]+"?"+path.join("&")+hash);return true;}function updatePlanWeekslink(link,hash){var url=link.split("?");var path=url[1].split("&");setParam(path,"jmpw",getV("planweeks"));window.location=asURL(url,path)+hash;return true;}function updateTimelink(link,hash,second){var suffix=toString(second);var url=link.split("?");var path=url[1].split("&");var time=getV("gstarttime")+","+getV("gendtime");if(!isEmpty(suffix)){time=getV("gstarttime2")+","+getV("gendtime2")+","+getV("gstarttime3")+","+getV("gendtime3");}setParam(path,"t"+suffix,time);window.location=asURL(url,path)+hash;
return true;}function updateTimeSteps(link,hash){var url=link.split("?");var path=url[1].split("&");setParam(path,"ts",getV("gtimesteps"));window.location=asURL(url,path)+hash;return true;}function expandInfoPopup(height,maxHeight){if($.browser.msie){return;}var calls=0;var lastHeight=0;var resize=function(){var table=$("#fancybox-frame").contents().find(".contentsDiv");if(table.length===0){return;}var h=Math.min(Math.max(height,table.height()+40),maxHeight);if(lastHeight==h){return;}lastHeight=h;if($("#fancybox-wrap").height()==h){return;}$("#fancybox-wrap").height(h);$("#fancybox-inner").height(h);$("#fancybox-content").height(h);$.fancybox.center(0);};resize();}var inlineload=false;function openInfoPopup(url,locationInFrame,element,extraheight,large,size,hideTitle){if(inlineload){var box="boxloaded";var target=$(element);var parent=target.parent();var isTable=parent.is("tr");if(target.hasClass(box)){var next;var found=target.next();var showing=found;if(isTable){next=parent.next();found=next.find(".box");showing=parent.next();}if(showing.css("display")=="none"){if(isTable){$(".box, .boxrow").hide();}else{slideUp($(".box"));}if(next){next.show();}slideDown(found);return;}slideUp(found,function(){if(next){next.hide();}});return;}target.addClass(box);var result=$(element);result=$('<div class="box">...</div>');if(isTable){$(".box, .boxrow").hide();var row=$('<tr class="boxrow">').append('<td class="wide"></td><td style="padding:0" colspan="20">');row.find("td:last").html(result);target.parent().after(row);}else{target.after(result);slideUp($(".box"));}result.load(locationInFrame+"&part=t",function(response,status,xhr){if(status==="error"){result.html('<p class="stacktraceError">A problem occurred:<br> '+xhr.responseText+"</p>");
}else{slideDown(result);}});return;}if(jQuery.type(extraheight)!=="number"){extraheight=0;}var maxHeight=Math.max(100,$(window).height()-50);var height=Math.min(440+(extraheight>1?300:0),maxHeight);var width=Math.max(200,Math.min(550,$(window).width()));if(large){height+=100;}if(size){height=size.height;width=size.width;}$("#fancybox-content").addClass("mover");$.fancybox({"margin":15,"padding":0,"autoScale":false,"transitionIn":transition(),"transitionOut":transition(),"titleName":""+$("#linksdata").attr("data-titleName"),"width":width,"height":height,"href":""+locationInFrame,"type":"iframe","centerOnScroll":!isiOS(),"orig":$(element),"onClosed":function(){fancyboxClosed();if(res){reshide();if(res.attr("data-reload")!="no"){window.location.reload();}}if(hideTitle){window.location.reload();}if($.fancybox.reloadOnClose){$.fancybox.reloadOnClose=false;if(res){waitObjectSelection();if(loadMyRes){loadMyRes();}}else{window.location.reload();}}},"onComplete":function(){$("#fancybox-wrap").draggable({handle:"#fancybox-content"});$("#fancybox-frame").unbind("load").load(function(){expandInfoPopup(height,maxHeight);});}});}var EnrollReservations={enabled:false,enable:function(){EnrollReservations.enabled=true;EnrollReservations.nr=0;$(".bookingDiv").addClass("toHideMode");$(".enrollresbox").show();$("body").addClass("hideModeWrap");return false;},disable:function(){EnrollReservations.enabled=false;$(".bookingDiv").removeClass("toHideMode");$(".toHide").removeClass("toHide");$(".enrollresbox").hide();$("body").removeClass("hideModeWrap");return false;},hide:function(id,el){var element=$(el);
element.toggleClass("toHide");var id=element.attr("data-id");var time=element.attr("title");if(element.hasClass("toHide")){$("#enrollgroups").append('<div class="enrollgroup">'+'<div class="nodrag">'+' <label>Max <input data-prefix="m" class="nr3" type="text" value="5"></label>'+' <label>Wait <input data-prefix="w" class="nr3" type="text" value="2"></label>'+"</div>"+'<div class="enres enresbox"  data-id="r'+id+'" id="enres_'+id+'">'+time+" #"+id+"</div>"+"</div>");$(".enrollgroup").sortable({connectWith:".enrollgroup",cancel:".nodrag"}).disableSelection();}else{var target=$("#enres_"+id);var parent=target.parent();target.remove();if(parent.children().length==0){parent.remove();}}},create:function(){var result=[];$("#enrollgroups").children().each(function(index,g){var group=$(g);group.find("input").each(function(index,element){var input=$(element);result.push(input.attr("data-prefix")+input.val());});var values=$.map(group.children(),function(element){return $(element).attr("data-id");});result=result.concat(values);});var send="kind=enroll&groups="+encodeURIComponent(result.join(","));var element=$("#enrollselect");var post=$.post(window.location,send).done(function(data){element.text("Response "+data);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,element);});}};var HideReservations={enabled:false,enable:function(){HideReservations.enabled=true;$(".bookingDiv").addClass("toHideMode");$(".hideresbox").show();$("body").addClass("hideModeWrap");return false;},disable:function(){HideReservations.enabled=false;$(".bookingDiv").removeClass("toHideMode");
$(".toHide").removeClass("toHide");$(".hideresbox").hide();$("body").removeClass("hideModeWrap");return false;},hide:function(id,element){if(!$(element).hasClass("toHide")){if(HideReservations.ids().length>=60){alert("Max 60 reservations can be hidden");return;}}$(element).toggleClass("toHide");},hideSelected:function(){var link=removeHashFrom(""+$("#linksdata").attr("data-linksbase"));var url=link.split("?");var path=url[1].split("&");path.push("x="+HideReservations.ids());window.location=asURL(url,path);},showAll:function(){var link=removeHashFrom(""+$("#linksdata").attr("data-linksbase"));var url=link.split("?");var path=url[1].split("&");setParam(path,"x","");window.location=asURL(url,path);},ids:function(){var elements=$(".toHide");var values=$.map(elements,function(element){return $(element).attr("data-id");});return values;}};function showTips(){$("#tipswrap").removeClass("hidden");$("#tipsoverlay").show();}function hideTips(){$("#tipswrap").addClass("hidden");$("#tipsoverlay").hide();}function resObjectSelected(){return $.map($(".resobjectselector"),function(value,index){var val=$(value).val();if(isEmpty(val)){return null;}return val;});}function doUpdateResTime(keyValue){if(keyValue.length!=2){return;}var key=toString(keyValue[0]);var value=toString(keyValue[1]);if(key==="dates"){$("#leftresdate").datepicker("setDate",parseDate(value));$("#leftresdateend").datepicker("setDate",parseDate(value));}if(key==="starttime"){$(".timeHourStart").val(value.substring(0,2));}if(key==="endtime"){$(".timeHourEnd").val(value.substring(0,2));}if(key==="objects"){var idtype=value.split(".");
if(idtype.length==2){$(".resobjectselector").each(function(index){var element=$(this);if(element.attr("data-type")==idtype[1]){element.val(value);}});}}}function updateResTime(query){var split=query.split("&");for(var i=0;i<split.length;i++){doUpdateResTime(split[i].split("="));}}function openRes(idText,element,origId,extraQuery,large,iFrameSize){var id=""+idText;if(HideReservations.enabled){HideReservations.hide(id,element);return;}if(BatchEdit.enabled){BatchEdit.hide(id,element);return;}if(EnrollReservations.enabled){EnrollReservations.hide(id,element);return;}if(id=="-1"){var resdate=$("#leftresdate");if(resdate.length!==0){updateResTime(extraQuery);return;}}var link=""+$("#linksdata").attr("data-linksbase");link=link.split("#")[0];var url=link.split("?");var path=url[1].split("&");clearAllParam(path,"dv");setParam(path,"id",""+id);var loc=url[0]+"?"+path.join("&");setParam(path,"fr","t");var hideTitle=false;if(toString(extraQuery).indexOf("&objects")!=-1){clearAllParam(path,"objects");var res=resObjectSelected();if(res.length>0){extraQuery+=","+res.join(",")+"&step=2";hideTitle=true;}}BatchEdit.updatePath(extraQuery,path);var locationInFrame=asURL(url,path,toString(extraQuery));var size=id.split(",").length;var orig=document.getElementById(origId);if(orig){element=orig;}if(toString(extraQuery).indexOf("&step")!=-1&&toString(extraQuery).indexOf("&step=0")===-1){iFrameSize={"width":550,"height":450};}if(hideTitle){iFrameSize={"width":550,"height":450};}openInfoPopup(loc,locationInFrame,element,size,large,iFrameSize,hideTitle);return false;}function openObject(id,element,limited){var url="objects/"+id+".html";
var loc=""+window.location;if(loc.indexOf("schedule")!=-1&&!(loc.indexOf("scheduler")!=-1)){url="../"+url;}var info=isEmpty(limited)?"":"&lo=1";var lang="&l="+$("#linksdata").attr("data-lang")+"&sid="+$("#linksdata").attr("data-sid");var win=openInfoPopup(url,url+"?fr=t&back=f"+lang+info,element);Stats3.call("openObjectInfoPopup");return false;}function expSelected(selected){if(selected){$(selected).addClass("expselected");}}function expandCurrent(first,showsearch){var expandid=window.location.hash.substring(1);var e=document.getElementById(expandid+"Element");if(e){first=false;}if(first){expandid="planedit";e=document.getElementById(expandid+"Element");}if(first&&!e){expandid="mergelinks";e=document.getElementById(expandid+"Element");}if(!e){return;}if(!first&&!showsearch){$("#footer").show();$("#footerOverlay").show();}$("#"+expandid+"Element").show();$("#"+expandid+"Element2").addClass("expselected");}var Favorites={url:function(){var link=""+$("#linksdata").attr("data-linksbase");var index=link.lastIndexOf("/");if(index>0){return link.substring(0,index)+"/"+urlPrefix()+"favorites.json?sid="+$("#linksdata").attr("data-sid");}return link;},showText:function(text){TEError.showFade('<span class="infotext">'+text+"</span>");},init:function(){if($("#favoritebox2").length===0){return;}Favorites.fill();$("#saveurl").click(function(e){stop(e);var data=$("#linksdata");var title=""+data.attr("data-urltitle");title=TEUtil.strip(prompt(""+$("#linksdata").attr("data-SaveScheduleName"),""+title));if(isEmpty(title)||title=="null"){return;}var currentpage=removeHashFrom(""+window.location);
var saveObject='{ "url": "'+currentpage+'", "sid": "'+data.attr("data-sid")+'", "name": "'+title+'"}';$.ajax({type:"put",url:Favorites.url()+"&l="+data.attr("data-lang"),dataType:"json",data:saveObject,processData:false,success:function(data,textStatus,jq){window.scrollTo(0,0);Favorites.showText(data);Favorites.fill();},error:function(XMLHttpRequest,textStatus,errorThrown){window.scrollTo(0,0);}});return false;});var favoritebox=$("#favoritebox");favoritebox.click(function(e){expandHeader($("#savedfavorites"),false,favoritebox,true);stop(e);return false;});},remove:function(element){var data=$("#linksdata");if(!confirm(element.text()+".\n\n"+data.attr("data-RemoveSchedule"))){return;}var saveObject='{ "url": "'+element.attr("href")+'", "name": ""}';$.ajax({type:"delete",url:Favorites.url()+"&l="+data.attr("data-lang"),dataType:"json",data:saveObject,processData:false,success:function(data,textStatus,jq){element.hide();window.scrollTo(0,0);Favorites.showText(data);Favorites.fill();},error:function(XMLHttpRequest,textStatus,errorThrown){window.scrollTo(0,0);}});},saveOrder:function(){var urls=$("#savedfavoriteslist .favoriteblock").map(function(index,target){return'"'+$(target).attr("href")+'"';}).get().join(", ");var data=$("#linksdata");var saveObject='{ "urls": ['+urls+'], "sid": "'+data.attr("data-sid")+'"}';$.ajax({type:"put",url:Favorites.url()+"&l="+data.attr("data-lang"),dataType:"json",data:saveObject,processData:false,success:function(data,textStatus,jq){},error:function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);}});},moveToSearch:function(){var box=$("#favoritebox2");
if(!box.parent().hasClass("favoriteboxsearch")){box.appendTo($(".favoriteboxsearch"));box.show();}},fill:function(){var button=$(".pageHeaderCurrent");button.unbind("click").click(function(e){var box=$("#favoritebox2");if(!box.parent().hasClass("pageHeaderCurrent")){box.hide().appendTo($(".pageHeaderCurrent"));}button.attr("aria-expanded",box.attr("aria-expanded")=="true"?"false":"true");box.slideToggle(toggleSpeed);});$.getJSON(Favorites.url(),function(data){var items=[];$.each(data,function(key,val){var name=TEUtil.strip(val.name);if(val.url==window.location){$("#pageFav").html(" &nbsp; / &nbsp; "+name);}items.push('<a class="favoriteblock lightlink clickable" href="'+val.url+'"><span class="ht">'+name+"&nbsp;</span></a>");});if(items.length==0){$("#favoritebox2").hide();return;}$("#favoritebox2").show();$("#savedfavoriteslist").sortable({items:".favoriteblock",axis:"y",update:function(event,ui){Favorites.saveOrder();}});var saved=$("#savedfavoriteslist");saved.html(items.join(""));saved.find("a").each(function(index,element){var button=$('<a href="#" class="favRemove clickable"><span class="ui-icon ui-icon-close"></span></a>');button.click(function(e){stop(e);Favorites.remove(button.parent());return false;});button.appendTo(element);});}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);});}};var searchDateDiff=-1;function fixDateRange(){if(!$("#txtStartDate").datepicker("getDate")){$("#txtStartDate").datepicker("setDate",new Date());}if(!$("#txtEndDate").datepicker("getDate")){$("#txtEndDate").datepicker("setDate",new Date());}}function moveEndDate(){var start=$("#txtStartDate").datepicker("getDate");
start.setDate(start.getDate()+searchDateDiff);$("#txtEndDate").datepicker("setDate",start);}function parseDate(text){try{return $.datepicker.parseDate("yymmdd",text);}catch(ignore){return"";}}function customRange(input){fixDateRange();if(searchDateDiff===-1){searchDateDiff=1+Math.abs(DateDiff.inDays($("#txtStartDate").datepicker("getDate"),$("#txtEndDate").datepicker("getDate")));}var min=parseDate($("#linksdata").attr("data-startLimit"));var max=parseDate($("#linksdata").attr("data-endLimit"));if(input.id=="txtEndDate"){return{minDate:$("#txtStartDate").datepicker("getDate"),maxDate:max};}else{if(input.id==="txtStartDate"){return{minDate:min,maxDate:max};}}}function changeDate(){searchDateDiff=-1;updateSearchDatelink(""+$("#links_base").data("base"),"");}function showChangeDate(){setTimeout(changeDate,200);}function hideHeadlineTimeOverlay(){$("#headlineTimeOverlay").hide();$("#datePickTimeOverlay").hide();$(".temenu").hide();$(".rangePickWrap").slideUp(toggleSpeed);}function fixDate(dateElement){if(!dateElement.datepicker("getDate")){dateElement.datepicker("setDate",new Date());}}function checkValidRange(){var start=$("#txtRangeStart").datepicker("getDate");var end=$("#txtRangeEnd").datepicker("getDate");if(isEmpty(start)){return false;}if(isEmpty(end)){return false;}if(start>end){return false;}return true;}function updateSearchRangeText(){var nice=true;var start=$("#rangeStartNice").html();if(isFirstDataValue($("#rangeTypeButtonStart"))){nice=false;start=$("#periodvaluestartRange option:selected").text();if($("#periodvaluestartRange").val()!=="619"){start+=" "+$("#periodtimestartRange option:selected").text();
}}var end=" - "+$("#rangeEndNice").html();if(isFirstDataValue($("#rangeTypeButtonEnd"))){nice=false;end=" +"+$("#periodvalueendRange option:selected").text()+" "+$("#periodtimeendRange  option:selected").text();}$(".currentSearchPeriod").html(start+end);if(nice){return checkValidRange();}return true;}function updateSearchRangelink(isStart,isEnd){var link=""+$("#links_base").data("base");var hash="";var url=link.split("?");var path=url[1].split("&");var fullWeeks=$("#fullweeksCheckbox").is(":checked")?"t":"f";setParam(path,"fw",fullWeeks);setParam(path,"periods","");setParam(path,"p",getSearchRange(isStart,isEnd));window.location=asURL(url,path)+hash;return true;}function selectPeriod(target,value){if($("#dateRange").hasClass("searchOpen")){ObjectsSearcher.reOpenSearch();return;}$(""+target).val(value);var isStart=(target=="#periodvaluestartRange");var isEnd=(target=="#periodvalueendRange");updateSearchRangelink(isStart,isEnd);}function updateRelative(value,time){var sing=(value.val()=="0")||(value.val()=="1");time.children("option").each(function(){var element=$(this);var text=sing?element.attr("data-sing"):element.attr("data-plur");element.text(text);});}function initRelativeTime(value,time){updateRelative(value,time);value.change(function(){updateRelative(value,time);});}function initRelativeTimeSelector(){initRelativeTime($("#periodvaluestartRange"),$("#periodtimestartRange"));initRelativeTime($("#periodvalueendRange"),$("#periodtimeendRange"));}function changeSearchPeriod(range){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");
setParam(path,"p",range);var newLocation=asURL(url,path);window.location=newLocation;return true;}function moveEndRange(startElement,endElement){var start=startElement.datepicker("getDate");var end=endElement.datepicker("getDate");if(isEmpty(start)){return false;}if(isEmpty(end)){return false;}if(start>end){endElement.datepicker("setDate",DateDiff.addOneWeek(start));return true;}return false;}var leftdate="";var leftresreloadopen=function(){$(".resetObjectExpand.accopen").click().click();if(loadMyRes){loadMyRes();}};var leftreschange=function(){};function initRange(){$("#newResTimeDiv").draggable({handle:".fancymover"});var headlineTimeOverlay=$("#headlineTimeOverlay");var button=$("#openRangeButton");var flipStart=$("#flipStart");var flipEnd=$("#flipEnd");var typeStart=$("#rangeTypeButtonStart");var typeEnd=$("#rangeTypeButtonEnd");var showDateRange=function(orig,toggle,starting){var dateRange=$("#dateRange");if(orig&&orig.length!==0){dateRange.css({top:orig.offset().top+25,left:Math.max(0,orig.offset().left+orig.width()-dateRange.width())});}if(toggle){expandHeader(dateRange,false,orig,true);}else{slideDown(dateRange);}if(starting&&!flipStart.hasClass("hasQuickflip")){flipStart.addClass("hasQuickflip");flipStart.quickFlip();initRelativeTimeSelector();}if(!starting&&!flipEnd.hasClass("hasQuickflip")){flipEnd.addClass("hasQuickflip");flipEnd.quickFlip();initRelativeTimeSelector();}};function jumpPeriod(value){var link=""+$("#links_base").data("base");var url=link.split("?");var path=url[1].split("&");setParam(path,"periods","");setParam(path,"p",value);window.location=asURL(url,path);
return true;}var fillPeriods=function(drop,skip){if(drop.length<1){return;}if($(".perioddrop option").length>skip){return;}drop.change(function(){jumpPeriod(drop.val());});var current="";if("URLSearchParams" in window){current=new URLSearchParams(""+$("#links_base").data("base")).get("p");}var url="periods.json?l="+$("#linksdata").attr("data-lang")+"&sid="+$("#linksdata").attr("data-sid");$.getJSON(url,function(data){var items="";var matchFound=false;$.each(data,function(url,name){var match=(url==current);items+="<option "+(match?" SELECTED ":"")+"value='"+url+"'>"+name+"</li>";if(match){matchFound=true;}});items="<option value='0'"+(matchFound?"":" SELECTED ")+">"+toString(drop.attr("data-text"))+"</option>"+items;drop.html(items);});};fillPeriods($(".perioddropsmall"),1);$(".perioddropsmall").each(function(){var input=$(this);input.select2({theme:"default select2nocheck",dropdownAutoWidth:true,language:select2Locale,closeOnSelect:true,minimumResultsForSearch:Infinity,width:"100%",placeholder:toString(input.attr("data-name"))});});var range2=$("#dateRange");$("#openStartRangeButton").click(function(e){fillPeriods($(".perioddrop"),0);if(range2.hasClass("rangeEndOnly")){range2.hide();}range2.removeClass("rangeWrapInside rangeEndOnly");range2.addClass("rangeWrapFlat rangeStartOnly");showDateRange($(this),true,true);e.stopPropagation();e.preventDefault();return false;});$("#openEndRangeButton").click(function(e){if(range2.hasClass("rangeStartOnly")){range2.hide();}range2.removeClass("rangeWrapInside rangeStartOnly");range2.addClass("rangeWrapFlat rangeEndOnly");showDateRange($(this),true,false);
e.stopPropagation();e.preventDefault();return false;});button.click(function(e){range2.removeClass("rangeWrapInside rangeStartOnly rangeEndOnly");range2.addClass("rangeWrapFlat");showDateRange($(this),true);e.stopPropagation();e.preventDefault();return false;});$("#openPeriodButton").click(function(e){expandHeader($("#periodRange"),false,$("#openPeriodButton"),true);e.stopPropagation();e.preventDefault();return false;});var periodform=$("#periodform");periodform.submit(function(e){var fields=periodform.serializeArray();var period="";jQuery.each(fields,function(i,field){if(period.length>0){period+=",";}period+=field.value;});e.stopPropagation();e.preventDefault();var link=removeHashFrom(""+$("#linksdata").attr("data-linksbase"));var url=link.split("?");var path=url[1].split("&");setParam(path,"p",period);window.location=asURL(url,path);return false;});$(".dateRangeButton").click(function(e){range2.removeClass("rangeWrapFlat rangeStartOnly rangeEndOnly");range2.addClass("rangeWrapInside");$("#datePickTimeOverlay").show();showDateRange($(this));e.stopPropagation();e.preventDefault();return false;});var start=$("#txtRangeStart");var end=$("#txtRangeEnd");var startRel=$("#txtRangeRelativeStart");var endRel=$("#txtRangeRelativeEnd");var startNice=$("#rangeStartNice");var endNice=$("#rangeEndNice");var startAlt=$("#txtRangeAltStart");var endAlt=$("#txtRangeAltEnd");var min=parseDate($("#linksdata").attr("data-startLimit"));var max=parseDate($("#linksdata").attr("data-endLimit"));var skipTrigger=false;$(document).on("click","td.ui-datepicker-week-col",function(){if(!$("#dateRange").hasClass("rangeStartOnly")&&!$("#dateRange").hasClass("rangeEndOnly")){var left=$("#leftresdate");
if(left.length!==1){return;}$(this).next().click();return;}skipTrigger=true;$(this).next().click();if($("#dateRange").hasClass("rangeEndOnly")){var date=end.datepicker("getDate");if(DateDiff.addOneWeek(date)<start.datepicker("getDate")){start.datepicker("setDate",date);}end.datepicker("setDate",DateDiff.addOneWeek(date));skipTrigger=false;var result=$("#txtRangeStart").val()+".x,"+$("#txtRangeEnd").val()+".x";changeSearchPeriod(result);return;}if(start.datepicker("getDate")>=end.datepicker("getDate")){var from=start.datepicker("getDate");end.datepicker("setDate",DateDiff.addOneWeek(from));}skipTrigger=false;var result2=$("#txtRangeStart").val()+".x,"+$("#txtRangeEnd").val()+".x";changeSearchPeriod(result2);});var weeks=null;var fillCustomWeeks=function(){if(weeks!=null){return;}weeks={};var data=$("#customweeks").attr("data-weeks");if(isEmpty(data)){return;}try{weeks=JSON.parse(data);}catch(e){weeks={};}};var customWeeks=function(date){fillCustomWeeks();if(!weeks){return $.datepicker.iso8601Week(date);}var day=DateDiff.asMtsDay(date);var week=weeks[day];if(week){return week.name;}return $.datepicker.iso8601Week(date);};start.datepicker({calculateWeek:customWeeks,onSelect:function(dateText,inst){var current=getSearchRange(true,false);var isEnd=false;if(endsWith(current,".x")){isEnd=moveEndRange(start,end);}startNice.html(startAlt.val());endNice.html(endAlt.val());if(skipTrigger){return;}if($("#dateRange").hasClass("searchOpen")){ObjectsSearcher.reOpenSearch();return;}if($("#dateRange").hasClass("rangeStartOnly")){changeSearchPeriod(getSearchRange(true,isEnd));}},dateFormat:"yymmdd",minDate:min,maxDate:max,showAnim:"",altField:"#txtRangeAltStart"});
end.datepicker({calculateWeek:customWeeks,onSelect:function(dateText,inst){endNice.html(endAlt.val());if(skipTrigger){return;}if($("#dateRange").hasClass("searchOpen")){ObjectsSearcher.reOpenSearch();return;}if($("#dateRange").hasClass("rangeEndOnly")){changeSearchPeriod(getSearchRange(false,true));}},dateFormat:"yymmdd",minDate:min,maxDate:max,showAnim:"",altField:"#txtRangeAltEnd"});start.datepicker("setDate",""+start.data("date"));end.datepicker("setDate",""+end.data("date"));fixDate(start);fixDate(end);$(".weekclick").click(function(e){var dateText=$(this).attr("data-date");changeSearchPeriod(dateText);e.stopPropagation();e.preventDefault();return false;});var leftresdate=$("#leftresdate");var validDays=toString($("#leftresdate").attr("data-days")).split(",").filter(function(word){return word.length>0;}).map(Number);var moveLeftDate=function(){changeleftdate($("#leftresdateurl").val());TEZoom.moveTo($("#leftresdateurl").val());if(TEZoom.searchAfterZoom){runObjectSelection();}};var isSkipDay=function(date){if(validDays.length<1){return false;}return validDays.indexOf(date.getDay())<0;};var offsetLeftDate=function(e,offset){stop(e);var date=leftresdate.datepicker("getDate");var start=new Date(date);var end=new Date(start.getFullYear(),start.getMonth(),start.getDate()+offset);if(Math.abs(offset)<8&&isSkipDay(end)){return offsetLeftDate(e,offset+(1*Math.sign(offset)));}leftresdate.datepicker("setDate",end);moveLeftDate();};$("#leftresdateinc").click(function(e){offsetLeftDate(e,TEZoom.step());});$("#leftresdatedec").click(function(e){offsetLeftDate(e,-TEZoom.step());});var changeleftdate=function(date){leftdate=date+"-"+date;
leftresreloadopen();};var leftOptions=function(){return{onSelect:function(dateText,inst){moveLeftDate();},showOn:"",buttonImageOnly:false,buttonText:"",minDate:min,maxDate:max,showAnim:"slideDown",dateFormat:"D d MM yy",altFormat:"yymmdd",altField:"#leftresdateurl",beforeShowDay:function(date){if(isSkipDay(date)){return[false,"","Skip"];}return[true,"",""];}};};$("#leftresdatepresent").datepicker(leftOptions());if(leftresdate.length>0){leftresdate.datepicker(leftOptions());leftresdate.datepicker("setDate",new Date(leftresdate.attr("data-startdate")));leftresdate.datepicker("setDate",leftresdate.datepicker("getDate"));var end=leftresdate.datepicker("getDate");if(isSkipDay(end)){offsetLeftDate(null,1);}var date=$("#leftresdateurl").val();changeleftdate(date);}var leftresdateend=$("#leftresdateend");leftresdateend.datepicker({onSelect:function(dateText,inst){},minDate:min,maxDate:max,showAnim:"slideDown",dateFormat:"D d MM yy",altFormat:"yymmdd",altField:"#leftresdateendurl"});leftresdateend.datepicker("setDate",leftresdateend.datepicker("getDate"));typeStart.click(function(){flipStart.quickFlipper();typeStart.val(isFirstDataValue(typeStart)?typeStart.data("second"):typeStart.data("first"));});typeEnd.click(function(){flipEnd.quickFlipper();typeEnd.val(isFirstDataValue(typeEnd)?typeEnd.data("second"):typeEnd.data("first"));});var typeFlip=function(typeIndex){if(typeIndex==="1"){if(!isFirstDataValue(typeStart)){typeStart.click();}if(!isFirstDataValue(typeEnd)){typeEnd.click();}return;}if(typeIndex==="2"){if(!isFirstDataValue(typeStart)){typeStart.click();}if(isFirstDataValue(typeEnd)){typeEnd.click();
}return;}if(isFirstDataValue(typeStart)){typeStart.click();}if(isFirstDataValue(typeEnd)){typeEnd.click();}};var typeSelector=$("#rangeTypeSelector");typeSelector.change(function(){typeFlip(typeSelector.val());});var flipStartButton=$(".flipStartButton");flipStartButton.click(function(){typeStart.click();flipStartButton.html(""+(isFirstDataValue(typeStart)?flipStartButton.data("second"):flipStartButton.data("first")));});var flipEndButton=$(".flipEndButton");flipEndButton.click(function(){typeEnd.click();flipEndButton.html(""+(isFirstDataValue(typeEnd)?flipEndButton.data("second"):flipEndButton.data("first")));});var changeRangeMessage=$("#changeRangeMessage");$("#changeRangeButton").click(function(){if($("#dateRange").hasClass("rangeWrapInside")){var valid=updateSearchRangeText();if(!valid){changeRangeMessage.html(""+changeRangeMessage.attr("data-text"));return;}changeRangeMessage.html("");hideHeadlineTimeOverlay();$("#dateRange").slideUp();return;}updateSearchRangelink();});button.addClass("clickable");}function updateQuickperiod(){var value=getV("quickperiod");if(value=="-"){return true;}var split=value.split(".");if(split.length!=2){return true;}var start=$("#txtRangeStart");var end=$("#txtRangeEnd");var DAY_MULTI=24*60*60*1000;var startDate=new Date();var diff=(startDate.getDay()+6)%7;startDate=new Date(startDate.getTime()-diff*DAY_MULTI);var weeks=parseInt(split[0],10);var endDate=new Date(startDate.getTime()+(7*weeks-1)*DAY_MULTI);start.datepicker("setDate",startDate);end.datepicker("setDate",endDate);if(isFirstDataValue($("#rangeTypeButtonStart"))){$("#rangeTypeButtonStart").click();
}if(isFirstDataValue($("#rangeTypeButtonEnd"))){$("#rangeTypeButtonEnd").click();}return true;}function initDateLimits(elements,format,forced){elements.each(function(){var element=$(this);var validate=function(dateText){if(isEmpty(dateText)){element.removeClass("inputerror");$(""+element.attr("data-alt")).val("");return;}try{$.datepicker.parseDate(element.datepicker("option","dateFormat"),dateText);element.removeClass("inputerror");}catch(e){element.addClass("inputerror");}};if(forced){element.datepicker({format:format,dateFormat:format});}else{element.datepicker({altFormat:format,altField:element.attr("data-alt"),onClose:function(dateText,inst){validate(dateText);}});}try{element.datepicker("setDate",$.datepicker.parseDate(format,element.val()));}catch(e){}element.change(validate(element.val()));});}function initDatePicker(dateLocale){initDatePickerLocales(dateLocale);var selected=$.datepicker.regional[dateLocale.locale];if(selected){selected.firstDay=dateLocale.firstDay;selected.showWeek=dateLocale.showWeek;selected.dateFormat=dateLocale.dateFormat;$.datepicker.setDefaults(selected);}initDateLimits($(".datelimit"),"yymmdd");}var headerPadderHeight=0;function adjustHeaderPadder(){var bottompadder=document.getElementById("bottompadder");if(bottompadder){var height=""+$("#colorExplanation").height();bottompadder.style.paddingBottom=height+"px";}var headerPadder=document.getElementById("headerPadder");if(!headerPadder){return;}var current=""+headerPadder.style.height;var fixed=""+document.getElementById("header").clientHeight;if($(document).width()<=700){fixed="0";}var multiple=1;
if(headerPadder.clientHeight===0){multiple=0;}current=current.substr(0,current.length-2);if(Math.abs(fixed-current)>10){headerPadder.style.height=fixed+"px";}$(".weekDayHeader").css("top",fixed+"px");$(".columnHeaders th").css("top",fixed+"px");headerPadderHeight=(fixed*multiple);}function fitToWindow(){TEHeadline.adjust();adjustHeaderPadder();fitSmallScreen();fitColorExplain();}function fitColorExplain(){var more=$("#colorShowMore");var input=$("#colorCheck");input.unbind("change").change(function(e){if(input.is(":checked")){more.text(more.attr("data-hide"));return;}more.text(more.attr("data-show"));});var inner=$("#colorExplanationInner");if(inner.length>0&&inner.innerHeight()>0&&inner[0].scrollHeight>inner.innerHeight()){$("#colorShowMore").show();return;}$("#colorShowMore").hide();}function fitSmallScreen(){if($(".restable").width()>$(window).width()){$("body").addClass("smallscreen");}}function fitHeaderToScreen(){var diff=$("#topbar").width()-$("#header").width();if(diff>40){$("body").addClass("iosFill");$("#header").width($("#topbar").width());}}var clockdiv;function initClock(){clockdiv=$("#clock");if($("#clock").length===0){return;}tick();}function tick(){if(!clockdiv){return;}if(clockdiv.length===0){return;}var today=new Date();var h=today.getHours();var m=today.getMinutes();var s=today.getSeconds();var time=presentTwoDigits(h)+":"+presentTwoDigits(m)+":"+presentTwoDigits(s);clockdiv.html(time);var t=setTimeout(function(){tick();},500);}function initWindowResize(){$(window).resize(function(){waitForFinalEvent(function(){fitToWindow();initResImages();},200,"windowResize");
});}function initjQueryUI(dateLocale){if(!$.datepicker){return;}initDatePicker(dateLocale);var headlineTimeOverlay=$("#headlineTimeOverlay");headlineTimeOverlay.mousedown(function(){hideHeadlineTimeOverlay();});$("#datePickTimeOverlay").mousedown(function(){hideHeadlineTimeOverlay();});initRange();}function initStatusSelector(){$("#statusselector").change(function(){var element=$(this);var val=element.val();var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");if(isEmpty(val)){clearAllParam(path,"s");}else{setParam(path,"s",val);}window.location=asURL(url,path);});}function initCalendarLink(){var button=$(".iCalDialog");button.unbind("click").click(function(e){expandHeader($("#iCalDialogContent"),false,button,true);stop(e);return false;});$(".printlink").unbind("click").click(function(e){var target=$(this);var name=target.attr("data-target");var move=target.attr("data-move")=="y";if(move){$("#printwrap").insertAfter(target).addClass("printauto");}else{$("#printwrap").insertAfter($("#footer")).removeClass("printauto");}if(target.attr("data-excel")=="y"){$("#printdialog").addClass("exceldialog");}else{$("#printdialog").removeClass("exceldialog");}$("#printdialogtitle").text(target.attr("data-name"));$("#pdfgenerate").val(target.attr("data-create")).attr("onclick",'updatePdflink("'+target.attr("data-url")+'","")');expandHeader($("#"+name+"wrap"),false,target,!move);stop(e);Stats3.call(""+name);return false;});}var hourHeight=1;var resMinHeight=1;var resStartStep=60;var resMinLength=60;var resMaxLength=60;var resMaxEnd=24;var isDrag=false;
var startY=0;var firstHour=0;var slotCopyId="";var weekDiv;var resY=0;var lastResY=0;var resDragTime=0;var ResTime={dates:"",startHour:0,endHour:0,startMinute:0,endMinute:0,timeStep:60,flip:true,slot:false,currentSlot:null,top:function(){if(!weekDiv){return;}return Math.floor(this.start()*hourHeight/60)-firstHour+(ResTime.flip?weekDiv.offset().left:weekDiv.offset().top);},height:function(){return Math.floor(this.length()*hourHeight/60);},start:function(){return this.startHour*60+this.startMinute;},end:function(){return this.endHour*60+this.endMinute;},length:function(){return this.end()-this.start();},update:function(height,minbegin){var off=ResTime.slot?2:Math.min(4,hourHeight/2);var time=firstHour+startY-(ResTime.flip?weekDiv.offset().left+off:weekDiv.offset().top);var startTime=time/hourHeight;if(isNaN(startTime)){startTime=weekDiv.attr("data-beginminute")/60;}if(minbegin>0){startTime=Math.max(startTime,(minbegin/60));}this.startHour=Math.floor(startTime);this.startMinute=this.roundToBeginTimeStep((startTime-this.startHour)*60);if(this.startMinute%resStartStep!==0){this.startMinute=0;}var t=this.startHour*hourHeight+(this.startMinute*hourHeight)/60;var endTime=(t+height)/hourHeight;if(height===0){endTime=(t+resMinHeight)/hourHeight;}this.endHour=Math.floor(endTime);this.endMinute=this.roundToTimeStep(Math.round((endTime-this.endHour)*60));this.applyMinMaxLength();},fixSlot:function(){if(!ResTime.slot){return;}TESlot.jumpAndUpdate(TESlot.current,null,true);},slotsJump:function(){if(!ResTime.slot){return;}TESlot.jump(TESlot.current,null,true);TESlot.jump($(".timeslotEnd"),true,true,true);
},moveToSlot:function(){if(!ResTime.slot){return;}if(!TEReserve){return;}var move=$(TESlot.move(TESlot.current));var val=move.val();if(!val){return;}var start=val.split(":");ResTime.startHour=parseInt(start[0],10);ResTime.startMinute=parseInt(start[1],10);var end=move.attr("data-end");if(isEmpty(end)){return;}var split=end.split(":");ResTime.endHour=parseInt(split[0],10);ResTime.endMinute=parseInt(split[1],10);},fixTime:function(){if(ResTime.slot){return;}this.applyMinMaxLength();if(!ResTime.flip&&this.endHour>resMaxEnd){var diff=this.endHour-resMaxEnd;this.endHour=resMaxEnd;if(this.length()<resMinLength){this.startHour=this.startHour-diff;}}this.applyMinMaxLength();return true;},applyMinMaxLength:function(){if(ResTime.slot){return;}var changed=false;if(!ResTime.flip&&resMaxLength<1500&&this.length()<resMinLength){changed=true;var time=this.start()+resMinLength;this.endHour=Math.floor(time/60);this.endMinute=time-(this.endHour*60);}if(this.length()>resMaxLength){changed=true;var time=this.start()+resMaxLength;this.endHour=Math.floor(time/60);this.endMinute=time-(this.endHour*60);}return changed;},setTimeStep:function(value){this.timeStep=parseInt(value,10);if(isNaN(this.timeStep)||this.timeStep===0){this.timeStep=60;}},roundToTimeStep:function(value){var result=this.timeStep*Math.round(value/this.timeStep);if(result<1){return 0;}if(result>59){return 0;}return result;},roundToBeginTimeStep:function(value){var result=resStartStep*Math.floor(value/resStartStep);if(result<1){return 0;}if(result>59){return 0;}return result;},presentTime:function(){return presentTwoDigits(this.startHour)+":"+presentTwoDigits(this.startMinute)+" - "+presentTwoDigits(this.endHour)+":"+presentTwoDigits(this.endMinute);
},getQuery:function(){return"&dates="+this.dates+"&startTime="+presentTwoDigits(this.startHour)+presentTwoDigits(this.startMinute)+"00"+"&endTime="+presentTwoDigits(this.endHour)+presentTwoDigits(this.endMinute)+"00";},loadFromDrop:function(){ResTime.startHour=parseInt($(".timeHourStart").val(),10);ResTime.endHour=parseInt($(".timeHourEnd").val(),10);ResTime.startMinute=parseInt($(".timeMinuteStart").val(),10);ResTime.endMinute=parseInt($(".timeMinuteEnd").val(),10);}};function resNewHeight(height){ResTime.update(height);res.find(".newDivTime").html(ResTime.presentTime());res.css("height",height);}function resDrag(){if(!isDrag){return;}if(!res){return;}if(lastResY===resY){return;}lastResY=resY;var moveHeight=resY-startY;if(moveHeight<5){return;}var height=Math.max(5,moveHeight);resNewHeight(height);}function dragStart(res,e,container){if(isDrag){return;}if(!res){return;}isDrag=true;startY=e.pageY;weekDiv=container;res.css("left",weekDiv.offset().left+1);res.css("top",e.pageY);res.css("width",weekDiv.width()-2);ResTime.dates=weekDiv.data("dates");ResTime.setTimeStep($("#linksdata").attr("data-timeStep"));resNewHeight(hourHeight);res.show();clearInterval(resDragTime);resDragTime=setInterval(resDrag,30);}function dragMove(e){resY=e.pageY;}function dragEnd(e){if(!isDrag){return;}isDrag=false;clearInterval(resDragTime);openRes(-1,res,"",ResTime.getQuery(),true);}function moveSearchDivBack(){closeHeader();$("#searchDiv").insertAfter($("#linksdata")).removeClass("quicksearch").removeClass("sandMultiType");if(ObjectsSearcher.ztop){ObjectsSearcher.ztop.removeClass("ztop");}}function asParam(key,value){if(isEmpty(value)){return"";
}return"&"+key+"="+value;}var SelectlastXHR=null;function initResboxes(autochange){var resobjects=$(".resobjectselector");if(resobjects.length===0){return;}var box=$("#openSearchButton");var inputDates=$("#leftresdateurl");var inputDatesEnd=$("#leftresdateendurl");if(inputDates.length==0){inputDates=$("#resDateStart");inputDatesEnd=$("#resDateEnd");}var getDateTime=function(){if(isEmpty(inputDates.val())){var box=$(".dateboxtime");return"&dates="+box.attr("data-startDate")+"-"+box.attr("data-endDate")+"&starttime="+encodeURIComponent(box.attr("data-startTime"))+"&endtime="+encodeURIComponent(box.attr("data-endTime"));}var startTime=$(".timeHourStart").val()+":"+$(".timeMinuteStart").val();var endTime=$(".timeHourEnd").val()+":"+$(".timeMinuteEnd").val();var endDate=toString(inputDatesEnd.val());endDate=isEmpty(endDate)?"":"-"+endDate;return"&dates="+inputDates.val()+endDate+"&starttime="+encodeURIComponent(startTime)+"&endtime="+encodeURIComponent(endTime);};var getDateTimeRds=function(){if(isEmpty(inputDates.val())){var times="";$(".dateboxtime").each(function(index){var box=$(this);times+="&rds="+box.attr("data-rds");});return times;}var startTime=$(".timeHourStart").val()+":"+$(".timeMinuteStart").val();var endTime=$(".timeHourEnd").val()+":"+$(".timeMinuteEnd").val();var endDate=toString(inputDatesEnd.val());endDate=isEmpty(endDate)?"":"-"+endDate;return"&dates="+inputDates.val()+endDate+"&starttime="+encodeURIComponent(startTime)+"&endtime="+encodeURIComponent(endTime);};var searchDiv=$("#searchDiv");var changeObject=function(e,fixedTarget){stop(e);var element=$(this);if(fixedTarget){element=fixedTarget;
}var dtd=element.parents("td.dtd");if(dtd.length>0&&!element.hasClass("resobjectsearch")){dtd.click();}var selector=element.attr("data-selector");var dis=element.attr("data-dis");if(isEmpty(selector)){if(element.val()!="X"){objectChanged();return;}}if(!isEmpty(selector)&&selector!="X"){element=$("#"+selector);}element[0].selectedIndex=0;var types=element.attr("data-type");var type=types;if(types.indexOf(",")>0){type=types.substring(0,types.indexOf(","));}if(element.hasClass("autotype")){type=Multicheck.findType(navTables.wrap(),type);}ObjectsSearcher.fancytypeselectorVal(""+type,dis);objectSearcherOrig=element;ObjectsSearcher.time=asParam("subtypes",element.attr("data-subtypes"));if(element.attr("data-phys")==="yes"){ObjectsSearcher.time+=getDateTimeRds();}ObjectsSearcher.quickCallback=function(id,name,e){moveSearchDivBack();var oldId=element.val();element.val(id);objectChanged(id,element,null,null,oldId);};ObjectsSearcher.loadSelected();ObjectsSearcher.selectedObjectsFunction=function(){var first=TEUtil.firstResult(function(){return element.attr("data-o2");},function(){return element.parents("td").attr("data-o2");},function(){var td=element.parents("td");if(isEmpty(td.attr("data-c"))){return;}return td.attr("data-o");});return toString(first)+TEUtil.prefix(",",getObjectBasketIds($("#objectbasket")));};if(element.hasClass("quickmultiadd")){ObjectsSearcher.quickCallback=null;ObjectsSearcher.name="";if(!isEmpty(element.attr("data-name"))){ObjectsSearcher.name=toString(element.attr("data-name"));}MultiAdd.reset();ObjectsSearcher.multiAdd=function(ids){if(planExpandTrigger){planExpandTrigger(element.closest("tr").children(".levelExpand").first(),false,false);
}objectChanged(ids,element);moveSearchDivBack();};}if(element.hasClass("quickreplace")){searchDiv.addClass("quickadd");var title=searchDiv.find("#searchhelptitle");if(title.length===0){searchDiv.find(".fancysearchform").prepend('<span id="searchhelptitle" class="searchTitle"></span>');}searchDiv.find("#searchhelptitle").text(toString($("#plandata").attr("data-replacetext")));}var moveTo=element.parent();if(element.prop("tagName").toLowerCase()=="td"){moveTo=element;}if(moveTo.prop("tagName").toLowerCase()=="label"){moveTo=moveTo.parent();}ObjectsSearcher.ztop=moveTo;if(ObjectsSearcher.ztop.parent().prop("tagName").toLowerCase()=="td"){ObjectsSearcher.ztop=ObjectsSearcher.ztop.parent();}ObjectsSearcher.ztop.addClass("ztop");searchDiv.appendTo(moveTo);searchDiv.addClass("quicksearch");var searchfield=$("#ffsearchname");searchfield.val("");if(navTables.editoverlay){navTables.editoverlay.show();}var hidden=searchDiv.is(":visible");$("#openSearchButton").click();searchDiv.css("left","auto");if(types.indexOf(",")>0){searchDiv.addClass("sandMultiType");}ObjectsSearcher.my=element.attr("data-my")==="yes";if(element.hasClass("autoCat")){var text=$.trim(element.parent().next().text());var sel=searchDiv.find(".fancyformfieldsearchselect option");var opt=sel.filter(function(){return this.text==text;});if(opt.length>0){opt.parent().find("option:selected").removeAttr("selected");opt.attr("selected","selected");searchDiv.find(".fancyformfieldsearchselect").trigger("change");}}ObjectsSearcher.loadSearch();searchfield.focus();if(resobjects.attr("data-forceshow")==="yes"){searchDiv.show();}if(hidden){setTimeout(moveSearchDivBack,200);
}};resobjects.unbind("change").change(changeObject);$(".resobjectsearch").unbind("click").click(changeObject).unbind("keypress").bind("keypress",function(e){if(e.which==13){changeObject(e,$(this));}});initObjectSelector();initTagSelector();var addSelector=function(e){stop(e);var element=$(this);var selector=element.attr("data-selector");var typeid=element.attr("data-type");if(isEmpty(selector)){if(element.val()!="X"){return;}}if(!isEmpty(selector)){element=$("#"+selector);}$(".saveok").removeClass("saveok");var count=$(".type"+typeid).length;var row=element.parent().parent().parent();var clone=row.clone(true);var select=clone.find(".resobjectselector");var id=select.attr("id")+"_"+count;select.attr("id",id).val("");var resobjectsearch=clone.find(".resobjectsearch");resobjectsearch.attr("data-selector",id);resobjectsearch.find(".objectname").html('<span class="mandatory">'+select.attr("data-add")+"</span>");clone.find(".resobjectcreate").attr("data-selector",id);clone.find(".resobjectminus").attr("data-confirm","").attr("data-selector","emptyX");row.after(clone);};$(".resobjectcreate").click(addSelector);var allObjects=function(onlyFirst){var values=$.map($(".resobjectselector"),function(element){var e=$(element);var found=e.val();var name=e.text();if(isEmpty(found)){return null;}if(!isEmpty(name)){found+=","+encodeURIComponent(""+name);}return"&o="+found;});if(onlyFirst){return""+values[0];}return values.join("");};var extraObjects=function(){return"&aos="+encodeURIComponent(""+$("#linksdata").attr("data-searchids"));};var orig=$(".continueRes");var resform=$("#reserveformedit");
var refill=function(array){for(var i=0;i<array.length;i++){var input=resform.find("[name="+array[i].name+"]");if(array[i].name=="restags"){var newOption=new Option(array[i].value,array[i].value,true,true);input.append(newOption).trigger("change");continue;}if(isEmpty(input.val())){input.val(array[i].value);}if(isCheck(input)){input.attr("checked","checked");}}};var postChangeObjects=function(origin,returnUrl,newId,oldId){$(".leftrescontent").addClass("loading");var array=resform.serializeArray();array.push({"name":"newId","value":toString(newId)});array.push({"name":"oldId","value":toString(oldId)});var extra="1&ao=t&rtt="+returnUrl;$(".postsavewrap").remove();var jqxhr=post2(submitTarget(extra),array,function(data){parent.$.fancybox.reloadOnClose=true;reloadParentView();reloadpage(origin);setItem("saveok_"+objectSearcherFF,"t");},function(jqXHR,textStatus,errorThrown){setItem("saveok_"+objectSearcherFF,"");var text=toString(jqXHR.responseText);$(".leftreserror").text(text);$(".leftrescontent").removeClass("loading");$(".saveok").removeClass("saveok");$(".savefailed").removeClass("savefailed");var tr=origin.parent().parent();tr.addClass("savefailed");tr.append('<div class="postsavewrap stacktraceError">'+text+"</div>");alert(text);});};var objectChanged=function(newId,origin,onfail,resetAll,oldId){var form=$(".resChangeForm");if(!isEmpty(newId)&&form.length!=0){resform=form;}if(isEmpty(resform.attr("action"))&&!isEmpty(newId)){savePlan(newId,origin);return;}if(resform.length===0){return;}if(!isEmpty(newId)&&form.length!=0){postChangeObjects(origin,origin.attr("data-rtt"),newId,oldId);
return;}if(resetAll){$("#leftreswrap").find(".resinputfield").val("");}if(origin){origin.parents(".resobjectsearch").addClass("loading");}else{$(".resobjectsearch:first").addClass("loading");}var updateLeftRes=function(data,array,caller){if(!(SelectlastXHR===caller)){return;}if($("#searchDivContent2:visible").length>0){setTimeout(function(){moveSearchDivBack();updateLeftRes(data,array,caller);},500);return;}$("#leftreswrap").html(data);if(!isEmpty(slotCopyId)){var content=$(".leftrescontent");$(".timeHourStart").val(presentTwoDigits(content.attr("data-startHour")));$(".timeHourEnd").val(presentTwoDigits(content.attr("data-endHour")));$(".timeMinuteStart").val(presentTwoDigits(content.attr("data-startMinute")));$(".timeMinuteEnd").val(presentTwoDigits(content.attr("data-endMinute")));ResTime.loadFromDrop();drawRes(null,true);res.find(".newDivTime").html(ResTime.presentTime());ResTime.slotsJump();}if(res.attr("data-slotlock")=="n"){slotCopyId="";}refill(array);initResboxes();ObjectsSearcher.initFields();};var array=resform.serializeArray();var caller=$.ajax(submitTarget("1&ao=t&slotcopy="+slotCopyId,resetAll)).done(function(data){updateLeftRes(data,array,caller);}).fail(function(jqXHR,textStatus,errorThrown){if(onfail){onfail();}$(".leftreserror").text(" "+textStatus+" ("+errorThrown+")");});SelectlastXHR=caller;};$(".resformreset").unbind("click").click(function(e){stop(e);$(".resobjectsearch").addClass("loading");objectChanged(0,$(getTarget(e)),null,true);return false;});$(".resobjectminus").unbind("click").click(function(e){stop(e);var target=$(getTarget(e));if(target.attr("data-selector")=="emptyX"){target.closest("tr").remove();
return;}var text=target.attr("data-confirm");if(!isEmpty(text)&&!confirm(text)){return;}var selector=target.attr("data-selector");var form=$(".resChangeForm");if(form.length!=0){moveSearchDivBack();var oldId=$("#"+selector).val();$("#"+selector).removeAttr("value");$("#"+selector).next().html("&nbsp;");resform=form;postChangeObjects(resform,4,0,oldId);return false;}if(!isEmpty(selector)){moveSearchDivBack();$("#"+selector).removeAttr("value");objectChanged();}return false;});var submitTarget=function(step,resetAll){return""+resform.attr("action")+"&id=-1&step="+step+allObjects(resetAll)+extraObjects()+getDateTime()+"&"+resform.serialize();};orig.unbind("click").click(function(e){var terms=$(".remindermailterms");terms.parent().removeClass("errormessage");if(terms.length!=0&&!terms.is(":checked")){terms.parent().addClass("errormessage");$(".leftreserror").html(""+terms.attr("data-notchecked"));return;}$(".leftreserror").html("");$("#newResTimeDiv").removeClass("errorbox");var urlvalue="&url="+encodeURIComponent(window.location.href);var lang=Qt.join("&l",$("#linksdata").attr("data-lang"));var allData="kind=reserve&nocache=4"+lang+allObjects()+extraObjects()+getDateTime()+urlvalue;var form=resform.serialize();if(!isEmpty(form)){allData+="&"+form;}var location=window.location.href.split("#")[0];post2(location,allData,function(data){var id=$(data).find("#table0").attr("data-resid");if(!id){$(".leftreserror").html('<span class="stacktraceError">'+data+"</span>");Stats3.call("mix-reserve-continue-fail");return;}window.location.hash=window.location.hash+"-"+id;var content=$(data).find(".infowrap");
var element=$("#resconfirm");element.html(content);var mail=$(data).find("#mailwrap");if(mail.length!=0){$("#mailtopwrap").html(mail.html());}var length=element.find(".statusrequested").length;if(length>0){$("#resmadetoptext").html(""+$("#resmadetoptext").attr("data-req"));$(".showsendmail").val(""+$("#showsendmail").attr("data-req"));$("#makemoreres").val(""+$("#makemoreres").attr("data-req"));}else{$("#resmadetoptext").html(""+$("#resmadetoptext").attr("data-res"));$(".showsendmail").val(""+$("#showsendmail").attr("data-res"));$("#makemoreres").val(""+$("#makemoreres").attr("data-res"));}$("#moreshowsendmail").hide();resreloadneeded=true;initSendMail();initTagSelector();showTab(4);$(".leftressearch").hide();$("#makemoreres").focus();},function(xhr,textStatus,errorThrown){$(".timedrop").removeAttr("readonly").removeAttr("disabled");var text=toString(xhr.responseText);$(".leftreserror").html('<div class="stacktraceError">'+text+"</div>");$("#newResTimeDiv").addClass("errorbox");markMandatoryFields();alert(text);});e.stopPropagation();e.preventDefault();return false;});if(autochange){objectChanged();}return objectChanged;}function markMandatoryFields(){$(".resinputfield").each(function(){var element=$(this);if(element.attr("data-min")>0&&isEmpty(element.val())){element.addClass("needContent");}if(element.attr("data-min")>0&&!isEmpty(element.val())){element.removeClass("needContent");}});}function drawRes(e,timeOnly){if(!weekDiv){return;}if(weekDiv.offset().left==0){return;}if(ResTime.flip){if(!timeOnly){res.css("height",res.attr("data-hourHeight")-2);if(e){res.css("top",$(getTarget(e)).offset().top);
}}res.css("width",ResTime.height()-3);res.css("left",ResTime.top()+2);return;}res.css("left",weekDiv.offset().left);res.css("width",weekDiv.width());res.css("top",ResTime.top());res.css("height",ResTime.height());}function moveRes(e,container,objectChanged){ResTime.flip=$("#linksdata").data("flip");var zoomedIn=true;if(ResTime.flip){var zoom=container.closest(".zoomedIn");if(zoom.length>0){hourHeight=zoom.find(".hourtop").width();}else{zoomedIn=false;hourHeight=Math.max(20,$(".hourtop").width());}}slotCopyId="";var minbegin=0;if(container.hasClass("slotfree2")){weekDiv=container;firstHour=weekDiv.attr("data-beginminute")/60*hourHeight;slotCopyId=toString(container.attr("data-copyid"));minbegin=container.attr("data-beginminute");}if(!weekDiv){return;}ResTime.dates=weekDiv.data("dates");ResTime.setTimeStep($("#linksdata").attr("data-timeStep"));if(e){startY=e.pageY;if(ResTime.flip){startY=e.pageX;}}var length=(res.attr("data-preferedLength")*hourHeight)/60;ResTime.update(length,minbegin);ResTime.fixTime();ResTime.moveToSlot();drawRes(e);if(zoomedIn){res.removeClass("newResNoZoom");}else{res.addClass("newResNoZoom");}return zoomedIn;}function clickChangeTimes(e,container,objectChanged){moveRes(e,container,objectChanged);var dates=weekDiv.attr("data-dates");if(isEmpty(dates)){dates=container.attr("data-dates");}var date=parseDate(dates);$("#leftresdate").datepicker("setDate",date);$("#leftresdateend").datepicker("setDate",date);$("#leftresdatepresent").val(""+$("#leftresdate").val());if(!$("#leftresdate").datepicker("getDate")){var textdate=$.datepicker.formatDate("yy-mm-dd",date);
$("#leftresdatepresent").val(""+textdate);var dateurl=textdate.replace(/-/g,"");$("#leftresdateurl").val(dateurl);}$(".timeHourStart").val(presentTwoDigits(ResTime.startHour));$(".timeHourEnd").val(presentTwoDigits(ResTime.endHour));$(".timeMinuteStart").val(presentTwoDigits(ResTime.startMinute));$(".timeMinuteEnd").val(presentTwoDigits(ResTime.endMinute));var value=weekDiv.attr("data-object");if(isEmpty(value)){value=container.attr("data-object");}if(!value){value=$(getTarget(e)).attr("data-object");}var idtype=toString(value).split(".");if(idtype.length==2){window.location.hash="00"+idtype[0];var selectors=$(".resobjectselector");selectors.each(function(index){var element=$(this);if(element.attr("data-relatedonly")==="t"){element.val("");}});var needUpdate=false;selectors.each(function(index){var element=$(this);if(element.attr("data-type")==idtype[1]){if(value!=element.val()){element.val(value);if(value==element.val()){needUpdate=true;}}return false;}});if(!isEmpty(slotCopyId)){needUpdate=true;}if(needUpdate){var fail=function(){window.location.reload();};objectChanged("","",fail);}}}function getTargetSafari(target){if(target.nodeType==3){return target.parentNode;}return target;}function getTarget(e){if(!e){return null;}if(e.target){return getTargetSafari(e.target);}if(e.srcElement){return getTargetSafari(e.srcElement);}return null;}function initReserveTabs(){var tabs=$(".expandtab");var content=$(".ewrap");tabs.each(function(index,element){if(index<1){$(element).click(function(e){showTab($(element).attr("data-nr"));});}});}function showTab(nr){if(nr=="2"){leftresreloadopen();
}if(nr=="3"){resetMail();}if(loadMyRes){loadMyRes();}$(".stacktraceError").html("");var content=$(".ewrap");$(".expandtab").removeClass("expandtabselected expandtabdone expandtabprev");for(var i=0;i<nr;i++){$(".expandtab"+i).addClass("expandtabdone");if(i==(nr-1)){$(".expandtab"+i).addClass("expandtabprev");}}$(".expandtab"+nr).addClass("expandtabselected");$(".expandtab"+nr+"content").show();return false;}function isArray(what){return Object.prototype.toString.call(what)==="[object Array]";}function createHtml(wrap){var data=wrap.objects;if(!isArray(data)){if(isEmpty(wrap)){return"";}return'<div class="emptysearchicon"></div><div class="emptysearch">'+wrap+"</div>";}var ids="";for(var i=0;i<data.length;i++){var object=data[i];ids+=object.idAndType+",";}$("#objectselectionresult").attr("data-expandAll","t");return'<div class="resetObjectExpand accopen" data-expandAll="t" data-id="'+ids+'"></div><div class="resetObjectAll"></div>';}var nextObjectSelectionLimit="max=50";function loadObjectSelection(url,userobjects,next,hourtext){var header=$("#objectresultheader");$("#objectresultheadertext").html(""+header.attr("data-resulttext"));if(!isEmpty(hourtext)){$("#objectresultheadertext").html(""+header.attr("data-free")+" "+hourtext);}header.show();var result=$("#objectselectionresult");$.getJSON(url,function(data,status,xhr){if(status==="error"){result.html('<p class="stacktraceError">A problem occurred:<br> '+xhr.responseText+"</p>");}else{var html=createHtml(data);if(userobjects&&!isEmpty(html)){$("#objectresultheadertext").html(""+header.attr("data-userobjectstext"));}if(next){result.append(html);
}else{result.html(html);}if(!userobjects&&data.hasMore){nextObjectSelectionLimit="start="+(data.limit.startDefaultZero+data.limit.maxDefaultZero)+"&max=50";var link=$("#nextObjectSelectionLink");link.attr("data-next","t");link.html(""+link.attr("data-load"));link.show();}else{$("#nextObjectSelectionLink").hide();}if(userobjects){nextObjectSelectionLimit="start=0&max=50";$("#nextObjectSelectionLink").show();}initExpandRes();}}).fail(function(jqxhr,textStatus,error){result.html('<p class="stacktraceError">A problem occurred:<br> '+TEError.asText(jqxhr,textStatus,error)+"</p>");});}var lastFreeTime="";function runObjectSelection(userObjects,next,more){var resultFields="";var type=""+$("#objectselectionresult").attr("data-typeid");$("#ffsetx"+type+" .objectinput").each(function(){var input=$(this);var isSelect=input.is("select");var isInt=input.attr("data-tefieldkind")==="INTEGER";var isText=input.hasClass("objectinputtext");if(!input.is(":checked")&&!isInt&&!isSelect&&!isText){return;}if(input.val()==input.attr("data-value")&&!isSelect&&!isText){return;}var found=input;if(isSelect){found=input.val();}if(isInt){found=$("."+input.attr("data-classname"));}var values=$.map(found,function(checkbox){if(typeof checkbox==="object"&&checkbox!==null){return encodeURIComponent(encodeURIComponent(""+checkbox.value));}return encodeURIComponent(encodeURIComponent(""+checkbox));});var valueText=values.join(",");if(isInt){valueText=values.join("-");}var field=Qt.join("&"+input.data("param"),valueText,input.data("prefix"));if(!isEmpty(field)){resultFields+=field;}});var types=Qt.join("&types",type);
var subtypes=Qt.join("&subtypes",""+$("#objectselectionresult").attr("data-subtypes"));var sid=Qt.join("&sid",$("#linksdata").attr("data-sid"));var lang=Qt.join("&l",$("#linksdata").attr("data-lang"))+Qt.join("&ohg",$("#linksdata").attr("data-objectGroupField"));var uo="";if(userObjects){uo="&uo=t&ff=t";}var time="";var hourtext="";var startHour=TEUtil.asInt($(".timeHourStart3").val());var endHour=TEUtil.asInt($(".timeHourEnd3").val());var startMinute=TEUtil.asInt($(".timeMinuteStart3").val());var endMinute=TEUtil.asInt($(".timeMinuteEnd3").val());lastFreeTime="";var hasFreeTime=startHour>0&&(startHour>0||endHour>0)&&(startHour<endHour||startMinute<endMinute);TEZoom.searchAfterZoom=hasFreeTime;if(hasFreeTime){var date=$("#leftresdateurl").val();var dates=date+"-"+date;var days=$("#objectselectionresult .weekDay:visible").map(function(){return $(this).attr("data-day");}).get();if(days.length>0){dates=days[0]+"-"+days[days.length-1];}lastFreeTime=dates+"&starttime="+startHour+":"+startMinute+"&endtime="+endHour+":"+endMinute;if(days.length==1){lastFreeTime="";time="&dates="+date+"-"+date+"&starttime="+startHour+":"+startMinute+"&endtime="+endHour+":"+endMinute;}hourtext=presentTwoDigits(startHour)+":"+presentTwoDigits(startMinute)+" - "+presentTwoDigits(endHour)+":"+presentTwoDigits(endMinute);}$("#lastFreeTimelabel").html(hourtext);if(!next&&!more){nextObjectSelectionLimit="max=50";}if(more&&$("#nextObjectSelectionLink").attr("data-next")==="t"){next=true;}var fixedObjects=$("#linksdata").attr("data-searchfixed");if(!isEmpty(fixedObjects)){fixedObjects="&id="+fixedObjects;}var query=nextObjectSelectionLimit+"&fr=f&part=t&partajax=t&im=f&step=1"+sid+lang+types+subtypes+uo+resultFields+time;
var url=urlPrefix()+"objects.json?"+query+toString(fixedObjects);loadObjectSelection(url,!isEmpty(uo),next,hourtext);}function showextrafields(id){$(".extrafields").toggle();var $link=$("#showextrafields"+id);var altText=$link.data("alt-text");$link.data("alt-text",$link.text());$link.text(altText);return false;}function addallbutton(){var basket=$("#objectbasket");$("#objectsearchresult .searchObject").each(function(){var element=$(this);addBasketItem(basket,element.attr("data-id"),element.attr("data-name"));});return false;}var waitObjectSelectionTimeOutId=0;var waitObjectSelectionlastEvent=0;function waitObjectSelection(){clearTimeout(waitObjectSelectionTimeOutId);var diff=new Date().getTime()-waitObjectSelectionlastEvent;if(diff<100){waitObjectSelectionTimeOutId=window.setTimeout(waitObjectSelection,100);return;}runObjectSelection();}function resFirstObjectSelection(){var newResDiv=$("#newResDiv");if(newResDiv.length===0){return;}runObjectSelection(newResDiv.attr("data-userObjects")=="y");}function initObjectSelection(){$(".objectinputsearchbuttonSecond").click(function(e){waitObjectSelection();return false;});$(".objectinputselect").change(function(){waitObjectSelection();});$(".objectinput").each(function(){var val="";var input=$(this);var check=function(e){if(e.which==13){clearTimeout(waitObjectSelectionTimeOutId);waitObjectSelection();return;}waitObjectSelectionlastEvent=new Date().getTime();if(isCheck(input)){waitObjectSelection();return;}if(input.is("select")){waitObjectSelection();return;}if(val===(val=input.val())){return;}if(isEmpty(val)){return;}waitObjectSelection();
};$(this).bind("keyup blur update change",check);});}var initSlotClick;function isImage(url){if(isEmpty(url)){return false;}var lower=url.toLowerCase();if(endsWith(lower,".png")){return true;}if(endsWith(lower,".jpg")){return true;}if(endsWith(lower,".gif")){return true;}return false;}function shortURL(url){if(isEmpty(url)){return url;}var result=url.replace("http://","").replace("https://","");var index=result.indexOf("/");if(index>0){return result.substring(0,index);}return result;}function initExpandRes(){function updateResPageLink(){var url=$("#objectselectionresult .weekContainer").attr("data-linktopage");if(isEmpty(url)){return;}var help=$(".linktorespage").attr("data-open");$(".linktorespage").html('<a href="'+url+'" title="'+help+'" class="clickable respagelink hasHelp" target="_blank"><span class="tesprite tesprite-external"></span><span class="help helptop">'+help+"</span></a>");}var accordianList=$(".resetObjectExpand");var expandAll=accordianList.attr("data-expandAll")=="t";var done=function(e){reshide();var next=e.next();if(!e.hasClass("accopen")){return;}var idAndType=""+e.attr("data-id");var virtual=""+e.attr("data-virtual");if(virtual==="true"){$("#continueRes2").val(""+$("#continueRes2").attr("data-req"));}else{$("#continueRes2").val(""+$("#continueRes2").attr("data-res"));}changeObjectIds(idAndType,true,false,function(url,path){setParam(path,"part","t");setParam(path,"tg","-1");setParam(path,"se","f");if(virtual==="true"){setParam(path,"vo","t");}if(!isEmpty(leftdate)){setParam(path,"p",leftdate);setParam(path,"exw",TEZoom.oneDay?"f":"t");setParam(path,"dates",lastFreeTime);
}var location=asURL(url,path);e.addClass("loading");e.parent().addClass("loading");if(!expandAll){ObjectsSearcher.abort();}ObjectsSearcher.lastXHR=$.ajax(location).done(function(data){e.removeClass("loading");e.parent().removeClass("loading");var content=expandAll?next:$("td",next);content.html(data);initSlotClick(content);updateResPageLink();TEHeader.adjust();if(TEZoom.oneDay&&!isEmpty(leftdate)){TEZoom.zoomOneDay();}}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,e);});});};if(expandAll){var doneAll=function(){accordianList.each(function(index,input){done($(input));});};doneAll();accordianList.last().click(function(){waitForFinalEvent(function(){doneAll();},1,"accordianList");});return;}initAccordian(accordianList,done,done);}var locked=false;var resreloadneeded=false;function reshide(){locked=false;if(res){if(resreloadneeded&&res.is(":visible")){var ghost=$(document.createElement("div"));ghost.addClass("bookingDiv ghostDiv");ghost.attr("style",$("#newResDiv").attr("style"));$("#objectselectionresult").find(".resetObjectAll:first").append(ghost);}res.hide();$("#newResTimeDiv").hide();}if(resreloadneeded){resreloadneeded=false;leftresreloadopen();}return false;}function isResOutside(otherReservations){if(!weekDiv){return false;}if(res.collidesWith(otherReservations)){return true;}return(res.offset().top+res.height())>(weekDiv.offset().top+weekDiv.height());}function initReserve(onlySlotDrop){var objectChanged=initResboxes($("#plandata").length===0);var newResDiv=$("#newResDiv");if(newResDiv.length===0&&onlySlotDrop!=true){return;}TEZoom.oneDay=$("#contents").width()<820||$(".weekZoomDay").hasClass("zoomPressed");
$(".objectinputtext").focus();var resTime=$("#newResTimeDiv");ResTime.slot=$("#newResDiv").data("slot");initReserveTabs();initObjectSelection();res=newResDiv;hourHeight=res.attr("data-hourHeight");resMinHeight=res.attr("data-resMinHeight");resStartStep=res.attr("data-resStartStep");resMinLength=res.attr("data-resMinLength");resMaxLength=res.attr("data-resMaxLength");resMaxEnd=res.attr("data-resMaxEnd");if(!res.is(":visible")){res.css("height",resMinHeight-1);}firstHour=res.attr("data-firstHour")/60*hourHeight;var newDivTime=res.find(".newDivTime");var show=!res.hasClass("notLoggedIn");initSlotClick=function(content){if(!content){TEZoom.init();}if(content){TEZoom.initZoom();var c=content.find(".slotfreetarget");resMinHeight=c.attr("data-resMinHeight");resStartStep=c.attr("data-resStartStep");resMinLength=c.attr("data-resMinLength");resMaxLength=c.attr("data-resMaxLength");resMaxEnd=c.attr("data-resMaxEnd");if(!res.is(":visible")){res.css("height",resMinHeight-1);}firstHour=c.attr("data-firstHour")/60*hourHeight;}if(!isMobileSafari()){var otherReservations=$(".fgDiv");$(".leftbody").bind("mousemove",function(e){if(locked){return;}var name=""+getTarget(e).className;if(show&&name.indexOf("slotfreetarget")!==-1){res.show();var found=$(getTarget(e));var zoomedIn=moveRes(e,found,objectChanged);if(isResOutside(otherReservations)){if(!$.browser.msie){res.hide();}}newDivTime.html(zoomedIn?ResTime.presentTime():"");stop(e);return false;}reshide();});}var moveResPopup=function(){var center=$(window).width()/2-resTime.width()/2;var top=res.cssInt("top")+res.height();resTime.css("top",top).css("left",res.offset().left-16).css("right","auto");
if($(window).width()<600){resTime.css("top",top).css("left",center).css("right","auto");}if(!resTime.visible(false)){resTime.css("top",top).css("left",center).css("right","auto");}if(!resTime.visible(false)){var viewportTop=$(window).scrollTop();var viewportBottom=viewportTop+$(window).height();resTime.css("top",viewportBottom-resTime.height()-60).css("left",center).css("right","auto");if(!resTime.visible(false)){resTime.css("top",viewportTop+4);}}};$(".weekZoomFirst").unbind("click").bind("click",function(e){stop(e);TEZoom.zoomFirst();TEZoom.disableOneDay();if(TEZoom.searchAfterZoom){runObjectSelection();}Stats3.call("mix-reserve-weektoggle");return false;});$(".weekAdminZoomFirst").unbind("click").bind("click",function(e){stop(e);$("#weekLayoutRes").attr("checked",!$("#weekLayoutRes").attr("checked"));var result=$("#weekLayoutRes").attr("checked");if(result){$(".weekAdminZoomWeek").removeClass("zoomPressed");$(".weekAdminZoomDay").addClass("zoomPressed");}else{$(".weekAdminZoomWeek").addClass("zoomPressed");$(".weekAdminZoomDay").removeClass("zoomPressed");}return false;});function initWeekDayHeaderClick(){$(".weekDayHeader").unbind("click").bind("click",function(e){stop(e);TEZoom.zoom(getTarget(e),true);TEZoom.disableOneDay();if(TEZoom.searchAfterZoom){runObjectSelection();}Stats3.call("mix-reserve-continue-header-"+($(getTarget(e)).hasClass("weekDayHeaderFirst")?"week":"day"));return false;}).addClass("clickable");}initWeekDayHeaderClick();TEHeader.afterInit=initWeekDayHeaderClick;$(".weekHourLine").unbind("click").bind("click",function(e){stop(e);TEZoom.zoom(getTarget(e),false,true);
return false;});var clickFree=function(e){var name=""+getTarget(e).className;if(name.indexOf("slotfreetarget")!==-1){stop(e);if(TEZoom.zoom(getTarget(e),false)){return false;}if(res.hasClass("notLoggedIn")){return false;}show=false;resetMail();$(".leftressearch").show();$(".expandtab4content").hide();res.show();locked=true;clickChangeTimes(e,$(getTarget(e)),objectChanged);newDivTime.html(ResTime.presentTime());var updateOther=function(name){$(name+"2").val($(name).val());};updateOther(".timeHourStart");updateOther(".timeMinuteStart");updateOther(".timeHourEnd");updateOther(".timeMinuteEnd");resTime.insertAfter(res);resTime.removeClass("errorbox");resTime.show();$(".timeHourStart").focus();moveResPopup();setTimeout(moveResPopup,100);ResTime.fixSlot();show=true;}return false;};$(".slotfreetarget").unbind("click").bind("click",clickFree).unbind("keypress").bind("keypress",function(e){if(e.which==13){clickFree(e);}});function markLastReservation(){if(window.location.hash!==""){var hash=window.location.hash;var split=hash.split("-");if(split.length==2){$(".r"+split[1]).addClass("c-100");}}}markLastReservation();};resTime.find(".resnext").click(function(e){reshide();show=false;$(".leftreserve").show();showTab(3);show=true;});var updateOther=function(name){$(name).val($(name+"2").val());};var updateTimeDrop=function(){updateOther(".timeHourStart");updateOther(".timeMinuteStart");updateOther(".timeHourEnd");updateOther(".timeMinuteEnd");ResTime.loadFromDrop();};var timeSlotChanged=function(target,e,moveEnd){if(target.length==0){return;}if(target.hasClass("timeslotStart")){var start=target.val().split(":");
$(".timeHourStart").val(start[0]);$(".timeMinuteStart").val(start[1]);var current=target.children("option:selected");var ends=current.attr("data-ends").split(",");var select=$(".timeslotEnd");var oldEnd=$(".timeHourEnd").val()+":"+$(".timeMinuteEnd").val();select.children("option").remove();for(index=0;index<ends.length;index++){select.append('<option value="'+ends[index]+'">'+ends[index]+"</option>");}var curEnd=current.attr("data-end");if(!moveEnd){select.val(oldEnd);if(select.val()!=oldEnd){select.val(curEnd);}}else{select.val(curEnd);}if(select.val()==null){select.append('<option value="'+curEnd+'">'+curEnd+"</option>");select.val(curEnd);}var end=select.val().split(":");$(".timeHourEnd").val(end[0]);$(".timeMinuteEnd").val(end[1]);}if(target.hasClass("timeslotEnd")){var end=target.val().split(":");$(".timeHourEnd").val(end[0]);$(".timeMinuteEnd").val(end[1]);}if(target.hasClass("timeslotBoth")){var times=target.val().split("-");var start=times[0].split(":");var end=times[1].split(":");$(".timeHourStart").val(start[0]);$(".timeMinuteStart").val(start[1]);$(".timeHourEnd").val(end[0]);$(".timeMinuteEnd").val(end[1]);}if(!onlySlotDrop){timeDropChanged(e);}};$(".timeslotdrop").change(function(e){var element=$(getTarget(e));timeSlotChanged(element,e);EditField.saveFields(false,element,true);});var timeDropChanged=function(e){ResTime.loadFromDrop();if(ResTime.fixTime()){$(".timeHourStart2").val(presentTwoDigits(ResTime.startHour));$(".timeMinuteStart2").val(presentTwoDigits(ResTime.startMinute));$(".timeHourEnd2").val(presentTwoDigits(ResTime.endHour));$(".timeMinuteEnd2").val(presentTwoDigits(ResTime.endMinute));
updateTimeDrop();}if(ResTime.applyMinMaxLength()){$(".timeHourEnd2").val(ResTime.endHour);$(".timeMinuteEnd2").val(ResTime.endMinute);updateTimeDrop();}newDivTime.html(ResTime.presentTime());drawRes(e,true);};resTime.find(".timedrop").change(function(e){if(ResTime.flip){timeDropChanged(e);return;}if(!ResTime.flip){return;}updateTimeDrop();if(ResTime.fixTime()){$(".timeHourStart2").val(ResTime.startHour);$(".timeMinuteStart2").val(ResTime.startMinute);$(".timeHourEnd2").val(ResTime.endHour);$(".timeMinuteEnd2").val(ResTime.endMinute);}if(ResTime.applyMinMaxLength()){$(".timeHourEnd2").val(ResTime.endHour);$(".timeMinuteEnd2").val(ResTime.endMinute);updateTimeDrop();}updateTimeDrop();newDivTime.html(ResTime.presentTime());drawRes(e);});if(!onlySlotDrop){initSlotClick();initExpandRes();}return{timeSlotChanged:timeSlotChanged};}function addColumnInfo(row,element,val,prefix,index,customName,classname){var e=element.clone().attr("name",prefix+"_"+val).removeAttr("id");if(!isEmpty(classname)){e.addClass(classname);}if(index>0){e.val(index);}if(!isEmpty(customName)){e.val(customName);}if(prefix=="columnNr"||prefix=="columnMyNr"){e.addClass("columnPos");}if(endsWith(prefix,"Fid2")){TELanguage.fill(row.attr("data-key"),"Fid2",e,TELanguage.SECOND_FIELD);}if(endsWith(prefix,"Name")){TELanguage.fill(row.attr("data-key"),"Name",e,"ns");}e=$("<td></td>").append(e);row.append(e);}function addColumn(val,id,name,listColumns,index,field,customName,detail,inputName,content){if(isEmpty(val)){return;}if(val==="-"){return;}if(isEmpty(content)){content="";}var last=listColumns.find('input[name="'+inputName+'"]').length;
var type=val;val=val+"_"+last;var title=""+$("#linksdata").attr("data-remove");var row=$("<tr data-key="+inputName+"><td>"+name+'<input type="hidden" name="'+inputName+'" value="'+val+'"></td></tr>');var dropdown=$("#asFieldDropdown"+id);if(id==="x9"){row.append('<td><input type="text" name="'+inputName+"Content_"+val+'" value="'+content+'"></td>');}else{addColumnInfo(row,dropdown,val,inputName+"Fid",field);addColumnInfo(row,dropdown,val,inputName+"Fid2",field);}if(inputName=="column"||inputName=="columnMy"){addColumnInfo(row,$("#asColumnNumber"),val,inputName+"Nr",index);addColumnInfo(row,$("#asColumnName"),val,inputName+"Name",0,customName);}else{if(inputName=="columnICal"){addColumnInfo(row,$("#asColumnNumberIcal"),val,inputName+"Nr",index);if(id==="x9"){addColumnInfo(row,$("#asColumnName"),val,inputName+"Name",0,"a","hidden");}else{addColumnInfo(row,$("#asColumnName"),val,inputName+"Name",0,customName);}}}if(inputName.indexOf("columnPlan")!=-1){addColumnInfo(row,$("#asColumnNumberPlan"),val,inputName+"Nr",index);}if(inputName=="column"||inputName=="columnMy"||inputName.indexOf("columnPlan")!=-1){var checked=detail===true?" CHECKED ":"";$('<td class="textcenter"><input type="checkbox" name="'+inputName+"Detailed_"+val+'"'+checked+"></td>").appendTo(row);}if(inputName.indexOf("columnPlan")!=-1){var checked=Plans.isLimitType(type,index)?" CHECKED ":"";$('<td class="textcenter"><input type="checkbox" name="'+inputName+"LimitType_"+val+'"'+checked+"></td>").appendTo(row);var checked=Plans.isMandatory(type,index)?" CHECKED ":"";$('<td class="textcenter"><input type="checkbox" name="'+inputName+"Mandatory_"+val+'"'+checked+"></td>").appendTo(row);
}var removeLink=$('<td><a href="#" title="'+title+'" class="bl clickable"><span class="tesprite tesprite-trash"></span></a></td>').appendTo(row);removeLink.click(function(e){stop(e);row.remove();});listColumns.append(row);}function initAdminColumns(listColumns,asAddColumn,newName,reorder){listColumns.children("li").click(function(){$(this).remove();});var inputName=""+newName;asAddColumn.change(function(){var element=$(this);var val=element.val();if(isEmpty(val)){return;}var selected=element.children("option:selected");var id=toString(selected.attr("data-id"));var name=selected.text();var last=listColumns.find('input[name="'+inputName+'"]').length+1;addColumn(val,id,name,listColumns,last,0,"",false,inputName);asAddColumn[0].selectedIndex=0;TELanguage.init();});var outer=toString(listColumns.attr("data-ids")).split(",");var index=0;var inner=0;for(index=0;index<outer.length;index++){var order=index+1;if(reorder){if(isEmpty(outer[index])||outer[index]=="0"){continue;}order=asAddColumn.attr("data-order").split(",")[index];}var split=toString(outer[index]).split(".");for(inner=0;inner<split.length;inner++){var val=toString(split[inner]);var valList=val.split("-");var id=val;var field=0;var detail=false;var customName="";var content="";if(valList.length>1){id=valList[0];field=valList[1];if(isNaN(parseInt(field,10))){if(field==="ISDETAIL"){detail=true;}else{customName=field;if(valList[0]=="x9"){content=valList[1];customName="";}}}}if(valList.length>=3){if(valList[2]==="ISDETAIL"){detail=true;}else{customName=valList[2];content=valList[2];if(valList[0]=="x9"){customName=valList[1];
}}}if(valList.length==4){if(valList[3]==="ISDETAIL"){detail=true;}else{customName=valList[2];content=valList[3];if(valList[0]=="x9"){customName=valList[1];}}}asAddColumn.val(id);if(id=="f0"){continue;}var name=asAddColumn.children("option:selected").text();if(isEmpty(name)){name='<span class="missingconfig">Missing id: '+id+" field: "+field+"</span>";}addColumn(id,id,name,listColumns,order,field,customName,detail,inputName,content);}asAddColumn.val("-");}}function initAccordian(wrap,up,down){if(wrap.length===0){return;}wrap.unbind("click");wrap.click(function(){var element=$(this);wrap.each(function(){var current=$(this);if(current.attr("id")!==element.attr("id")){if(current.next().is("tr")){current.next().hide();}else{current.next().slideUp(toggleSpeed);}current.removeClass("accopen");current.find(".ui-icon").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");}});if(element.next().is("tr")){element.next().toggle();}else{element.next().slideToggle(toggleSpeed);}element.toggleClass("accopen");var icon=element.find(".ui-icon");if(icon.hasClass("ui-icon-triangle-1-e")){icon.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");if(down){down(element);}}else{icon.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");if(up){up(element);}}return false;});}function initAdmin(){Sorter.init();if($("#adminsettings").length==0){return;}initAccordian($("#adminsettings .adminFieldTableHead"));initAccordian($("#adminsettings .adminFieldTableGreen"));var listSearchTypes=$("#listSearchTypes");$(".searchTypeNameRemove").click(function(e){$(this).closest("tr").remove();
e.stopPropagation();e.preventDefault();return false;});$("#asAddSearchTypes").change(function(){var element=$(this);var val=element.val();if(isEmpty(val)){return;}var title=""+$("#linksdata").attr("data-remove");var name=element.children("option:selected").text();var row=$("<tr>"+"<td>"+name+'</td><td><input type="text" class="searchtypenameinput telang tooltip" name="searchTypeName'+val+'" value="">'+'<input type="hidden" name="searchType" value="'+val+'"></td>'+"</tr>");var removeLink=$('<td><a href="#" title="'+title+'" style="display:block" class="clickable"><span class="tesprite tesprite-trash"></span></a></td>').appendTo(row);removeLink.click(function(e){stop(e);row.remove();});listSearchTypes.append(row);TELanguage.init();});initChangeResTypes();initAllAdminColumns();initAdminPeriods();}function initAdminPeriods(){$(".adminperioddrop").select2({dropdownAutoWidth:true,language:select2Locale,closeOnSelect:false});}function initChangeResTypes(){initChangeResKey("changeResTypes","asAddResTypes");initChangeResKey("changeResFields","asAddResFields");}function initChangeResKey(key,drop){function addRow(name,val){var title=""+$("#linksdata").attr("data-remove");var row=$("<tr><td>"+name+'<input type="hidden" name="'+key+'" value="'+val+'"></td></tr>');var removeLink=$('<td><a href="#" title="'+title+'" style="display:block" class="clickable"><span class="tesprite tesprite-trash"></span></a></td>').appendTo(row);removeLink.click(function(e){stop(e);row.remove();});$("#"+key).append(row);}var ids=toString($("#"+key).attr("data-ids")).split(",");for(var i=0;i<ids.length;i++){if(isEmpty(ids[i])){continue;
}var name=$("#"+drop+' option[value="'+ids[i]+'"]').text();var val=""+ids[i];if(isEmpty(name)){name="MISSING["+val+"]";}addRow(name,val);}$("#"+drop).change(function(){var element=$(this);var val=element.val();if(isEmpty(val)){return;}var name=element.children("option:selected").text();addRow(name,val);});}function initCopyColumns(){$(".copyColumns").unbind("change").change(function(){var element=$(this);var val=element.val();var selected=element.children("option:selected");var listname=toString(element.attr("data-list"));var list=$("#"+listname);element[0].selectedIndex=0;if(list.length==0){var message="Copy failed listname="+listname;alert(message);console.log(message);return;}var name=toString(list.attr("data-name"));var drop=toString(list.attr("data-drop"));var from=$("#"+val);var ids=from.attr("data-originalids");if(isEmpty(ids)){ids=from.attr("data-ids");}if(isEmpty(val)||isEmpty(name)||isEmpty(drop)||isEmpty(ids)){var message="Copy failed. val="+val+" name="+name+" drop="+drop+" ids="+ids;alert(message);console.log(message);return;}if(isEmpty(list.attr("data-originalids"))){list.attr("data-originalids",list.attr("data-ids"));}list.attr("data-ids",ids);list.find("tr:not(.nodrag)").remove();initAdminColumns(list,$("#"+drop),name);TELanguage.init();});}function initAllAdminColumns(){var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");setParam(path,"newres","50",true);clearAllParam(path,"objects");var total=url[0]+"?"+path.join("&");$.get(total,function(data,status,xhr){TELanguage.columns={};if(status==="error"){$("ajaxError").html('<p class="stacktraceError">Error loading admin settings:<br> '+TEError.asText(xhr)+"</p>");
}if(data&&data.cm){TELanguage.columns=data.cm;}initAdminColumns($("#listColumns"),$("#asAddColumn"),"column");initAdminColumns($("#listColumnsICal"),$("#asAddColumnICal"),"columnICal");initAdminColumns($("#listColumnsMy"),$("#asAddColumnMy"),"columnMy");initAdminColumns($("#listColumnsTitle"),$("#asAddColumnTitle"),"columnTitle");initAdminColumns($("#listColumnsCreated"),$("#asAddColumnCreated"),"columnCreated");initAdminColumns($("#listColumnsImage"),$("#asAddColumnImage"),"columnImage");initAdminColumns($("#listColumnsColor"),$("#asAddColumnColor"),"columnColor");initAdminColumns($("#listColumnsEmail"),$("#asAddColumnEmail"),"columnEmail");initAdminColumns($("#listColumnsResLink"),$("#asAddColumnResLink"),"columnsResLink");initAdminColumns($("#listColumnsCancel"),$("#asAddColumnCancel"),"columnCancel");initAdminColumns($("#listColumnsPlan"),$("#asAddColumnPlan"),"columnPlan",true);initAdminColumns($("#listColumnsGroupPlan"),$("#asAddColumnGroupPlan"),"columnGroupPlan");markMissing($("#listColumns"),"columnFid_");markMissing($("#listColumnsICal"),"columnICalFid_");TELanguage.init();markSearchMissingFields();initCopyColumns();});function markMissing(table,name){var missing=0;table.find(".selectMedium").each(function(index){var element=$(this);if(!isEmpty(element.val())){return;}if(element.attr("name").indexOf(name)>-1){missing++;element.addClass("missingconfig");}});if(missing>0){$("#afColumnContent").append(' <span class="warn-icon"></span> ');}}function markSearchMissingFields(){$(".admintypes").each(function(index){markFields($(this),"fieldfirst_");});}function markFields(table,name){var count=0;
table.find("input:checked").each(function(index){var element=$(this);if(toString(element.attr("name")).indexOf(name)>-1){count++;}});if(count!=0){return;}table.find("input").each(function(index){var element=$(this);if(toString(element.attr("name")).indexOf(name)>-1){element.parent().addClass("missingconfig");}});$("#"+table.attr("data-parent")).append(' <span class="warn-icon"></span> ');}}function typesInSearch(){return IdSet.types($("#linksdata").attr("data-searchids").split(","));}function needChangeObject(actioncommand,newId){if($("#persontilewrap").is(":visible")){return false;}if(actioncommand=="addleveloneobject"&&IdSet.containsSome(typesInSearch(),IdSet.types(newId))){if(toString($("#linksdata").attr("data-searchids")).indexOf("-4")===-1){return true;}}if(actioncommand=="createorder"){return true;}return false;}function savePlan(newId,origin){var period="&periodstart="+$("#plandata").attr("data-start")+"&periodend="+$("#plandata").attr("data-end");var actioncommand=origin.attr("data-action");if(actioncommand=="createorder2"){changeAddObjectId(newId+","+toString(origin.attr("data-personid")));return;}origin.addClass("loading");var order="";var orderids=toString(origin.attr("data-orderids"));if(!isEmpty(orderids)){order="&orderids="+orderids;}var rowid=toString(origin.attr("data-rowid"));if(rowid=="multicheck"){rowid=Multicheck.findValues(navTables.wrap());if(isEmpty(rowid)){origin.removeClass("loading");Favorites.showText(""+$("#plandata").attr("data-norows"));return;}rowid+=","+toString(origin.attr("data-hiddenRows"));}if(!isEmpty(rowid)){rowid="&id="+rowid;}var send="kind=plan&action="+actioncommand+period+rowid+order+"&o="+newId+","+origin.attr("data-o2")+"&o2="+origin.attr("data-o2")+"&ro="+origin.attr("data-robject")+"&emptyids="+origin.attr("data-emptyids")+"&mul="+!Multicheck.commonRow+"&mulcopy="+Multicheck.copyTime+"&lengths="+origin.attr("data-rowlengths")+"&period="+origin.attr("data-period")+"&replaceId="+origin.attr("data-replace");
$("#plantab1").addClass("loading");var post=$.post(window.location,send).done(function(data){$("#plantab1").removeClass("loading");TEError.showFade(data);if(needChangeObject(actioncommand,newId)){var filtered=(actioncommand=="createorder")?newId:IdSet.filterOnType(newId,typesInSearch());var current=$("#linksdata").attr("data-searchids");var newObjects=IdSet.merge(current,IdSet.merge(filtered,origin.attr("data-personId")));newObjects=IdSet.merge(newObjects,$(".coursetableident:visible").attr("data-top"));if(toString(current)!=toString(newObjects)){changeAddObjectId(newObjects.join(","),true);return;}}if(actioncommand=="copy"){var newObjects=IdSet.changeSearch($("#linksdata").attr("data-searchids"),newId);if(newObjects.changed){changeAddObjectId(newObjects.ids.join(","));return;}}expandExtraLevel=origin.parent().parent().children(".arrow").attr("id");reloadpage(origin);Sorter.changeColumnOrder(newId);}).fail(function(jqXHR,textStatus,errorThrown){$("#plantab1").removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown,origin);});}function savePlanAddObject(newId,row,element){element.addClass("loading");var period="&periodstart="+$("#plandata").attr("data-start")+"&periodend="+$("#plandata").attr("data-end");var action="&action=addobjectto";var rowid="&id="+row;var send="kind=plan"+action+period+rowid+"&o="+newId;var post=$.post(window.location,send).done(function(data){reloadpage(element);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,element);});}function saveInfoState(data){if(!supports_html5_storage()){return;}if(!supports_json()){return;
}var info=[data,null];if(sideinfo){info=[data,$(sideinfo).offset()];}var item=JSON.stringify(info);setItem("info_"+objectSearcherFF,item);}function moveSideInfo(info){if(info.length<1){return;}if(isEmpty(info[0])){return;}var offset=info[1];if(offset.left===0&&offset.top===0){return;}$(sideinfo).css("left",offset.left+"px").css("top",offset.top+"px").css("display","table");}function loadInfoState(){if(!supports_html5_storage()){return"";}if(!supports_json()){return;}var found=window.localStorage.getItem("info_"+objectSearcherFF);if(isEmpty(found)){return"";}try{var info=JSON.parse(found);moveSideInfo(info);return info[0];}catch(e){return found;}}function loadPlanTab(){if(!TEPlan){return;}planloading=true;var found=selectLoadPlanTab();if(isEmpty(found)){$("#plantabs").tabs("select",0);}TEPlan.loadTab($("#plantabs .ui-tabs-panel:visible").children().attr("data-tab"));planloading=false;}function selectLoadPlanTab(){if(!supports_html5_storage()){return"";}var found=window.localStorage.getItem("plantab_"+objectSearcherFF);if(isEmpty(found)){return"";}$("#plantabs").tabs("select",found);return found;}function savePlanState(jpp,data){if(!supports_html5_storage()){return;}setItem("plan_state_"+objectSearcherFF+"_"+jpp,data);}function loadPlanState(jpp){if(!supports_html5_storage()){return"";}var found=window.localStorage.getItem("plan_state_"+objectSearcherFF+"_"+jpp);if(isEmpty(found)){return"";}return found;}function loadReloadables(doTrigger){if(!supports_html5_storage()){return;}try{var found=window.localStorage.getItem("reload_"+objectSearcherFF);var array=JSON.parse(found);var length=array.length;
for(i=0;i<length;i++){var element=$("#"+array[i].id);if(!element.hasClass("reloadlock")){element.attr("data-reload",toString(array[i].reload));}if(doTrigger){element.trigger("reload");}}}catch(e){}Plans.updateTabNav();}function saveReloadables(){if(!supports_html5_storage()){return;}var map=$(".reloaddata").map(function(){var element=$(this);return{id:element.attr("id"),reload:toString(element.attr("data-reload"))};}).get();try{var json=JSON.stringify(map);setItem("reload_"+objectSearcherFF,json);}catch(e){return;}}var expandExtraLevel;function expandCurrentPlans(jpp){if(navTables.editoverlay){navTables.editoverlay.hide();}planloading=true;var hash=""+loadPlanState(jpp);hash=hash.replace("#","");var array=hash.split(PLAN_SPLIT);var i=0;var length=array.length;for(i=0;i<length;i++){if(isEmpty(array[i])){continue;}Plans.expand($("#"+array[i]),false,true);}if(!isEmpty(expandExtraLevel)){var element=$("#"+expandExtraLevel);expandExtraLevel="";if(!element.hasClass("bpressed")){Plans.expand(element,true,false,false);Plans.saveAllStateExpand();}}Plans.sticky();planloading=false;}var reloadtabs={};var jumpTo=0;function reloadpage(element){moveSearchDivBack();if(!navTables.editoverlay&&navTables.isBlockReload()){return;}if(!element){window.location.reload(true);return;}var reloadables=element.parents(".reloadable");if(reloadables.length===0){window.location.reload(true);return;}if(reloadables.hasClass("sidepanel")){$.merge(reloadables,$(".planwrap:visible"));}if(navTables.isEditVisible()){navTables.clearCurrentEdit();}if(navTables.editoverlay){navTables.editoverlay.hide();}if(navTables.isBlockReload()){return;
}jumpTo=$(window).scrollTop();reloadables.trigger("reload");reloadtabs={"plantab1":true,"plantab2":true,"plantab3":true,"plantab10":true,"plantab11":true,"plantab12":true,"plantab13":true,"plantab14":true,"plantab15":true,"plantab16":true,"plantab17":true,"plantab18":true,"plantab19":true,"plantab20":true};}function togglePlanComment(){var box=$(".r-box .hinfobox");if(box.length===0){$(".hinfoboxInside").addClass("hinfobox").removeClass("hinfoboxInside");return;}box.addClass("hinfoboxInside").removeClass("hinfobox");}function asShortBoolean(value){if(!value){return"f";}return value;}function clearPlanState(){if(!sideinfo){return;}savePlanState(1,"");savePlanState(3,"");saveInfoState("");setItem("reload_"+objectSearcherFF,"");}var saveStateExpand=function(id,jpp){var target=$(id);if(!target.is(":visible")){return;}var state=target.find(".bpressed, .noChild").map(function(){var e=$(this);if(!e.is(":visible")){return;}return e.attr("id");}).get().join(PLAN_SPLIT);savePlanState(jpp,""+state);};var sideinfo;var planloading=true;function saveCourseWrapClasses(){if(!supports_html5_storage()){return;}setCourseWrapClasses($("#coursewrap").attr("class"));}function setCourseWrapClasses(value){if(!supports_html5_storage()){return;}setItem("plan_coursewrap_"+objectSearcherFF,""+value);}function loadCourseWrapClasses(){if(!supports_html5_storage()){return;}var found=window.localStorage.getItem("plan_coursewrap_"+objectSearcherFF);if(isEmpty(found)){return;}$("#coursewrap").addClass(""+found);initPlanHideColumns();}function initPlanHideColumns(){var wrap=$("#coursewrap");var list=toString(wrap.attr("class")).split(" ");
for(var i=0;i<list.length;i++){if(list[i].indexOf("hidecol")===0){wrap.find(".t"+list[i]).attr("colspan",10);}}}function initObjectSelector(){$("#searchDivContent2").unbind("click").click(function(e){var target=$(getTarget(e));if(target.hasClass("objectinputtext")){stopProp(e);var oldValue=target.val();waitForFinalEvent(function(){if(target.val()!=oldValue){waitObjectSearch();}},300,"objectinputtextClicked");return;}if(target.hasClass("ffinput")||target.hasClass("shadedoutline")||target.hasClass("clickable")){return;}if(!isEmpty(target.attr("href"))){return;}stop(e);});}var planExpandTrigger;function initPlan(){if($("#plandata").length===0){return;}var planopen=$("#plandata").attr("data-open")==="t";ObjectsSearcher.fitToScreen=true;loadCourseWrapClasses();setTimeout(function(){navTables.initKeys();MultiAdd.init();Sorter.initTypeOrder(1);Sorter.initTypeOrder(2);Sorter.initTypeOrder(3);var id=0;for(id=Plans.TAB_EXTRA;id<=Plans.TOTAL_TABS;id++){Sorter.initTypeOrder(id);}$(".periodmore").click(function(e){stop(e);$("#periodlist").fadeTo(200,0.3,function(){$("#periodlist").load("periods.html?l="+$("#linksdata").attr("data-lang")).fadeTo(200,1);});});$("#shortcuts").click(function(e){stop(e);var box=$("#shortcutsbox");box.toggleClass("hidden");box.hasClass("hidden")?$(".timerInfo").addClass("hidden"):$(".timerInfo").removeClass("hidden");});},100);sideinfo=$("#sideinfo");sideinfo.draggable({handle:".sandstatus",stop:function(){saveInfoState(""+sideinfo.attr("data-id"));}});var after=function(current,items,extra){current.removeClass("loaded");sideinfo.html('<table class="" cellpadding="0" cellspacing="0">'+toString(extra)+items+"</table>");
};planExpandTrigger=function(element,expandAll,toggle){navTables.clearCurrentEdit();Plans.expand(element,expandAll,toggle);if(!planloading){Plans.saveAllStateExpand();Plans.sticky();}};var levelExpand=function(){var element=$(this);element.click(function(e){planExpandTrigger(element,e.shiftKey,true);});};$(".levelExpand").each(levelExpand);loadSidePanel(loadInfoState());planloading=false;$(".saverowinfo").each(function(index){var element=$(this);element.click(function(e){var value=element.parent().find(".nrmini").val();navTables.saverow(element,value);});});var dropAll=false;function dragList(element){var list=element.prevUntil(".osp, .sandaddAll");list=list.add(element);list=list.add(element.nextUntil(".osp"));return list;}function handleDragStart(e){var element=$(this);var list=dragList(element);if(e.dataTransfer.setDragImage){var image=document.querySelector("#dragimage");e.dataTransfer.setDragImage(image,0,0);var size=toString(element.attr("data-drag")).split(",").length;var text;if(size==1){text=list.map(function(i,e){var target=$(e);return'<span style="width:'+target.width()+'px;" class="'+target.attr("class")+' dragitem">'+target.attr("data-value")+"</span>";}).get().join("");}else{text='<span class="dtd dragitem dragtext">'+size+" "+$(".markedrowcount").attr("data-marked")+"</span>";}$(image).html(text);}list.addClass("ordragging");var id=element.attr("data-ident");dropAll=false;if(isEmpty(id)){id=element.attr("data-id");dropAll=true;}var dragId=toString(element.attr("data-drag"));if(!isEmpty(dragId)){id=dragId;dropAll=true;}e.dataTransfer.setData("Text",id);}function dropid(element){if(element.hasClass("ordrop")){var id=toString(element.attr("data-id"));
if(isEmpty(id)){return toString(element.attr("data-p"));}return id;}var split=toString(element.attr("data-id")).split("=");if(split.length<2){return 0;}if(split[0]!="rowid"){return 0;}return split[1];}function handleDragOver(e){stop(e);var id=dropid($(this));if(isEmpty(id)){e.dataTransfer.dropEffect="none";return false;}if(!dropAll&&(parseInt(id,10)<1||id.indexOf("-")===-1)){e.dataTransfer.dropEffect="none";return false;}e.dataTransfer.dropEffect="link";if(e.shiftKey){e.dataTransfer.dropEffect="copy";}return false;}function handleDrop(e){stop(e);var target=$(this);target.removeClass("ordragover");var data=e.dataTransfer.getData("Text");if(isEmpty(data)){alert("Missing drop objectID.");return false;}var id=dropid($(this));if(isEmpty(id)){alert("Missing drop rowID.");return false;}if(data.indexOf(".")===-1){saveChangePeriod(data,target,e.shiftKey);return false;}if(parseInt(id,10)<1){return false;}savePlanAddObject(data,id,target);return false;}function saveChangePeriod(data,element,copy){element.parents(".plantab").addClass("loading");element.addClass("loading");var period="&periods="+element.attr("data-start")+"-"+element.attr("data-end")+"&p="+element.attr("data-p");var rowid="&rowid="+data;var periodid="&periodrowid="+element.attr("data-id");var docopy=(copy===true?"&copy=t":"");var send="kind=plan&action=changeperiod"+docopy+period+rowid+periodid;var post=$.post(window.location,send);post.done(function(data){if(post.status==204){element.removeClass("loading");element.parents(".plantab").removeClass("loading");return;}reloadpage(element);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,element);
});}function handleDragEnd(e){dragList($(this)).removeClass("ordragging");}sideinfo.each(function(index){var col=this;col.addEventListener("dragover",handleDragOver,false);col.addEventListener("drop",handleDrop,false);});function initSideButtons(){sideinfo.find(".r-delete").click(function(e){stop(e);var target=$(getTarget(e)).parent();target.find(".deleteordersbutton").toggleClass("hidden");});initDateLimits(sideinfo.find(".datelimit"),"yy-mm-dd",true);sideinfo.find(".changeorderperiod").click(function(e){$("#orderperiodRange").toggle();});var orderperiodform=$("#orderperiodform");orderperiodform.submit(function(e){var fields=orderperiodform.serializeArray();var period="";var extra="";jQuery.each(fields,function(i,field){if(period.length>0){period+=",";}if(field.name=="p"){period+=field.value;}else{extra+="&"+field.name+"="+field.value;}});e.stopPropagation();e.preventDefault();var periods="";if(!isEmpty(period)){periods="&periods="+period;}var send="kind=plan"+"&action=changeperiod"+periods+extra+"&rowid="+orderperiodform.attr("data-rowid");var post=$.post(window.location,send);post.done(function(data){if(post.status==204){$("#orderperiodRange").hide();return;}window.location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);});return false;});sideinfo.find(".deleteordersbutton").each(function(index){var element=$(this);element.click(function(e){var send="kind=plan"+"&action="+element.attr("data-action")+"&rowid="+element.attr("data-rowid")+"&orderids="+element.attr("data-orderids")+"&objectid="+element.attr("data-objectid");
var jqxhr=$.post(window.location,send).done(function(data){window.location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);});});});var savebuttons=sideinfo.find(".saverowinfo");sideinfo.find(".sandinputfactor,.sandtext").each(function(index){var element=$(this);element.keyup(function(e){if(e.keyCode==13){savebuttons.click();}});});sideinfo.find(".sandsaveonchange").each(function(index,input){var element=$(input);element.attr("data-current",element.val());element.unbind("blur").blur(function(){if(element.val()==element.attr("data-current")){return;}$(this).addClass("loading");savebuttons.click();});});savebuttons.each(function(index){var element=$(this);element.click(function(e){var value=element.parent().find(".nrmini").val();navTables.saverow(element,value);});});sideinfo.find(".copyrow").each(function(index){var element=$(this);element.click(function(e){var send="kind=plan"+"&action=copyrow"+"&rowid="+element.attr("data-id");var jqxhr=$.post(window.location,send).done(function(data){window.location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown);});});});sideinfo.find(".sideinfohelp").click(function(e){sideinforeset();});sideinfo.find(".orinfo").click(function(e){var target=$(this);var id=target.attr("data-idonly");if(id=="0"){return;}stop(e);var found=sideinfo.find("#orinfoextra"+id);var isHidden=found.hasClass("hidden");navTables.clearCurrentEdit();if(target.hasClass("loaded")){if(isHidden){found.removeClass("hidden");navTables.editoverlay.show();}else{found.addClass("hidden");
}return;}loadObjectInfo(target,function(current,items){if(isEmpty(items)){items="<tr><td>-</td></tr>";}current.parent().after('<tr id="orinfoextra'+id+'" class="orinfoextra l2object"><td colspan="3" class="l2objecttd"><div class="l2wrap"><table class="l2inside" cellpadding="0" cellspacing="0">'+items+"</table></div></td></tr>");navTables.editoverlay.show();});});initResboxes(false);}sideinfo.unbind("reload").bind("reload",reloadAllPanels);function reloadAllPanels(){reloadSidePanel();initWorkhours();initPersonTile(null,null,true);}function initPersonExtra(idlist){var ids=(""+idlist).split(",");var length=ids.length;var id;var start=' <span class="hinfobox hinfoboxtdc hinfosum nw">'+$("#plandata").attr("data-difftext");for(var i=0;i<length;i++){id=ids[i].split(".");if(id.length<1){continue;}if(isEmpty(id[0])){continue;}var diff=$("#pdx"+id[0]).attr("data-diff");if(isEmpty(diff)){diff="-";}var over=parseInt(diff)<0;var target=$(".px"+id[0]);if(over){target.addClass("personOver");}target.append(start+" "+diff+"</span>");}}var initEditButtons=function(wrap){wrap.find(".multideleterows").click(function(e){if($(this).attr("data-action")=="selectAll"){$(".l1 .multicheck:visible:checkbox:not(:checked)").click();return;}if(!confirm(toString($(this).attr("data-explain"))+" \n"+$(this).attr("data-confirm"))){return;}savePlan(0,$(this));});wrap.find(".r-delete").click(function(e){stop(e);var target=$(getTarget(e)).parent();target.find(".deleteordersbutton").toggleClass("hidden");});Multicheck.init(wrap);wrap.find(".deleteordersbutton").each(function(index){deleteOrderButton($(this));});wrap.find(".sum.hinfo").click(function(e){navTables.clearOver();
var target=$(getTarget(e));stop(e);if(!target.hasClass("hinfo")){return;}if(target.children(".hinfobox").length<1){return;}navTables.over=target;target.addClass("hinfoover");});wrap.find(".hinfoboxtd").click(function(e){stop(e);});wrap.find(".editdesc, .editfactor").click(function(e){var target=$(getTarget(e));if(target.parent().hasClass("hasInput")){stop(e);return;}navTables.clearCurrentEdit();if(target.hasClass("planlink")){return;}stop(e);if(!target.hasClass("editdesc")&&!target.hasClass("editfactor")){return;}navTables.currentEdit=target;navTables.moveTo(e,target);if(!target.hasClass("rowedit")&&target.children().length>0){target.children().show().focus().select();return;}var isFactor=target.hasClass("editfactor");var value=TEUtil.firstText(target).trim();var fixedValue=target.attr("data-value");if(!isEmpty(fixedValue)){value=fixedValue;}if(target.hasClass("emptydesc")){value="";}if(target.hasClass("sum")){value="";}target.addClass("hinfoover");target.restore=function(){target.restore=null;target.removeClass("hasInput hinfoover");if(isEmpty(fixedValue)){TEUtil.setText(target,value);}else{TEUtil.setText(target,fixedValue);}target.find(".sandinputtext").remove();};var extra="";var input=$('<input class="sandinputtext tdedit mousetrap" maxlength="200" type="text" value="'+value+'">');if(target.hasClass("rowedit")){input.unbind("blur").blur(function(){var val=input.val().trim();if(value===val){waitForFinalEvent(function(){navTables.clearCurrentEdit();},200);return false;}navTables.clearCurrentEdit();navTables.saverow(target,val);});}if(!target.hasClass("rowedit")){input.keyup(function(e){if(e.keyCode==13){input.blur();
}});input.unbind("blur").blur(function(){waitForFinalEvent(function(){saveInfoText();},100,"editdesc");});}var saveInfoText=function(){var val=input.val().trim();if(value===val){target.restore();navTables.clearCurrentEdit();return false;}var td=target.closest(".editinfo");if(td.length!=1){target.restore();navTables.clearCurrentEdit();TEError.showMessage("No row id found Error#53");return false;}var element=$(td[0]);element.addClass("loading");var send="kind=plan&action=saveinfo&rowid="+element.attr("data-id");if(isFactor){send+="&factor="+encodeURIComponent(val)+"&rowdescription=xskipx";}else{send+="&rowdescription="+encodeURIComponent(val);}var jqxhr=$.post(window.location,send).done(function(data){element.removeClass("loading");reloadpage(element);}).fail(function(jqXHR,textStatus,errorThrown){element.removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown,element);});};target.find(".sandinputtext").remove();TEUtil.setText(target,"");target.addClass("hasInput").append(input);input.autosizeInput();input.show().focus().val(value);if(target.hasClass("nr")){input.select();}else{input.putCursorAtEnd();}});initObjectInfo(wrap);};var initObjectInfo=function(wrap){wrap.find(".multitimes").unbind("click").click(function(e){stop(e);var target=$(this);navTables.clearCurrentEdit();var element=target.next();var col=element.closest(".dtd").attr("data-c");var text=$("#contents").attr("data-multiedit")+$("#contents").attr("data-c"+col)+" "+element.attr("data-rowid").split(",").length+" "+$("#contents").attr("data-multirows");var value=prompt(""+text,"");if(isEmpty(value)){return;
}wrap.parent().addClass("loading");var send="kind=plan&action=savetext&c="+col+"&rowid="+element.attr("data-rowid")+"&rawtext="+value;var jqxhr=$.post(window.location,send).done(function(data){reloadpage(element);}).fail(function(jqXHR,textStatus,errorThrown){wrap.parent().removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown,element);});});wrap.find(".objinfo").unbind("click").click(function(e){navTables.clearCurrentEdit();var target=$(this);var id=target.attr("data-idonly");var typename=target.attr("data-typename");if(id=="-"){var title='<tr><td colspan="2">'+typename+"</td></tr>";target.after('<span class="l2object l2wrap2"><table class="l2inside" cellpadding="0" cellspacing="0">'+title+"</table></span>");navTables.editoverlay.show();return;}if(id=="0"){return;}var prefix=toString(target.attr("data-index"))+"_";var info=wrap.find("#objinfo"+prefix+TEUtil.asId(id));var isHidden=info.hasClass("hidden");wrap.find(".l2wrap2").addClass("hidden");if(target.hasClass("loaded")){if(isHidden){info.removeClass("hidden");navTables.editoverlay.show();}else{info.addClass("hidden");}return;}loadObjectInfo(target,function(current,items){if(isEmpty(items)){items="<tr><td>-</td></tr>";}var title='<tr><td colspan="2">'+typename+"</td></tr>";current.after('<span id="objinfo'+prefix+TEUtil.asId(id)+'" class="l2object l2wrap2"><table class="l2inside" cellpadding="0" cellspacing="0">'+title+items+"</table></span>");navTables.editoverlay.show();},null,true);});};var persontilewrap=$("#persontilewrap");var initPersonTile=function(e,next,skipWorkhours){initWrap(persontilewrap,3)();};var initPersonExpand=function(wrap){var nextTabNumber=function(wrap,start){var nr=start;
if(start==0){nr=parseInt(wrap.attr("data-tab"),10);}if(nr<Plans.TAB_EXTRA){return Plans.TAB_EXTRA;}if((nr+1)>=Plans.TOTAL_TABS){return Plans.TOTAL_TABS;}if(nr>=Plans.TAB_EXTRA){return nr+1;}return nr;};var nextTab=function(wrap,start){var nr=nextTabNumber(wrap,start);var tab=$("#planwrap"+nr);if(nr>=Plans.TOTAL_TABS){return nr;}if(!isEmpty(tab.attr("data-reload"))){return nextTab(wrap,nr);}return nr;};var openInTab=function(element,id,wrap){var target=nextTab(wrap,0);$("#planwrap"+target).attr("data-reload",id);saveReloadables();loadTab(target);element.fadeTo(300,0.5,function(){$("#plantabs").tabs("select",""+target);element.removeAttr("style");});};wrap.find(".personexpand").each(function(index){var element=$(this);element.click(function(e){stop(e);var id=element.attr("data-ident");if(!element.hasClass("personId")){openInTab(element,id,wrap);return;}persontilewrap.attr("data-reload",id);saveReloadables();workhourswrap.find(".bpressed").removeClass("bpressed");element.toggleClass("bpressed");initPersonTile(null,element,true);element.fadeTo(300,0.5,function(){$("#plantabs").tabs("select","3");element.removeAttr("style");});});});};var workhourswrap=$("#workhourswrap");var initWorkhours=function(){workhourswrap.parent().addClass("loading");var id=workhourswrap.attr("data-reload");changeObjectIds(id,true,false,function(url,path){setParam(path,"jpp","2");if(planopen&&(""+path).indexOf("objects=0")!=-1){return;}var location=asURL(url,path);ObjectsSearcher.abort();ObjectsSearcher.lastXHR=$.ajax(location).done(function(data){workhourswrap.removeClass("loading");workhourswrap.parent().removeClass("loading");
if(navTables.isBlockReload()){return;}workhourswrap.html(data);workhourswrap.find(".rowedit").click(rowedit);initPersonExpand(workhourswrap);initPlanDrag(workhourswrap);initHeaderButtons(workhourswrap);initEditButtons(workhourswrap);initResboxes(false);initCalendarLink();setTimeout(function(){TEError.loadMessage();initPersonExtra(id);initObjectInfo(workhourswrap);},200);navTables.reinit(workhourswrap);reloadtabs[""+workhourswrap.parent().attr("id")]="";}).fail(function(jqXHR,textStatus,errorThrown){if(errorThrown=="abort"){return;}TEError.show(jqXHR,textStatus,errorThrown,workhourswrap.parent());});});};workhourswrap.unbind("reload").bind("reload",initWorkhours);var markEmpty=function(tr){if(!tr.hasClass("trEmpty")){return;}tr.addClass("trchecked");markEmpty(tr.prev());};var deleteOrderButton=function(element){element.click(function(e){var text=$(element).attr("data-confirm");var tr=element.parents("tr");tr.addClass("trchecked");markEmpty(tr.prev());setTimeout(function(){if(!isEmpty(text)&&!confirm(""+text)){$(".trchecked").removeClass("trchecked");return;}$(".trchecked").removeClass("trchecked");element.addClass("loading");var send="kind=plan"+"&action="+element.attr("data-action")+"&rowid="+element.attr("data-rowid")+"&orderids="+element.attr("data-orderids")+"&objectid="+element.attr("data-objectid");var jqxhr=$.post(window.location,send).done(function(data){reloadpage(element);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,element);});},20);});};var initWrap=function(wrap,kind){var jpp=kind;var reload=function(){var id=wrap.attr("data-reload");
wrap.parent().addClass("loading");changeObjectIds(id,true,false,function(url,path){setParam(path,"jpp",jpp);if(planopen&&(""+path).indexOf("objects=0")!=-1){return;}var location=asURL(url,path);wrap.addClass("loading");var startTime=window.performance?performance.now():0;ObjectsSearcher.abort();ObjectsSearcher.lastXHR=$.ajax(location).done(function(data){var loadTime=Math.round((window.performance?performance.now():0)-startTime);wrap.removeClass("loading multicheckshow");wrap.parent().removeClass("loading");if(navTables.isBlockReload()){return;}wrap.html(data);wrap.find(".levelExpand").each(levelExpand);wrap.find(".showorder").click(showorder);wrap.find(".copysingel").click(copysingel);wrap.find(".copysingelrow").click(navTables.copysingelrow);initEditButtons(wrap);initPersonExpand(wrap);initResboxes(false);reloadSidePanel();initHeaderButtons(wrap);expandCurrentPlans(jpp);Plans.updateTabName(wrap,jpp);initPlanHideColumns();navTables.reinit(wrap);var loadinfo=function(){var info=wrap.find(".personinfo");var id=wrap.attr("data-reload");var data=toString(info.attr("data-json"));var totalTime=Math.round((window.performance?performance.now():0)-startTime);wrap.find(".plantimer").html(" Send "+loadTime+" Page "+totalTime+" ms");if(!isEmpty(data)){TEObject.expandInfo($.parseJSON(data),info);return;}if(!planopen&&!isEmpty(id)&&info.length>0){TEObject.loadExpandObjectInfo(id,info,"t");}};initCalendarLink();setTimeout(loadinfo,10);reloadtabs[""+wrap.parent().attr("id")]="";}).fail(function(jqXHR,textStatus,errorThrown){if(errorThrown=="abort"){return;}wrap.parent().removeClass("loading");
var message=TEError.show(jqXHR,textStatus,errorThrown,wrap.parent());if(!isEmpty(message)){wrap.html('<div class="stacktraceError">'+message+"</div>");}});});};wrap.unbind("reload").bind("reload",reload);return reload;};var coursewrap=$("#coursewrap");initEditButtons(coursewrap);loadReloadables(false);function loadSidePanel(data,save,pos){if(isEmpty(data)){return;}var sid=Qt.join("&sid",$("#linksdata").attr("data-sid"));var lang=Qt.join("&l",$("#linksdata").attr("data-lang"));var jmp="";var base=$("#linksdata").attr("data-linksbase").split("?");var list=base[1].split("&");for(var i=0;i<list.length;i++){if(list[i].indexOf("jmp=")===0){jmp+="&"+list[i];}if(list[i].indexOf("jw=")===0){jmp+="&"+list[i];}}var query=sid+lang+"&jpp=4"+jmp;var url=urlPrefix()+"r.html?"+data+query;sideinfo.attr("data-url",url);sideinfo.attr("data-id",data);if(save){updateSidePanel(pos);saveInfoState(data);}reloadSidePanel();}function updateSidePanel(pos){if(sideinfo.is(":visible")&&sideinfo.visible(true)&&$("#sideinfotop").visible(true)){return;}var offset=sideOffset(pos);var top=Math.max(offset.top-50,0);sideinfo.css("left",(offset.left+150)+"px").css("top",top+"px").css("display","table");}function sideOffset(pos){if(navTables.currentEdit&&navTables.currentEdit.offset){return navTables.currentEdit.offset();}if(pos&&pos.offset()){if(pos.hasClass("showorder")){var td=pos.closest("td");if(td.length>0){return td.offset();}}return pos.offset();}return{top:150,left:0};}function reloadSidePanel(){var url=sideinfo.attr("data-url");if(isEmpty(url)){return;}$.get(url,function(result){if(isEmpty(result)||$.trim(result).length===0){sideinforeset();
return;}sideinfo.html(result);initSideButtons();}).fail(function(){sideinforeset();});}var initPlanDrag=function(wrap){wrap.find(".ordrag").each(function(index){var col=this;col.addEventListener("dragstart",handleDragStart,false);col.addEventListener("dragend",handleDragEnd,false);});wrap.find(".ordrop").each(function(index){var col=this;col.addEventListener("dragover",handleDragOver,false);col.addEventListener("drop",handleDrop,false);});};var initHeaderButtons=function(wrap){initPlanDrag(wrap);wrap.find(".searchremove").click(function(e){stop(e);var searchIds=$("#linksdata").attr("data-searchids");var id=$(this).attr("data-id");changeAddObjectId(searchIds.replace(id,""),true);return false;});wrap.find(".hinfoboxheader").click(function(e){var target=$(getTarget(e));if(target.hasClass("allowclick")){return true;}stop(e);return false;});wrap.find(".sideload").each(function(index){var element=$(this);element.click(function(e){var oid=element.attr("data-orderids");loadSidePanel("id="+oid+"&skipsum=t",true,element);});});wrap.find(".sandheadertoggle").click(function(e){stop(e);navTables.clearCurrentEdit();var element=$(this);var span=element.data("span");element.attr("colspan",element.attr("colspan")==span?element.data("spanmin"):span);var header=element.data("headers");wrap.toggleClass("hidecol"+header);saveCourseWrapClasses();return false;});wrap.find(".sandheaderclick").click(function(e){var target=$(getTarget(e));if(target.hasClass("allowclick")){return true;}var element=$(this);var show=element.hasClass("hinfoover");navTables.clearCurrentEdit();stop(e);if(!show){element.addClass("hinfoover");
}return false;});var changeRowStatus=function(element,removeEmpty){$("#plan-dialog").hide();wrap.parent().addClass("loading");element.addClass("loading");var emptyIds=removeEmpty?"&genempty="+element.attr("data-genempty"):"";var send="kind=plan"+"&action="+element.attr("data-action")+emptyIds+"&orderids="+element.attr("data-orderids");var jqxhr=$.post(window.location,send).done(function(data){window.location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){element.removeClass("loading");wrap.parent().removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown);});};wrap.find(".generateorders").each(function(index){var element=$(this);element.click(function(e){showDialog(element,e);});});wrap.find(".setrowsstatus").each(function(index){var element=$(this);element.click(function(e){showDialog(element,e);});});$(".fillallwork").unbind("click").click(function(e){var element=$(getTarget(e));var time=element.parent().find(".plan_filltime").val();if(isEmpty(time)||time=="0"){return;}var overwrite=element.parent().find(".plan_filloverwrite").is(":checked");var text=overwrite?element.attr("data-over"):"";if(!confirm(element.attr("value")+" "+time+" "+element.attr("data-hours")+"? "+text)){return;}var send="kind=plan"+"&action=fillallwork"+"&o="+$("#workPersonsId").attr("data-personId")+"&filltime="+time+"&overwrite="+overwrite+"&period="+element.attr("data-range");postToPlan(element,send);});var generateOrders=function(element){var send="kind=plan"+"&action=generateorders"+"&o="+element.attr("data-genobject")+"&types="+element.attr("data-types")+"&period="+element.attr("data-range")+"&orderids="+element.attr("data-orderids");
postToPlan(element,send);};var fillWork=function(element){var send="kind=plan"+"&action=fillwork"+"&period="+element.attr("data-range")+"&o="+$("#workPersonsId").attr("data-personId")+"&overwrite="+($("#plan-dialog-overwrite").is(":checked")?"t":"f")+"&total="+$("#plan-dialog-total").val();postToPlan(element,send);};var postToPlan=function(element,send){$("#plan-dialog").hide();wrap.parent().addClass("loading");element.addClass("loading").attr("disabled","disabled");var jqxhr=$.post(window.location,send).done(function(data){TEError.saveMessage(data);window.location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){element.removeAttr("disabled");element.removeClass("loading");wrap.parent().removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown);});};var showDialog=function(element,e){stop(e);$("#plan-dialog-totalwrap").hide();$("#plan-dialog").show();$("#plan-dialog-text").html(element.attr("data-confirm"));$("#plan-dialog-first-text").html(element.attr("data-confirmFirst"));$("#plan-dialog-first-wrap").show();if($("#plan-dialog-first-text").text()=="-"){$("#plan-dialog-first-wrap").hide();}$("#plan-dialog-yes").val(element.val());var active=element.attr("data-action")=="rowsactive";var isFillWork=element.attr("data-action")=="fillwork";if(isFillWork){$("#plan-dialog-totalwrap").show();}$("#plan-dialog-yes").unbind("click").click(function(){TEError.scrollTop();if(isFillWork){fillWork(element);return;}if($("#plan-dialog-first").is(":checked")){if(active){generateOrders(element);return;}changeRowStatus(element,true);return;}changeRowStatus(element,false);});
$(".hinfoover").removeClass("hinfoover");};wrap.find(".copyrows").each(function(index){var element=$(this);element.change(function(e){var text=element.children("option:selected").text();var clear=element.parent().parent().find(".clearhours:checked");var clearHours=clear.length>0?"t":"f";var clearText=clear.length>0?clear.parent().text()+"\n":"";if(!confirm(clearText+$("#plandata").attr("data-copyperiod")+" "+text+"?")){element.val("-");return;}element.parent().addClass("loading");wrap.parent().addClass("loading");e.stopPropagation();e.preventDefault();var send="kind=plan"+"&action="+element.attr("data-action")+"&orderids="+element.attr("data-orderids")+"&clearhours="+clearHours+"&period="+element.val();var jqxhr=$.post(window.location,send).done(function(data){window.location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){wrap.parent().removeClass("loading");TEError.show(jqXHR,textStatus,errorThrown,element.parent());});});});};navTables.editoverlay=$("#editoverlay2");navTables.editoverlay.click(navTables.editoverlayHide);function sideinforeset(){sideinfo.hide();sideinfo.attr("data-url","");sideinfo.attr("data-id","");saveInfoState("");}var rowedit=function(e,extra){var element=$(this);if(extra){element=extra;}if(element.hasClass("hinfoover")){return false;}navTables.clearCurrentEdit();stop(e);navTables.currentEdit=element;var rowId=element.attr("data-id");if(!isEmpty(rowId)&&rowId!="-2"){if(sideinfo.is(":visible")){loadSidePanel("rowid="+rowId,true,element);}}if($("#plandata").attr("data-write")!=="y"){return false;}element.addClass("hinfoover");navTables.moveTo(e,element);
var found=element.find(".nrmini");var value=toString(element.attr("data-value"));if(found.length===0){var after=element.find(".r-o");var mini='<input class="nr nrmini tdedit mousetrap" type="text" value="'+value+'">';if(after.length===0){element.append(mini);}else{after.after(mini);}found=element.find(".nrmini");}else{found.val(value);}var width=element.find(".r-o").width();if(width>1){found.width(Math.max(18,width));}width=element.find(".r-o2").width();if(width>1){found.width(Math.max(18,width));}found.unbind("blur").blur(function(){var val=found.val();var ok=parseInt(val,10)>=0;if(!ok){return false;}if(value===val){return false;}navTables.saverow(element,val);});found.autosizeInput();found.show().focus();found.select();navTables.fixSelect(found);return false;};var showorder=function(e){stop(e);var element=$(this);var rowId=element.attr("data-id");if(!isEmpty(rowId)&&rowId!="-2"){loadSidePanel("rowid="+rowId,true,element);navTables.clearCurrentEdit();}};var copysingel=function(e){stop(e);$(".copysingelform").toggleClass("showextrafields");};$(".rowedit").click(rowedit);$(".showorder").click(showorder);$(".copysingel").click(copysingel);$(".copysingelrow").click(navTables.copysingelrow);$(".orderedit").click(function(){var element=$(this);if(element.hasClass("hinfoover")){return;}navTables.currentEdit=element;navTables.editoverlay.show();element.addClass("hinfoover");});$(document).keyup(function(e){if(e.keyCode==27){var target=$(getTarget(e));if(target.hasClass("tdedit")){target.unbind("blur");}closeActivatePopup();navTables.clearCurrentEdit();if(navTables.isEditVisible()){navTables.editoverlayHide();
}}});function closeActivatePopup(){coursewrap.find(".sandheaderclick").removeClass("hinfoover");persontilewrap.find(".sandheaderclick").removeClass("hinfoover");}$("#contents").click(function(e){var target=$(getTarget(e));if(target.hasClass("allowclick")){return true;}closeActivatePopup();navTables.clearCurrentEdit();});function loadTab(nr){if(nr=="1"){initWrap($("#coursewrap"),1)();}if(nr=="2"){initWorkhours();}if(nr=="3"){initPersonTile(null,null,true);}var kind=parseInt(nr,10);if(kind>=Plans.TAB_EXTRA){initWrap($("#planwrap"+nr),kind)();}}return{loadSidePanel:loadSidePanel,loadTab:loadTab,};}function makeSuburl(url){if(isEmpty(url)){return"";}var result=url.replace("https://","webcal://");return result.replace("http://","webcal://");}function initIcalTime(){var select=$("#periodical");var changeTime=function(){var val=toString(select.val());var current=select.children(":selected");if(isEmpty(val)){val=toString(window.location.href).replace(".phtml",".ics").replace(".html",".ics");}$("#icalurlgoogle").val(current.attr("data-url"));$("#icalurl").val(val);$("#icalurl2").attr("href",makeSuburl(val));if(val.length<255){$("#gcalwrap").hide();}else{$("#gcalwrap").show();}};changeTime();select.change(changeTime);}var PageMenu={ddmenuitem:0,focusLost:function(e){var target=$(e.relatedTarget);var parents=target.parents(".pageMenuDrop");if(parents.length==0){PageMenu.close();return;}},toggleMenu:function(){if($("#pageMenuButtonLink").hasClass("pageMenuActive")){PageMenu.close();return;}$("#langdroplist").hide();$("#pageMenuButtonLink, #pageHeaderMenuList a").unbind("blur").blur(PageMenu.focusLost);
PageMenu.ddmenuitem=$("#pageHeaderMenuList");PageMenu.ddmenuitem.slideDown(toggleSpeed);$("#pageMenuButtonLink").addClass("pageMenuActive").attr("aria-expanded","true");$("#pageMenuButtonItem").removeClass("pageMenuButton");$("#pageHeaderOverlay").show();return false;},close:function(){if(PageMenu.ddmenuitem){PageMenu.ddmenuitem.slideUp(toggleSpeed);$("#pageMenuButtonLink").removeClass("pageMenuActive").attr("aria-expanded","false");$("#pageMenuButtonItem").addClass("pageMenuButton");}$("#pageHeaderOverlay").hide();$("#langdroplist").slideUp(toggleSpeed);},showLangDrop:function(){$("#langdroplist").slideDown(toggleSpeed);$("#pageHeaderOverlay").show();return false;},initReminderMail:function(){var mail=$(".remindermail");mail.unbind("change").change(function(){mail.parent().addClass("saveanimation");var send="remindermail="+encodeURIComponent(mail.prop("checked"));var post=$.post($("#abouttext").attr("data-info-url"),send).done(function(data){mail.parent().removeClass("saveanimation");mail.parent().addClass("saveok");}).fail(function(jqXHR,textStatus,errorThrown){mail.parent().removeClass("saveanimation");mail.parent().addClass("savefailed");TEError.show(jqXHR,textStatus,errorThrown,mail);});});},init:function(){$("#pageHeaderOverlay").unbind().click(function(e){PageMenu.close();});$("#pageMenuButtonLink").unbind().click(function(e){if(e.originalEvent){stop(e);PageMenu.toggleMenu();PageMenu.loadTimezone();}});},loadTimezone:function(show){var time="?mts="+DateDiff.asMts();$.ajax({dataType:"json",url:$("#abouttext").attr("data-info-url")+time,global:false,success:function(data){$("#utimezone").html(""+data.TimeZone);
PageMenu.initTimezoneMenu(data,show);if(show&&data.askTimeZone){$("#changetimezone").trigger("click");}},error:function(xhr,textStatus,errorThrown){if(xhr.status&&xhr.status==412){return;}TEError.show(xhr,textStatus,errorThrown);}});},initTimezoneMenu:function(data,ask){$("#changetimezone").fancybox({"margin":15,"padding":0,"autoScale":false,"transitionIn":transition(),"transitionOut":transition(),"orig":$("#pageMenuButtonLink"),"width":510,"height":600,"onStart":function(){PageMenu.initZoneDrop(data,ask);},"onClosed":function(){PageMenu.timezoneDone();fancyboxClosed();},"onComplete":function(){}});},timezoneDone:function(){if(supports_html5_storage()){setItem("timezoneask","no");}},checkTimeZone:function(){if($("#changetimezone").length<1){return;}if(PageScroll.autoRefreshSeconds>0){return;}if($("body").hasClass("autoscroll")){return;}if(!supports_html5_storage()){return;}var stored=window.localStorage.getItem("timezoneask");if(stored=="no"){return;}PageMenu.loadTimezone(true);PageMenu.timezoneDone();},initZoneDrop:function(data,ask){PageMenu.initDateFormatDrop(data);if(ask){$(".zoneask").show();}else{$(".zoneask").hide();}var drop=$("#timezonedrop");drop.find("option").remove();$.each(data.timezones,function(){var name=this.shortname;if(this.shortname!=this.longname){name+=" "+this.longname;}name+=" ("+this.time+")";drop.append($("<option />").val(this.shortname).text(name));});drop.unbind("change");drop.val(""+data.TimeZone);drop.change(function(){var send="timezone="+encodeURIComponent(drop.val());var post=$.post($("#abouttext").attr("data-info-url"),send).done(function(data){location.reload(true);
}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,drop);});});},initDateFormatDrop:function(data){var drop=$("#dateformatdrop");drop.find("option").remove();$.each(data.DateFormats,function(){drop.append($("<option />").val(this.first).text(this.second));});drop.unbind("change");drop.val(""+data.UserDateFormat);drop.change(function(){var send="userdateformat="+encodeURIComponent(drop.val());var post=$.post($("#abouttext").attr("data-info-url"),send).done(function(data){location.reload(true);}).fail(function(jqXHR,textStatus,errorThrown){TEError.show(jqXHR,textStatus,errorThrown,drop);});});}};var AboutInfo={getInfo:function(){return"URL: "+window.location+"\nBrowser:\n"+navigator.userAgent+"\n"+this.getServerInformation();},getTiming:function(){if(!window.performance){return"-";}var t=window.performance.timing;return"Latency: "+(t.responseEnd-t.fetchStart)+"ms "+"Render: "+(t.loadEventEnd-t.responseEnd)+"ms "+"Total: "+(t.loadEventEnd-t.navigationStart)+"ms ";},getServerInformation:function(){var abouttext=$("#abouttext");$.getJSON(abouttext.attr("data-url"),function(data){var server=data.records[0];var text="Server: "+server.teversion+", "+$.datepicker.formatDate("yy-mm-dd",new Date(server.teversionDay))+", "+server.teserverName+" ("+server.teserverSignature+"), "+abouttext.attr("data-defaultLocale");var techtext=$("#techtext");techtext.val(techtext.val()+text);});return"";},getScreenInfo:function(){return"Screen: "+screen.availWidth+" x "+screen.availHeight+" x "+screen.colorDepth+". Document: "+$(document).width()+" x "+$(document).height();
},count:function(name){try{var element=document.getElementById(name);if(!element){var result=0;$(name).each(function(index,el){result+=el.getElementsByTagName("*").length;});return result;}return element.getElementsByTagName("*").length;}catch(e){return"Error";}},countPrint:function(name){return name+"="+this.count(name)+" ";},getDomCount:function(){try{return document.getElementsByTagName("*").length+"\n"+this.countPrint("header")+this.countPrint("footer")+this.countPrint("searchDivContent2")+this.countPrint("dateRange")+this.countPrint("contents")+this.countPrint("plantab1")+this.countPrint("plantab2")+this.countPrint("plantab3")+this.countPrint(".ui-multiselect-menu");}catch(e){return"Error";}},getPluginInfo:function(){try{var plugins=navigator.plugins;var result=[];if(isEmpty(plugins)){return result.join("");}var numPlugins=plugins.length;for(var i=0;i<numPlugins;i++){result.push(plugins.item(i).name);}return"Plugins: "+result.join(", ");}catch(e){return"Plugins error";}}};function initAboutButton(){TEInfo.init();$("#supportbutton").fancybox({"margin":15,"padding":0,"autoScale":false,"transitionIn":transition(),"transitionOut":transition(),"width":510,"height":600,"onClosed":function(){fancyboxClosed();}});}function initiOS(){addTimer("Body="+$("body").attr("class"));if(isiOS()){$("body").addClass("iOS");iPadViewport();return;}$("body").addClass("desktop");var ua=window.navigator.userAgent;var isIE=/MSIE|Trident/.test(ua);if(isIE){$("body").addClass("msieworkaround");}}function isWebkit(){var platform=""+navigator.userAgent;return(platform.indexOf("AppleWebKit")!=-1);}function hasVerticalScrollbar(){return $("body").height()>=$(window).height();
}function scrollbar(){if(!isWebkit()){return 0;}if(!hasVerticalScrollbar()){return 15;}return 0;}function initOpenInTECore(){var val=""+document.cookie;if(val.indexOf("_csrf=")!=-1){$(".saveToCore").show();}}function initSmall(){initiOS();PageMenu.init();updateLogin();initAboutButton();TELanguage.init();initLanguageSwap();addTimer("Small="+$("body").attr("class"));wait(function(){PageMenu.checkTimeZone();initOpenInTECore();},"checkTimeZone");}function initDropLink(){$(".droplink").unbind("change").change(function(){var current=$(this);var val=current.val();if(val.indexOf("http")!=-1){PageLock.save();window.location=val;}});}function initBooleanBox(){initSmall();var boxes=$(".booleanboxlabel");var wide=false;boxes.each(function(){if(wide){return;}if($(this).width()>95){wide=true;}});if(wide){boxes.each(function(){$(this).next().addClass("booleanboxWide");});}}function initPlantabs(){var plantabs=$("#plantabs");if(plantabs.length<=0){return false;}$(window).scroll(function(){if(jumpTo!==0){$(window).scrollTop(jumpTo);jumpTo=0;}});plantabs.tabs({show:function(event,ui){$(".planbuttons").hide();$("#planbutton"+ui.panel.id).show();$("body").removeClass("plantab1 plantab2 plantab3 plantab10 plantab11 plantab12 plantab13 plantab14 plantab15 plantab16 plantab17 plantab18 plantab19 plantab20").addClass(ui.panel.id);navTables.updateWrapTarget(ui.panel.id);Sorter.currentPart=toString(ui.panel.id).substring("plantab".length);if(planloading){return;}var wrap=$("#"+ui.panel.id).children();if(TEPlan&&wrap.children().length<=0){TEPlan.loadTab(wrap.attr("data-tab"));}if(supports_html5_storage()){setItem("plantab_"+objectSearcherFF,""+ui.panel.id);
}if(!isEmpty(reloadtabs[""+ui.panel.id])){$("#"+ui.panel.id).find(".reloadable").trigger("reload");reloadtabs[""+ui.panel.id]="";}}});Stats3.call("plan-page","plan-page");return true;}function closeSearchAndRes(){if($("#searchDiv").is(":visible")){return;}reshide();}var TEPlan;var TEReserve;function initSwitcher(dateLocale){Mousetrap.bind("esc",function(e,combo){stop(e);closeSearchAndRes();closeHeader();TEZoom.hide();BatchEdit.disable();HideReservations.disable();});Mousetrap.bind(["enter","space"],function(e,combo){var found=$(getTarget(e));if(found.hasClass("clickable")||found.hasClass("clickable2")){stop(e);found.click();}});resFirstObjectSelection();var isPlan=initPlantabs();updateLogin();fitToWindow();$("#ajaxError").ajaxError(function(e,xhr,settings,exception){if(xhr.statusText=="abort"){return;}if((""+settings.url).indexOf("stats3/s.json")>0){TEError.asText(xhr,e,exception);return;}if(isPlan&&xhr.status&&xhr.status==412){TEError.show("You are logged out. Reload page to login.");return;}if(isPlan&&xhr.status&&xhr.status==504){TEError.show("This operation will take a long time to complete, reload page to see the progress. (504)");return;}TEError.show(TEError.asText(xhr,e,exception));});$("#footerList").children(".exp").each(function(index){$(this).click(function(){if($(this).hasClass("expselected")){return false;}var name=("#"+this.id).replace("Element2","");window.location.hash=name;$("#footer3").hide();$(this).toggleClass("expselected");$("#footerList").children(":not(#"+this.id+")").removeClass("expselected");var footer2=$("#footer2");var name=this.id.substr(0,this.id.length-1);
var hidden=footer2.css("display")=="none";var speed=hidden?"":"normal";footer2.children(":not(#"+name+")").hide();$("#"+name).show();if(hidden){footer2.slideToggle();}Stats3.call("customize-"+name.replace("linksElement",""));return false;});});$(".saveSwitcher").click(function(){window.location.hash="#savelinks";expandCurrent();return false;});$(".mergeSwitcher").click(function(){window.location.hash="#mergelinks";expandCurrent();return false;});var tabSwitcherButton=$(".tabSwitcher");tabSwitcherButton.click(function(e){stop(e);tabSwitchAction();return false;});function tabSwitchAction(){expandHeader($("#footer"),false,tabSwitcherButton,true);}$("#footerOverlay").click(function(){tabSwitchAction();});initjQueryUI(dateLocale);$(".txtRange-close").click(function(){hideHeadlineTimeOverlay();});TEReserve=initReserve();expandCurrent(true,$("#searchDiv").data("showsearch"));PageLock.restore();initBooleanBox();PageScroll.start();if(window.location.hash!==""){PageScroll.doPause();}wait(function(){initObjectSelector();TEPlan=initPlan();loadPlanTab();initStatusSelector();initDropLink();PageLock.init();initCalendarLink();Favorites.init();ObjectsSearcher.init();initIcalTime();initWindowResize();initSendMail();initClock();fitColorExplain();PageMenu.initReminderMail();TEQuickZoom.init();},"UI");wait(TEHeader.adjust,"headers");wait(ObjectsSearcher.initFields,"fields");wait(initAdmin,"admin");wait(function(){initResImages(2);setTimeout(fitHeaderToScreen,10);setTimeout(fitHeaderToScreen,50);setTimeout(fitHeaderToScreen,100);},"images");}function reInitResImages(){waitForFinalEvent(function(){initResImages();
},1000,"initResImages");}function initResImages(state){var missing=false;$(".resimage").each(function(){var ok=isImageOk(this);if(!ok){missing=true;}var image=$(this);var iw=image.attr("data-iw");var ih=image.attr("data-ih");if(!iw){iw=image.width();if(ok&&iw>0){image.attr("data-iw",iw);}}if(!ih){ih=image.height();if(ok&&ih>0){image.attr("data-ih",ih);}}var parent=image.parent();var width=parent.width();var height=parent.height();var widthRatio=width/iw;var heightRatio=height/ih;var ratio=Math.min(widthRatio,heightRatio);if(ratio>1){ratio=1;}var nw=Math.floor(ratio*iw);var nh=Math.floor(ratio*ih);if(nw>0&&nh>0){image.attr("width",nw).attr("height",nh);}});if(missing&&state==2){reInitResImages();}}var objectLinkId="";var objectSearcherReplace=0;function doUpdateObjectlink(){var ids="";if(objectLinkId!==""){ids=$("#linksdata").attr("data-searchids");var array=ids.split(",");var i=0;var length=array.length;for(i=0;i<length;i++){if(array[i]==objectLinkId){return true;}}var replaced=false;length=array.length;for(i=0;i<length;i++){if(array[i]==objectSearcherReplace){array[i]=objectLinkId;replaced=true;}}if(replaced){ids=array.join(",");}if(!replaced){if(ids.length>0){ids+=",";}ids+=objectLinkId;}}objectSearcherReplace=0;changeObjectIds(ids);return true;}function updateObjectlink(id){$.fancybox.close();objectLinkId=id;setTimeout(doUpdateObjectlink,200);}function openReplaceObject(id,element){objectSearcherReplace=id;objectSearcherOrig=$(element);$("#openSearchButton").click();}function getValNoPlaceHolder(input){if(input.is(":checkbox")){return input.is(":checked")?"1":"0";}var value=input.val();
if(value==input.attr("placeholder")){return"";}return value;}function reloadParentView(){if(parent){if(parent.leftresreloadopen){parent.leftresreloadopen();}}}function markRequiredFields(){var ok=true;$(".editfield").each(function(){var field=$(this);if(!field.prop("required")){return;}var value=encodeURIComponent($.trim(getValNoPlaceHolder(field)));if(isEmpty(value)){field.addClass("savefailed");ok=false;alert("The field is mandatory");}});return ok;}function addEditFieldValues(onlyTime,input){var ids=$(".resChangeIds").serialize();var data=isEmpty(ids)?"":"&"+ids;if(onlyTime){if($(".timeHourStart").length>0){var name="t";var value=$(".timeHourStart").val()+"."+$(".timeMinuteStart").val()+","+$(".timeHourEnd").val()+"."+$(".timeMinuteEnd").val();data+="&"+name+"="+value;}if($("#resDateStart").length>0){var name="dates";var value=$("#resDateStart").val()+"-"+$("#resDateEnd").val();data+="&"+name+"="+value;}return data;}var encodeField=function(field){var name="f"+field.attr("data-field");var value=encodeURIComponent($.trim(getValNoPlaceHolder(field)));return"&"+name+"="+value;};if(input.length>0){var selected=$(".resids:checked").map(function(index,checkbox){return $(checkbox).attr("name");}).get();var result="";var all=toString(input.parent().attr("data-rid")).split(",");$.map(all,function(val,index){if(selected.indexOf(val)>=0){result+="&"+val+"=on";}});return result+encodeField(input);}$(".editfield").each(function(){data+=encodeField($(this));});return data;}function isMultiEdit(){return $(".residwrap").length>0;}var EditField={clearStyle:function(element){element.removeClass("saveok savefailed saveanimation");
},saveFields:function(reload,element,onlyTime){$("#resconfirm").empty();var id=$("#table0").attr("data-resid");var rid="";if(isEmpty(id)){rid=element.closest(".diffwrap").attr("data-rid");id=rid;if(isEmpty(id)){return;}}if(id=="0"){return;}EditField.clearStyle(element);if(!markRequiredFields()){return;}element.addClass("saveanimation");var data="ef=3"+addEditFieldValues(onlyTime,element);data+=isEmpty(rid)?"":"&"+rid;var postURL=""+$("#linksdata").attr("data-linksbase");post2(postURL,data,function(data,textStatus,jqXHR){$(".savefailed").removeClass("savefailed");element.addClass("saveok");if(element.is(":checkbox")){element.parents("td:first").addClass("saveok");}if(element.hasClass("reloadaction")){window.location.reload();}setTimeout(function(){element.removeClass("saveanimation");},300);if(reload){reloadParentView();window.location.href=data;}parent.$.fancybox.reloadOnClose=true;if(isMultiEdit()){window.location.reload();}},function(jqXHR,textStatus,errorThrown){$(".saveok").removeClass("saveok");EditField.clearStyle(element);element.addClass("savefailed");var text=jqXHR.responseText;if(isEmpty(text)){return;}if(jqXHR.status==412){alert(text+" \nReloading page.");window.location.reload(true);return;}parent.$.fancybox.reloadOnClose=true;alert(text);if(isMultiEdit()){window.location.reload();}});}};function initEditField(){if(supports_html5_storage()&&window.localStorage.getItem("saveok_"+objectSearcherFF)=="t"){$(".resobjectsearch.hasClick .objectchange").addClass("saveok");setItem("saveok_"+objectSearcherFF,"");}$(".dateautosave").each(function(){var element=$(this);if(element.is("select")){element.unbind("change").change(function(){EditField.saveFields(false,element,true);
});return;}element.unbind("blur").blur(function(){setTimeout(function(){EditField.saveFields(false,element,true);},200);});});$(".editfield").each(function(){var element=$(this);if(element.is(":checkbox")){element.unbind("change").change(function(){EditField.saveFields(false,element);});return;}if(element.is("select")){element.unbind("change").change(function(){EditField.saveFields(false,element);});return;}element.unbind("blur").blur(function(){if(element.val()==element.attr("data-basevalue")){return;}element.attr("data-basevalue",""+element.val());EditField.saveFields(false,element);});});$(".editfieldbutton").each(function(){var clearEdit=function(){reloadParentView();parent.$.fancybox.reloadOnClose=true;var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=url[1].split("&");setParam(path,"ef","0",false);var newLocation=asURL(url,path);window.location=newLocation;};var element=$(this);element.unbind("click").click(function(){if(isMultiEdit()){clearEdit();return;}EditField.saveFields(true,element);});});}function initCurrentFocus(){$("input").focus(function(){$(this).parent().addClass("curFocus");});$("input").blur(function(){$(this).parent().removeClass("curFocus");});}function selectedCopyList(){return $(".resids:checked").map(function(index,checkbox){return"&"+$(checkbox).attr("name")+"=on";}).get();}function selectedCopyIds(){return selectedCopyList().join("");}function cancelRes(button){var table=$("#table0");var id=""+table.attr("data-resid");if(id=="0"){alert("Inget boknings-ID");return;}var link=""+window.location;var url=link.split("?")[0];
var doneText=button.attr(selectedCopyList().length>1?"data-okmulti":"data-ok");var lang="&l="+$("#linksdata").attr("data-lang")+"&sid="+$("#linksdata").attr("data-sid");var postURL=url+"?id="+id+selectedCopyIds()+lang;parent.$.fancybox.reloadOnClose=true;$.ajax({type:"DELETE",url:postURL,success:function(data,textStatus,jqXHR){table.html("<h3>"+doneText+"</h3>");if(!isEmpty(data)){$("#sendmailsubject").val(data);}$("#sendmailmessage").val($("#sendmailmessage").attr("data-cancelled"));$(".showsendmail").show();$("#cancelstep2").hide();},error:function(jqXHR,textStatus,errorThrown){alert(jqXHR.responseText);},dataType:"text"});}function initCancelReservation(){var button=$("#cancelreservationbutton");button.unbind("click").click(function(){button.hide();$(".editfieldbutton").hide();var length=selectedCopyList().length;if(length>1){$("#cancelstep2button").val($("#cancelstep2button").attr("data-text")+" x"+length);$("#cancelstep2text").text($("#cancelstep2text").attr("data-multi"));}$("#cancelstep2").fadeIn();});$("#cancelstep2button").unbind("click").click(function(){cancelRes(button);});}function resetMail(){$("#mailsendbox").hide();$("#mailtopwrap").show();$(".showsendmail").show();$("#mailwrap").html("");$(".leftreserror").html("");}function initSendMailWrap(){initSendMailButton();$(".showsendmail").unbind("click").click(function(e){$(".contentsDiv").hide();$("#mailwrap").show();$(".modifyReserveWrap").show();});}function initSendMail(){initSendMailButton();$(".showsendmail").unbind("click").click(function(e){if(!$("#mailtopwrap").is(":visible")){resetMail();}$("#mailsendbox").slideToggle();
$(".showsendmail").hide();});}function initSendMailButton(){var sendmailbutton=$("#sendmailbutton");sendmailbutton.unbind("click").click(function(){var addresses=$.trim(getValNoPlaceHolder($("#sendmailaddresses")));if(isEmpty(addresses)){alert(sendmailbutton.data("nomail"));return;}var id=""+$("#table0").data("resid");if(id=="0"||id=="undefined"){id=""+$("#resconfirm table").data("resid");if(id=="0"||id=="undefined"){alert("Inget boknings-ID");return;}}var link=""+window.location;var url=removeHashFrom(link.split("?")[0]);var sid=Qt.join("&sid",$("#linksdata").attr("data-sid"));var subject=$.trim(getValNoPlaceHolder($("#sendmailsubject")));var message=$.trim(getValNoPlaceHolder($("#sendmailmessage")));var lang=Qt.join("&l",$("#linksdata").attr("data-lang"));var postURL=url+"?id="+id+"&media=html&mailto="+encodeURIComponent(addresses)+"&dt=t"+sid+lang+"&subject="+encodeURIComponent(subject)+"&msg="+encodeURIComponent(message);$("#mailtopwrap").slideUp();$("#mailwrap").html('<img src="'+$("#linksdata").attr("data-staticui")+'loading.svg" alt="Loading..." width="32" height="32">');$.ajax({type:"POST",url:postURL,data:"mail",success:function(data,textStatus,jqXHR){$("#mailwrap").html("<h3>"+sendmailbutton.data("sent")+" "+addresses+"</h3>");},error:function(jqXHR,textStatus,errorThrown){alert(sendmailbutton.data("error")+" "+addresses+": "+jqXHR.responseText);},dataType:"text"});});}function isInputTypeSupported(inputType){var input=document.createElement("input");input.setAttribute("type",inputType);return input.type==inputType;}function initLinkToRes(){$(".hourLine").click(function(e){var found=$(getTarget(e));
jumpToRes(found.attr("data-object"),found.parents(".weekDiv").attr("data-dates"));});}function jumpToRes(id,dates){var page=toString($("#contents").attr("data-linktores")).split("");if(page.length!=2){alert("No link to page: "+page);return;}var date=dates.split(",")[0];var sid=page[1];var link=$("#linksdata").attr("data-linksbase");var url=link.split("?");var path=[];setParam(path,"h","t",false);setParam(path,"sid",sid,false);setParam(path,"objects",id,false);setParam(path,"dates",date,false);setParam(path,"p",date+"-"+date,false);var newLocation=asURL(url,path);window.location=newLocation;return true;}